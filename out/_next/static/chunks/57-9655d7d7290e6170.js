(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[57],{438:(t,e,n)=>{"use strict";n.d(e,{ex:()=>t8,R:()=>eC,B0:()=>eh,Lz:()=>function t(e,n){var r=new d(n.width,n.height),i=r.width,a=r.height;if(i<=0||a<=0)throw Error("resizeResults - invalid dimensions: "+JSON.stringify({width:i,height:a}));if(Array.isArray(e))return e.map(function(e){return t(e,{width:i,height:a})});if(tP(e)){var o=e.detection.forSize(i,a),s=e.unshiftedLandmarks.forSize(o.box.width,o.box.height);return tA(j(e,o),s)}return R(e)?j(e,e.detection.forSize(i,a)):e instanceof D||e instanceof E?e.forSize(i,a):e}});var r,i,a,o,s=n(246),u=function(t,e){return(u=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function c(t,e){function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var p=function(){return(p=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function l(t,e,n,r){return new(n||(n=Promise))(function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?i(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(o,s)}u((r=r.apply(t,e||[])).next())})}function h(t,e){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){var u=[a,s];if(n)throw TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}function f(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}var d=function(){function t(t,e){if(!x(t)||!x(e))throw Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:t,height:e}));this._width=t,this._height=e}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),t.prototype.reverse=function(){return new t(1/this.width,1/this.height)},t}();function m(t,e){return t instanceof s.qYS&&t.shape.length===e}function y(t){return m(t,4)}function v(t){return t&&t.width&&t.height}function g(t){return t.reduce(function(t,e){return t.add(e)},new _(0,0)).div(new _(t.length,t.length))}function b(t,e,n){return Array(t).fill(0).map(function(t,r){return e+r*n})}function x(t){return!!t&&t!==1/0&&t!==-1/0&&!isNaN(t)||0===t}function w(t){return x(t)&&0<=t&&t<=1}var _=function(){function t(t,e){this._x=t,this._y=e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.sub=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.mul=function(e){return new t(this.x*e.x,this.y*e.y)},t.prototype.div=function(e){return new t(this.x/e.x,this.y/e.y)},t.prototype.abs=function(){return new t(Math.abs(this.x),Math.abs(this.y))},t.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y))},t}(),S=function(){function t(e,n){void 0===n&&(n=!0);var r=e||{},i=[r.left,r.top,r.right,r.bottom].every(x),a=[r.x,r.y,r.width,r.height].every(x);if(!a&&!i)throw Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var o=a?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=o[0],u=o[1],c=o[2],p=o[3];t.assertIsValidBox({x:s,y:u,width:c,height:p},"Box.constructor",n),this._x=s,this._y=u,this._width=c,this._height=p}return t.isRect=function(t){return!!t&&[t.x,t.y,t.width,t.height].every(x)},t.assertIsValidBox=function(e,n,r){if(void 0===r&&(r=!1),!t.isRect(e))throw Error(n+" - invalid box: "+JSON.stringify(e)+", expected object with properties x, y, width, height");if(!r&&(e.width<0||e.height<0))throw Error(n+" - width ("+e.width+") and height ("+e.height+") must be positive numbers")},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return new _(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRight",{get:function(){return new _(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeft",{get:function(){return new _(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return new _(this.right,this.bottom)},enumerable:!0,configurable:!0}),t.prototype.round=function(){var e=[this.x,this.y,this.width,this.height].map(function(t){return Math.round(t)});return new t({x:e[0],y:e[1],width:e[2],height:e[3]})},t.prototype.floor=function(){var e=[this.x,this.y,this.width,this.height].map(function(t){return Math.floor(t)});return new t({x:e[0],y:e[1],width:e[2],height:e[3]})},t.prototype.toSquare=function(){var e=this.x,n=this.y,r=this.width,i=this.height,a=Math.abs(r-i);return r<i&&(e-=a/2,r+=a),i<r&&(n-=a/2,i+=a),new t({x:e,y:n,width:r,height:i})},t.prototype.rescale=function(e){var n=v(e)?e.width:e,r=v(e)?e.height:e;return new t({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},t.prototype.pad=function(e,n){var r=[this.x-e/2,this.y-n/2,this.width+e,this.height+n];return new t({x:r[0],y:r[1],width:r[2],height:r[3]})},t.prototype.clipAtImageBorders=function(e,n){var r=this.x,i=this.y,a=this.right,o=this.bottom,s=Math.max(r,0),u=Math.max(i,0),c=Math.min(a-s,e-s),p=Math.min(o-u,n-u);return new t({x:s,y:u,width:c,height:p}).floor()},t.prototype.shift=function(e,n){var r=this.width,i=this.height;return new t({x:this.x+e,y:this.y+n,width:r,height:i})},t.prototype.padAtBorders=function(t,e){var n=this.width+1,r=this.height+1,i=n,a=r,o=this.left,s=this.top,u=this.right,c=this.bottom;return u>e&&(i=-u+e+n,u=e),c>t&&(a=-c+t+r,c=t),o<1&&(a=2-o,o=1),s<1&&(a=2-s,s=1),{dy:1,edy:a,dx:1,edx:i,y:s,ey:c,x:o,ex:u,w:n,h:r}},t.prototype.calibrate=function(e){return new t({left:this.left+e.left*this.width,top:this.top+e.top*this.height,right:this.right+e.right*this.width,bottom:this.bottom+e.bottom*this.height}).toSquare().round()},t}(),T=function(t){function e(e,n,r,i,a){return void 0===a&&(a=!1),t.call(this,{left:e,top:n,right:r,bottom:i},a)||this}return c(e,t),e}(S),N=function(){function t(t,e,n,r,i){this._imageDims=new d(i.width,i.height),this._score=t,this._classScore=e,this._className=n,this._box=new S(r).rescale(this._imageDims)}return Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeBox",{get:function(){return new S(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),t.prototype.forSize=function(e,n){return new t(this.score,this.classScore,this.className,this.relativeBox,{width:e,height:n})},t}(),E=function(t){function e(e,n,r){return t.call(this,e,e,"",n,r)||this}return c(e,t),e.prototype.forSize=function(n,r){var i=t.prototype.forSize.call(this,n,r);return new e(i.score,i.relativeBox,i.imageDims)},e}(N);function P(t,e,n,r){void 0===r&&(r=!0);for(var i=e.map(function(t,e){return{score:t,boxIndex:e}}).sort(function(t,e){return t.score-e.score}).map(function(t){return t.boxIndex}),a=[];i.length>0;)!function(){var e=i.pop();a.push(e);for(var o=i,s=[],u=0;u<o.length;u++){var c=o[u],p=t[e],l=t[c];s.push(function(t,e,n){void 0===n&&(n=!0);var r=Math.max(0,Math.min(t.right,e.right)-Math.max(t.left,e.left))*Math.max(0,Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top));return n?r/(t.area+e.area-r):r/Math.min(t.area,e.area)}(p,l,r))}i=i.filter(function(t,e){return s[e]<=n})}();return a}function A(t,e){return s.DZQ(function(){var n=e[0],r=e[1],i=e[2],a=s.GSj(f(t.shape.slice(0,3),[1]),n),o=s.GSj(f(t.shape.slice(0,3),[1]),r),u=s.GSj(f(t.shape.slice(0,3),[1]),i),c=s.xWs([a,o,u],3);return s.jbE(t,c)})}function M(t){return 1/(1+Math.exp(-t))}var O=function(t){function e(e,n,r,i,a){return void 0===a&&(a=!1),t.call(this,{x:e,y:n,width:r,height:i},a)||this}return c(e,t),e}(S),D=function(){function t(t,e,n){void 0===n&&(n=new _(0,0));var r=e.width,i=e.height;this._imgDims=new d(r,i),this._shift=n,this._positions=t.map(function(t){return t.mul(new _(r,i)).add(n)})}return Object.defineProperty(t.prototype,"shift",{get:function(){return new _(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativePositions",{get:function(){var t=this;return this._positions.map(function(e){return e.sub(t._shift).div(new _(t.imageWidth,t.imageHeight))})},enumerable:!0,configurable:!0}),t.prototype.forSize=function(t,e){return new this.constructor(this.relativePositions,{width:t,height:e})},t.prototype.shiftBy=function(t,e){return new this.constructor(this.relativePositions,this._imgDims,new _(t,e))},t.prototype.shiftByPoint=function(t){return this.shiftBy(t.x,t.y)},t.prototype.align=function(t,e){if(void 0===e&&(e={}),t){var n=t instanceof E?t.box.floor():new S(t);return this.shiftBy(n.x,n.y).align(null,e)}var r=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},e),i=r.useDlibAlignment,a=r.minBoxPadding;return i?this.alignDlib():this.alignMinBbox(a)},t.prototype.alignDlib=function(){var t=this.getRefPointsForAlignment(),e=t[0],n=t[1],r=t[2],i=function(t){return r.sub(t).magnitude()},a=Math.floor((i(e)+i(n))/2/.45),o=g(t),s=Math.floor(Math.max(0,o.x-.5*a)),u=Math.floor(Math.max(0,o.y-.43*a));return new O(s,u,Math.min(a,this.imageWidth+s),Math.min(a,this.imageHeight+u))},t.prototype.alignMinBbox=function(t){var e,n,r,i=(n=(e=this.positions).map(function(t){return t.x}),r=e.map(function(t){return t.y}),new T(n.reduce(function(t,e){return e<t?e:t},1/0),r.reduce(function(t,e){return e<t?e:t},1/0),n.reduce(function(t,e){return t<e?e:t},0),r.reduce(function(t,e){return t<e?e:t},0)));return i.pad(i.width*t,i.height*t)},t.prototype.getRefPointsForAlignment=function(){throw Error("getRefPointsForAlignment not implemented by base class")},t}(),C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.getRefPointsForAlignment=function(){var t=this.positions;return[t[0],t[1],g([t[3],t[4]])]},e}(D),k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.getJawOutline=function(){return this.positions.slice(0,17)},e.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},e.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},e.prototype.getNose=function(){return this.positions.slice(27,36)},e.prototype.getLeftEye=function(){return this.positions.slice(36,42)},e.prototype.getRightEye=function(){return this.positions.slice(42,48)},e.prototype.getMouth=function(){return this.positions.slice(48,68)},e.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(g)},e}(D),F=function(){function t(t,e){this._label=t,this._distance=e}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){var e,n,r;return void 0===t&&(t=!0),""+this.label+(t?" ("+(e=this.distance,void 0===n&&(n=2),Math.floor(e*(r=Math.pow(10,n)))/r)+")":"")},t}(),I=function(t){function e(e,n){var r=t.call(this,e)||this;return r._label=n,r}return c(e,t),e.assertIsValidLabeledBox=function(t,e){if(S.assertIsValidBox(t,e),!x(t.label))throw Error(e+" - expected property label ("+t.label+") to be a number")},Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),e}(S),V=function(){function t(t,e){if("string"!=typeof t)throw Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(e)||e.some(function(t){return!(t instanceof Float32Array)}))throw Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=t,this._descriptors=e}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(t){return Array.from(t)})}},t.fromJSON=function(e){var n=e.descriptors.map(function(t){return new Float32Array(t)});return new t(e.label,n)},t}();function R(t){return t.detection instanceof E}function j(t,e){return Object.assign({},t,{detection:e})}!function(t){function e(e,n,r,i){var a=t.call(this,e,n)||this;return a._score=r,a._classScore=i,a}c(e,t),e.assertIsValidPredictedBox=function(t,e){if(I.assertIsValidLabeledBox(t,e),!w(t.score)||!w(t.classScore))throw Error(e+" - expected properties score ("+t.score+") and ("+t.classScore+") to be a number between [0, 1]")},Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0})}(I);var L=n(9509);function z(){return"object"==typeof n.g&&void 0!==L&&!!L.version}var B={getEnv:function(){if(!r)throw Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return r},isNodejs:z};function W(t){return B.isNodejs()||"string"!=typeof t?t:document.getElementById(t)}function U(t){var e=B.getEnv(),n=e.Canvas;if(t instanceof e.CanvasRenderingContext2D)return t;var r=W(t);if(!(r instanceof n))throw Error("resolveContext2d - expected canvas to be of instance of Canvas");var i=r.getContext("2d");if(!i)throw Error("resolveContext2d - canvas 2d context is null");return i}(function(){var t,e,i,a;"object"==typeof window&&"undefined"!=typeof document&&"undefined"!=typeof HTMLImageElement&&"undefined"!=typeof HTMLCanvasElement&&"undefined"!=typeof HTMLVideoElement&&"undefined"!=typeof ImageData&&"undefined"!=typeof CanvasRenderingContext2D&&(r={Canvas:HTMLCanvasElement,CanvasRenderingContext2D:CanvasRenderingContext2D,Image:HTMLImageElement,ImageData:ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:window.fetch||function(){throw Error("fetch - missing fetch implementation for browser environment")},readFile:function(){throw Error("readFile - filesystem not available for browser environment")}}),z()&&(t=n.g.Canvas||n.g.HTMLCanvasElement,e=n.g.Image||n.g.HTMLImageElement,i=n.g.fetch||function(){throw Error("fetch - missing fetch implementation for nodejs environment")},a=function(t){var e="";if(!t)try{t=n(Object(function(){var t=Error("Cannot find module 'fs'");throw t.code="MODULE_NOT_FOUND",t}()))}catch(t){e=t.toString()}return{readFile:t?function(e){return new Promise(function(n,r){t.readFile(e,function(t,e){return t?r(t):n(e)})})}:function(){throw Error("readFile - failed to require fs in nodejs environment with error: "+e)}}}(),r=p({Canvas:t||function(){},CanvasRenderingContext2D:n.g.CanvasRenderingContext2D||function(){},Image:e||function(){},ImageData:n.g.ImageData||function(){},Video:n.g.HTMLVideoElement||function(){},createCanvasElement:function(){if(t)return new t;throw Error("createCanvasElement - missing Canvas implementation for nodejs environment")},createImageElement:function(){if(e)return new e;throw Error("createImageElement - missing Image implementation for nodejs environment")},fetch:i},a))})(),function(t){t.TOP_LEFT="TOP_LEFT",t.TOP_RIGHT="TOP_RIGHT",t.BOTTOM_LEFT="BOTTOM_LEFT",t.BOTTOM_RIGHT="BOTTOM_RIGHT"}(i||(i={}));var Q=function(t){void 0===t&&(t={});var e=t.anchorPosition,n=t.backgroundColor,r=t.fontColor,a=t.fontSize,o=t.fontStyle,s=t.padding;this.anchorPosition=e||i.TOP_LEFT,this.backgroundColor=n||"rgba(0, 0, 0, 0.5)",this.fontColor=r||"rgba(255, 255, 255, 1)",this.fontSize=a||14,this.fontStyle=o||"Georgia",this.padding=s||4},q=function(){function t(e,n,r){void 0===r&&(r={}),this.text="string"==typeof e?[e]:e instanceof t?e.text:e,this.anchor=n,this.options=new Q(r)}return t.prototype.measureWidth=function(t){var e=this.options.padding;return this.text.map(function(e){return t.measureText(e).width}).reduce(function(t,e){return t<e?e:t},0)+2*e},t.prototype.measureHeight=function(){var t=this.options,e=t.fontSize,n=t.padding;return this.text.length*e+2*n},t.prototype.getUpperLeft=function(t,e){var n=this.options.anchorPosition,r=n===i.BOTTOM_RIGHT||n===i.TOP_RIGHT,a=n===i.BOTTOM_LEFT||n===i.BOTTOM_RIGHT,o=this.measureWidth(t),s=this.measureHeight(),u=r?this.anchor.x-o:this.anchor.x,c=a?this.anchor.y-s:this.anchor.y;return e?{x:Math.max(Math.min(u,e.width-o),0),y:Math.max(Math.min(c,e.height-s),0)}:{x:u,y:c}},t.prototype.draw=function(t){var e=W(t),n=U(e),r=this.options,i=r.backgroundColor,a=r.fontColor,o=r.fontSize,s=r.fontStyle,u=r.padding;n.font=o+"px "+s;var c=this.measureWidth(n),p=this.measureHeight();n.fillStyle=i;var l=this.getUpperLeft(n,e);n.fillRect(l.x,l.y,c,p),n.fillStyle=a,this.text.forEach(function(t,e){var r=u+l.x,i=u+l.y+(e+1)*o;n.fillText(t,r,i)})},t}(),H=function(t){void 0===t&&(t={});var e=t.boxColor,n=t.lineWidth,r=t.label,a=t.drawLabelOptions;this.boxColor=e||"rgba(0, 0, 255, 1)",this.lineWidth=n||2,this.label=r;var o={anchorPosition:i.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new Q(Object.assign({},o,a))};function Z(t){var e=B.getEnv(),n=e.Image,r=e.Video;return t instanceof n&&t.complete||t instanceof r&&t.readyState>=3}function G(t){var e=B.getEnv(),n=e.Image,r=e.Video;return t instanceof n?new d(t.naturalWidth,t.naturalHeight):t instanceof r?new d(t.videoWidth,t.videoHeight):new d(t.width,t.height)}function $(t){var e=t.width,n=t.height,r=(0,B.getEnv().createCanvasElement)();return r.width=e,r.height=n,r}function K(t,e){var n=B.getEnv().ImageData;if(!(t instanceof n)&&!Z(t))throw Error("createCanvasFromMedia - media has not finished loading yet");var r=e||G(t),i=r.width,a=r.height,o=$({width:i,height:a});return t instanceof n?U(o).putImageData(t,0,0):U(o).drawImage(t,0,0,i,a),o}function X(t){var e=B.getEnv(),n=e.Image,r=e.Canvas,i=e.Video;return t instanceof n||t instanceof r||t instanceof i}(function(t,e){void 0===e&&(e={}),this.box=new S(t),this.options=new H(e)}).prototype.draw=function(t){var e=U(t),n=this.options,r=n.boxColor,i=n.lineWidth,a=this.box,o=a.x,s=a.y,u=a.width,c=a.height;e.strokeStyle=r,e.lineWidth=i,e.strokeRect(o,s,u,c);var p=this.options.label;p&&new q([p],{x:o-i/2,y:s},this.options.drawLabelOptions).draw(t)};var Y=function(){function t(t,e){var n=this;if(void 0===e&&(e=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(t))throw Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+t);this._treatAsBatchInput=e,this._batchSize=t.length,t.forEach(function(t,e){if(m(t,3)){n._imageTensors[e]=t,n._inputDimensions[e]=t.shape;return}if(y(t)){var r=t.shape[0];if(1!==r)throw Error("NetInput - tf.Tensor4D with batchSize "+r+" passed, but not supported in input array");n._imageTensors[e]=t,n._inputDimensions[e]=t.shape.slice(1);return}var i=t instanceof B.getEnv().Canvas?t:K(t);n._canvases[e]=i,n._inputDimensions[e]=[i.height,i.width,3]})}return Object.defineProperty(t.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reshapedInputDimensions",{get:function(){var t=this;return b(this.batchSize,0,1).map(function(e,n){return t.getReshapedInputDimensions(n)})},enumerable:!0,configurable:!0}),t.prototype.getInput=function(t){return this.canvases[t]||this.imageTensors[t]},t.prototype.getInputDimensions=function(t){return this._inputDimensions[t]},t.prototype.getInputHeight=function(t){return this._inputDimensions[t][0]},t.prototype.getInputWidth=function(t){return this._inputDimensions[t][1]},t.prototype.getReshapedInputDimensions=function(t){var e,n,r,i,a;if("number"!=typeof this.inputSize)throw Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");return e={width:this.getInputWidth(t),height:this.getInputHeight(t)},n=this.inputSize,r=e.width,a=n/Math.max(i=e.height,r),new d(Math.round(r*a),Math.round(i*a))},t.prototype.toBatchTensor=function(t,e){var n=this;return void 0===e&&(e=!0),this._inputSize=t,s.DZQ(function(){var r=b(n.batchSize,0,1).map(function(r){var i=n.getInput(r);if(i instanceof s.qYS){var a,o,u=y(i)?i:i.expandDims();return a=u,void 0===(o=e)&&(o=!1),((u=s.DZQ(function(){var t=a.shape.slice(1),e=t[0],n=t[1];if(e===n)return a;var r=Math.abs(e-n),i=e>n?2:1,u=function(t){var e=a.shape.slice();return e[i]=t,s.GSj(e,0)},c=u(Math.round(r*(o?.5:1))),p=r-c.shape[i],l=[o&&p?u(p):null,a,c].filter(function(t){return!!t}).map(function(t){return t.toFloat()});return s.xWs(l,i)})).shape[1]!==t||u.shape[2]!==t)&&(u=s.Slp.resizeBilinear(u,[t,t])),u.as3D(t,t,3)}if(i instanceof B.getEnv().Canvas)return s.TaL.fromPixels(function(t,e,n){void 0===n&&(n=!1);var r=B.getEnv(),i=r.Image,a=r.Canvas;if(!(t instanceof i||t instanceof a))throw Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var o=G(t),s=e/Math.max(o.height,o.width),u=s*o.width,c=s*o.height,p=$({width:e,height:e}),l=t instanceof a?t:K(t),h=Math.abs(u-c)/2,f=n&&u<c?h:0,d=n&&c<u?h:0;return U(p).drawImage(l,f,d,u,c),p}(i,t,e));throw Error("toBatchTensor - at batchIdx "+r+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+i)});return s.t$z(r.map(function(t){return t.toFloat()})).as4D(n.batchSize,t,t,3)})},t}();function J(t){return l(this,void 0,void 0,function(){var e,n,r;return h(this,function(i){switch(i.label){case 0:if(t instanceof Y)return[2,t];if(!(e=Array.isArray(t)?t:[t]).length)throw Error("toNetInput - empty array passed as input");return n=function(e){return Array.isArray(t)?" at input index "+e+":":""},(r=e.map(W)).forEach(function(t,r){if(!X(t)&&!m(t,3)&&!y(t)){if("string"==typeof e[r])throw Error("toNetInput -"+n(r)+" string passed, but could not resolve HTMLElement for element id "+e[r]);throw Error("toNetInput -"+n(r)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id")}if(y(t)){var i=t.shape[0];if(1!==i)throw Error("toNetInput -"+n(r)+" tf.Tensor4D with batchSize "+i+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(t){return X(t)&&new Promise(function(e,n){if(t instanceof B.getEnv().Canvas||Z(t))return e();function r(t){t.currentTarget&&(t.currentTarget.removeEventListener("load",r),t.currentTarget.removeEventListener("error",i),e(t))}function i(t){t.currentTarget&&(t.currentTarget.removeEventListener("load",r),t.currentTarget.removeEventListener("error",i),n(t))}t.addEventListener("load",r),t.addEventListener("error",i)})}))];case 1:return i.sent(),[2,new Y(r,Array.isArray(t))]}})})}function tt(t,e){return l(this,void 0,void 0,function(){var n,r,i,a,o,u;return h(this,function(c){switch(c.label){case 0:if(n=B.getEnv().Canvas,r=t,t instanceof n)return[3,5];return[4,J(t)];case 1:if((i=c.sent()).batchSize>1)throw Error("extractFaces - batchSize > 1 not supported");if(!((a=i.getInput(0))instanceof n))return[3,2];return o=a,[3,4];case 2:return[4,function(t,e){return l(this,void 0,void 0,function(){var e,n,r,i,a,o;return h(this,function(u){switch(u.label){case 0:return e=B.getEnv().createCanvasElement(),r=(n=t.shape.slice(+!!y(t)))[0],i=n[1],a=n[2],o=s.DZQ(function(){return t.as3D(r,i,a).toInt()}),[4,s.TaL.toPixels(o,e)];case 1:return u.sent(),o.dispose(),[2,e]}})})}(a)];case 3:o=c.sent(),c.label=4;case 4:r=o,c.label=5;case 5:return u=U(r),[2,e.map(function(t){return t instanceof E?t.forSize(r.width,r.height).box.floor():t}).map(function(t){return t.clipAtImageBorders(r.width,r.height)}).map(function(t){var e=t.x,n=t.y,r=t.width,i=t.height,a=$({width:r,height:i});return U(a).putImageData(u.getImageData(e,n,r,i),0,0),a})]}})})}function te(t,e){return l(this,void 0,void 0,function(){return h(this,function(n){if(!m(t,3)&&!y(t))throw Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(y(t)&&t.shape[0]>1)throw Error("extractFaceTensors - batchSize > 1 not supported");return[2,s.DZQ(function(){var n=t.shape.slice(+!!y(t)),r=n[0],i=n[1],a=n[2];return e.map(function(t){return t instanceof E?t.forSize(i,r).box:t}).map(function(t){return t.clipAtImageBorders(i,r)}).map(function(e){var n=e.x,o=e.y,u=e.width,c=e.height;return s.wck(t.as3D(r,i,a),[o,n,0],[c,u,a])})})]})})}function tn(t,e){var n=e+"-weights_manifest.json";if(!t)return{modelBaseUri:"",manifestUri:n};if("/"===t)return{modelBaseUri:"/",manifestUri:"/"+n};var r=t.startsWith("http://")?"http://":t.startsWith("https://")?"https://":"",i=(t=t.replace(r,"")).split("/").filter(function(t){return t}),a=t.endsWith(".json")?i[i.length-1]:n,o=r+(t.endsWith(".json")?i.slice(0,i.length-1):i).join("/");return{modelBaseUri:o=t.startsWith("/")?"/"+o:o,manifestUri:"/"===o?"/"+a:o+"/"+a}}var tr=function(){function t(t){this._name=t,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(t.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),t.prototype.getParamFromPath=function(t){var e=this.traversePropertyPath(t);return e.obj[e.objProp]},t.prototype.reassignParamFromPath=function(t,e){var n=this.traversePropertyPath(t),r=n.obj,i=n.objProp;r[i].dispose(),r[i]=e},t.prototype.getParamList=function(){var t=this;return this._paramMappings.map(function(e){var n=e.paramPath;return{path:n,tensor:t.getParamFromPath(n)}})},t.prototype.getTrainableParams=function(){return this.getParamList().filter(function(t){return t.tensor instanceof s.rTt})},t.prototype.getFrozenParams=function(){return this.getParamList().filter(function(t){return!(t.tensor instanceof s.rTt)})},t.prototype.variable=function(){var t=this;this.getFrozenParams().forEach(function(e){var n=e.path,r=e.tensor;t.reassignParamFromPath(n,r.variable())})},t.prototype.freeze=function(){var t=this;this.getTrainableParams().forEach(function(e){var n=e.path,r=e.tensor,i=s.OEK(r.dataSync());r.dispose(),t.reassignParamFromPath(n,i)})},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.getParamList().forEach(function(e){if(t&&e.tensor.isDisposed)throw Error("param tensor has already been disposed for path "+e.path);e.tensor.dispose()}),this._params=void 0},t.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(t){return Array.from(t.tensor.dataSync())}).reduce(function(t,e){return t.concat(e)}))},t.prototype.load=function(t){return l(this,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:if(t instanceof Float32Array)return this.extractWeights(t),[2];return[4,this.loadFromUri(t)];case 1:return e.sent(),[2]}})})},t.prototype.loadFromUri=function(t){return l(this,void 0,void 0,function(){var e;return h(this,function(n){switch(n.label){case 0:if(t&&"string"!=typeof t)throw Error(this._name+".loadFromUri - expected model uri");return[4,function(t,e){return l(this,void 0,void 0,function(){var n,r,i,a;return h(this,function(o){switch(o.label){case 0:return r=(n=tn(t,e)).manifestUri,i=n.modelBaseUri,[4,function(t){return l(this,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:return[4,function(t,e){return l(this,void 0,void 0,function(){var e;return h(this,function(n){switch(n.label){case 0:return[4,(0,B.getEnv().fetch)(t,void 0)];case 1:if(!((e=n.sent()).status<400))throw Error("failed to fetch: ("+e.status+") "+e.statusText+", from url: "+e.url);return[2,e]}})})}(t)];case 1:return[2,e.sent().json()]}})})}(r)];case 1:return a=o.sent(),[2,s.io.loadWeights(a,i)]}})})}(t,this.getDefaultModelName())];case 1:return e=n.sent(),this.loadFromWeightMap(e),[2]}})})},t.prototype.loadFromDisk=function(t){return l(this,void 0,void 0,function(){var e,n,r,i,a,o,u,c,p,l;return h(this,function(h){switch(h.label){case 0:if(t&&"string"!=typeof t)throw Error(this._name+".loadFromDisk - expected model file path");return e=B.getEnv().readFile,r=(n=tn(t,this.getDefaultModelName())).manifestUri,i=n.modelBaseUri,a=function(t){return Promise.all(t.map(function(t){return e(t).then(function(t){return t.buffer})}))},o=s.io.weightsLoaderFactory(a),p=(c=JSON).parse,[4,e(r)];case 1:return u=p.apply(c,[h.sent().toString()]),[4,o(u,i)];case 2:return l=h.sent(),this.loadFromWeightMap(l),[2]}})})},t.prototype.loadFromWeightMap=function(t){var e=this.extractParamsFromWeigthMap(t),n=e.paramMappings,r=e.params;this._paramMappings=n,this._params=r},t.prototype.extractWeights=function(t){var e=this.extractParams(t),n=e.paramMappings,r=e.params;this._paramMappings=n,this._params=r},t.prototype.traversePropertyPath=function(t){if(!this.params)throw Error("traversePropertyPath - model has no loaded params");var e=t.split("/").reduce(function(e,n){if(!e.nextObj.hasOwnProperty(n))throw Error("traversePropertyPath - object does not have property "+n+", for path "+t);return{obj:e.nextObj,objProp:n,nextObj:e.nextObj[n]}},{nextObj:this.params}),n=e.obj,r=e.objProp;if(!n||!r||!(n[r]instanceof s.qYS))throw Error("traversePropertyPath - parameter is not a tensor, for path "+t);return{obj:n,objProp:r}},t}();function ti(t,e,n){return s.DZQ(function(){var r=s.wdz(t,e.depthwise_filter,e.pointwise_filter,n,"same");return s.WQq(r,e.bias)})}function ta(t,e,n){return void 0===n&&(n=!1),s.DZQ(function(){var r=s.VVh(n?s.WQq(s.Xtf(t,e.conv0.filters,[2,2],"same"),e.conv0.bias):ti(t,e.conv0,[2,2])),i=ti(r,e.conv1,[1,1]),a=ti(s.VVh(s.WQq(r,i)),e.conv2,[1,1]);return s.VVh(s.WQq(r,s.WQq(i,a)))})}function to(t,e,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!0),s.DZQ(function(){var i=s.VVh(n?s.WQq(s.Xtf(t,e.conv0.filters,r?[2,2]:[1,1],"same"),e.conv0.bias):ti(t,e.conv0,r?[2,2]:[1,1])),a=ti(i,e.conv1,[1,1]),o=ti(s.VVh(s.WQq(i,a)),e.conv2,[1,1]),u=ti(s.VVh(s.WQq(i,s.WQq(a,o))),e.conv3,[1,1]);return s.VVh(s.WQq(i,s.WQq(a,s.WQq(o,u))))})}function ts(t,e,n,r){return void 0===n&&(n="same"),void 0===r&&(r=!1),s.DZQ(function(){var i=s.WQq(s.Xtf(t,e.filters,[1,1],n),e.bias);return r?s.VVh(i):i})}function tu(t,e){Object.keys(t).forEach(function(n){e.some(function(t){return t.originalPath===n})||t[n].dispose()})}function tc(t,e){return function(n,r,i,a){var o=s.g9W(t(n*r*i*i),[i,i,n,r]),u=s.tGX(t(r));return e.push({paramPath:a+"/filters"},{paramPath:a+"/bias"}),{filters:o,bias:u}}}function tp(t,e){return function(n,r,i){var a=s.KtR(t(n*r),[n,r]),o=s.tGX(t(r));return e.push({paramPath:i+"/weights"},{paramPath:i+"/bias"}),{weights:a,bias:o}}}var tl=function(t,e,n){this.depthwise_filter=t,this.pointwise_filter=e,this.bias=n};function th(t,e){return function(n,r,i){var a=s.g9W(t(9*n),[3,3,n,1]),o=s.g9W(t(n*r),[1,1,n,r]),u=s.tGX(t(r));return e.push({paramPath:i+"/depthwise_filter"},{paramPath:i+"/pointwise_filter"},{paramPath:i+"/bias"}),new tl(a,o,u)}}function tf(t){return function(e){return new tl(t(e+"/depthwise_filter",4),t(e+"/pointwise_filter",4),t(e+"/bias",1))}}function td(t,e){return function(n,r,i){var a=t[n];if(!m(a,r))throw Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+a);return e.push({originalPath:n,paramPath:i||n}),a}}function tm(t){var e=t;return{extractWeights:function(t){var n=e.slice(0,t);return e=e.slice(t),n},getRemainingWeights:function(){return e}}}function ty(t,e){var n=tc(t,e),r=th(t,e);function i(t,e,i,a){return void 0===a&&(a=!1),{conv0:a?n(t,e,3,i+"/conv0"):r(t,e,i+"/conv0"),conv1:r(e,e,i+"/conv1"),conv2:r(e,e,i+"/conv2")}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:function(t,e,n,a){void 0===a&&(a=!1);var o=i(t,e,n,a);return{conv0:o.conv0,conv1:o.conv1,conv2:o.conv2,conv3:r(e,e,n+"/conv3")}}}}function tv(t){return function(e){return{filters:t(e+"/filters",4),bias:t(e+"/bias",1)}}}function tg(t,e){var n=td(t,e),r=tv(n),i=tf(n);return{extractDenseBlock3Params:function(t,e){return void 0===e&&(e=!1),{conv0:e?r(t+"/conv0"):i(t+"/conv0"),conv1:i(t+"/conv1"),conv2:i(t+"/conv2")}},extractDenseBlock4Params:function(t,e){return void 0===e&&(e=!1),{conv0:e?r(t+"/conv0"):i(t+"/conv0"),conv1:i(t+"/conv1"),conv2:i(t+"/conv2"),conv3:i(t+"/conv3")}}}}var tb=function(t){function e(){return t.call(this,"FaceFeatureExtractor")||this}return c(e,t),e.prototype.forwardInput=function(t){var e=this.params;if(!e)throw Error("FaceFeatureExtractor - load model before inference");return s.DZQ(function(){var n=to(A(t.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(s.d_2(255)),e.dense0,!0);return n=to(n,e.dense1),n=to(n,e.dense2),n=to(n,e.dense3),n=s.$jT(n,[7,7],[2,2],"valid")})},e.prototype.forward=function(t){return l(this,void 0,void 0,function(){var e;return h(this,function(n){switch(n.label){case 0:return e=this.forwardInput,[4,J(t)];case 1:return[2,e.apply(this,[n.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},e.prototype.extractParamsFromWeigthMap=function(t){var e,n,r;return r={dense0:(n=tg(t,e=[]).extractDenseBlock4Params)("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")},tu(t,e),{params:r,paramMappings:e}},e.prototype.extractParams=function(t){return function(t){var e=[],n=tm(t),r=n.extractWeights,i=n.getRemainingWeights,a=ty(r,e).extractDenseBlock4Params,o=a(3,32,"dense0",!0),s=a(32,64,"dense1"),u=a(64,128,"dense2"),c=a(128,256,"dense3");if(0!==i().length)throw Error("weights remaing after extract: "+i().length);return{paramMappings:e,params:{dense0:o,dense1:s,dense2:u,dense3:c}}}(t)},e}(tr);function tx(t,e){return s.DZQ(function(){return s.WQq(s.NoW(t,e.weights),e.bias)})}function tw(t){var e={},n={};return Object.keys(t).forEach(function(r){(r.startsWith("fc")?n:e)[r]=t[r]}),{featureExtractorMap:e,classifierMap:n}}var t_=function(t){function e(e,n){var r=t.call(this,e)||this;return r._faceFeatureExtractor=n,r}return c(e,t),Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(t){var e=this,n=this.params;if(!n)throw Error(this._name+" - load model before inference");return s.DZQ(function(){var r=t instanceof Y?e.faceFeatureExtractor.forwardInput(t):t;return tx(r.as2D(r.shape[0],-1),n.fc)})},e.prototype.dispose=function(e){void 0===e&&(e=!0),this.faceFeatureExtractor.dispose(e),t.prototype.dispose.call(this,e)},e.prototype.loadClassifierParams=function(t){var e=this.extractClassifierParams(t),n=e.params,r=e.paramMappings;this._params=n,this._paramMappings=r},e.prototype.extractClassifierParams=function(t){return function(t,e,n){var r=[],i=tm(t),a=i.extractWeights,o=i.getRemainingWeights,s=tp(a,r)(e,n,"fc");if(0!==o().length)throw Error("weights remaing after extract: "+o().length);return{paramMappings:r,params:{fc:s}}}(t,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},e.prototype.extractParamsFromWeigthMap=function(t){var e,n,r,i=tw(t),a=i.featureExtractorMap,o=i.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(a),r={fc:{weights:(n=td(o,e=[]))("fc/weights",2),bias:n("fc/bias",1)}},tu(o,e),{params:r,paramMappings:e}},e.prototype.extractParams=function(t){var e=this.getClassifierChannelsIn(),n=this.getClassifierChannelsOut(),r=n*e+n,i=t.slice(0,t.length-r),a=t.slice(t.length-r);return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(a)},e}(tr),tS=["neutral","happy","sad","angry","fearful","disgusted","surprised"],tT=function(){function t(t){var e=this;if(7!==t.length)throw Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+t.length);tS.forEach(function(n,r){e[n]=t[r]})}return t.prototype.asSortedArray=function(){var t=this;return tS.map(function(e){return{expression:e,probability:t[e]}}).sort(function(t,e){return e.probability-t.probability})},t}(),tN=function(t){function e(e){return void 0===e&&(e=new tb),t.call(this,"FaceExpressionNet",e)||this}return c(e,t),e.prototype.forwardInput=function(t){var e=this;return s.DZQ(function(){return s.Vs9(e.runNet(t))})},e.prototype.forward=function(t){return l(this,void 0,void 0,function(){var e;return h(this,function(n){switch(n.label){case 0:return e=this.forwardInput,[4,J(t)];case 1:return[2,e.apply(this,[n.sent()])]}})})},e.prototype.predictExpressions=function(t){return l(this,void 0,void 0,function(){var e,n,r,i,a=this;return h(this,function(o){switch(o.label){case 0:return[4,J(t)];case 1:return e=o.sent(),[4,this.forwardInput(e)];case 2:return n=o.sent(),[4,Promise.all(s.K$i(n).map(function(t){return l(a,void 0,void 0,function(){var e;return h(this,function(n){switch(n.label){case 0:return[4,t.data()];case 1:return e=n.sent(),t.dispose(),[2,e]}})})}))];case 3:return r=o.sent(),n.dispose(),i=r.map(function(t){return new tT(t)}),[2,e.isBatchInput?i:i[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_expression_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e.prototype.getClassifierChannelsOut=function(){return 7},e}(t_);function tE(t,e){return Object.assign({},t,{expressions:e})}function tP(t){return R(t)&&t.landmarks instanceof D&&t.unshiftedLandmarks instanceof D&&t.alignedRect instanceof E}function tA(t,e){var n=t.detection.box,r=e.shiftBy(n.x,n.y),i=r.align(),a=t.detection.imageDims,o=new E(t.detection.score,i.rescale(a.reverse()),a);return Object.assign({},t,{landmarks:r,unshiftedLandmarks:e,alignedRect:o})}function tM(t,e,n){if(void 0===n&&(n=!1),t.beginPath(),e.slice(1).forEach(function(n,r){var i=n.x,a=n.y,o=e[r];t.moveTo(o.x,o.y),t.lineTo(i,a)}),n){var r=e[e.length-1],i=e[0];if(!r||!i)return;t.moveTo(r.x,r.y),t.lineTo(i.x,i.y)}t.stroke()}var tO=function(t){void 0===t&&(t={});var e=t.drawLines,n=t.drawPoints,r=t.lineWidth,i=t.lineColor,a=t.pointSize,o=t.pointColor;this.drawLines=void 0===e||e,this.drawPoints=void 0===n||n,this.lineWidth=r||1,this.pointSize=a||2,this.lineColor=i||"rgba(0, 255, 255, 1)",this.pointColor=o||"rgba(255, 0, 255, 1)"};function tD(t,e,n){return s.WQq(s.Xtf(t,e.filters,n,"same"),e.bias)}function tC(t,e,n){void 0===n&&(n=!0);var r=n?s.VVh(t):t;return r=ti(r,e.separable_conv0,[1,1]),r=ti(s.VVh(r),e.separable_conv1,[1,1]),r=s.jgi(r,[3,3],[2,2],"same"),r=s.WQq(r,tD(t,e.expansion_conv,[2,2]))}(function(){function t(t,e){void 0===e&&(e={}),this.faceLandmarks=t,this.options=new tO(e)}t.prototype.draw=function(t){var e=U(t),n=this.options,r=n.drawLines,i=n.drawPoints,a=n.lineWidth,o=n.lineColor,s=n.pointSize,u=n.pointColor;r&&this.faceLandmarks instanceof k&&(e.strokeStyle=o,e.lineWidth=a,tM(e,this.faceLandmarks.getJawOutline()),tM(e,this.faceLandmarks.getLeftEyeBrow()),tM(e,this.faceLandmarks.getRightEyeBrow()),tM(e,this.faceLandmarks.getNose()),tM(e,this.faceLandmarks.getLeftEye(),!0),tM(e,this.faceLandmarks.getRightEye(),!0),tM(e,this.faceLandmarks.getMouth(),!0)),i&&(e.strokeStyle=u,e.fillStyle=u,this.faceLandmarks.positions.forEach(function(t){e.beginPath(),e.arc(t.x,t.y,s,0,2*Math.PI),e.fill()}))}})();var tk=function(t){function e(e){var n=t.call(this,"TinyXception")||this;return n._numMainBlocks=e,n}return c(e,t),e.prototype.forwardInput=function(t){var e=this,n=this.params;if(!n)throw Error("TinyXception - load model before inference");return s.DZQ(function(){var r=A(t.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(s.d_2(256)),i=s.VVh(tD(r,n.entry_flow.conv_in,[2,2]));return i=tC(i,n.entry_flow.reduction_block_0,!1),i=tC(i,n.entry_flow.reduction_block_1),b(e._numMainBlocks,0,1).forEach(function(t){var e,r,a;e=i,r=n.middle_flow["main_block_"+t],a=ti(s.VVh(e),r.separable_conv0,[1,1]),a=ti(s.VVh(a),r.separable_conv1,[1,1]),a=ti(s.VVh(a),r.separable_conv2,[1,1]),i=a=s.WQq(a,e)}),i=tC(i,n.exit_flow.reduction_block),i=s.VVh(ti(i,n.exit_flow.separable_conv,[1,1]))})},e.prototype.forward=function(t){return l(this,void 0,void 0,function(){var e;return h(this,function(n){switch(n.label){case 0:return e=this.forwardInput,[4,J(t)];case 1:return[2,e.apply(this,[n.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"tiny_xception_model"},e.prototype.extractParamsFromWeigthMap=function(t){var e,n,r,i,a,o,s,u,c,p,l,h,f,d,m,y,v;return e=t,n=this._numMainBlocks,u=(s={extractConvParams:i=tv(r=td(e,o=[])),extractSeparableConvParams:a=tf(r),extractReductionBlockParams:function(t){return{separable_conv0:a(t+"/separable_conv0"),separable_conv1:a(t+"/separable_conv1"),expansion_conv:i(t+"/expansion_conv")}},extractMainBlockParams:function(t){return{separable_conv0:a(t+"/separable_conv0"),separable_conv1:a(t+"/separable_conv1"),separable_conv2:a(t+"/separable_conv2")}}}).extractConvParams,c=s.extractSeparableConvParams,p=s.extractReductionBlockParams,l=s.extractMainBlockParams,h=u("entry_flow/conv_in"),f=p("entry_flow/reduction_block_0"),d=p("entry_flow/reduction_block_1"),m={},b(n,0,1).forEach(function(t){m["main_block_"+t]=l("middle_flow/main_block_"+t)}),y=p("exit_flow/reduction_block"),v=c("exit_flow/separable_conv"),tu(e,o),{params:{entry_flow:{conv_in:h,reduction_block_0:f,reduction_block_1:d},middle_flow:m,exit_flow:{reduction_block:y,separable_conv:v}},paramMappings:o}},e.prototype.extractParams=function(t){return function(t,e){var n,r,i=[],a=tm(t),o=a.extractWeights,s=a.getRemainingWeights,u={extractConvParams:n=tc(o,i),extractSeparableConvParams:r=th(o,i),extractReductionBlockParams:function(t,e,i){return{separable_conv0:r(t,e,i+"/separable_conv0"),separable_conv1:r(e,e,i+"/separable_conv1"),expansion_conv:n(t,e,1,i+"/expansion_conv")}},extractMainBlockParams:function(t,e){return{separable_conv0:r(t,t,e+"/separable_conv0"),separable_conv1:r(t,t,e+"/separable_conv1"),separable_conv2:r(t,t,e+"/separable_conv2")}}},c=u.extractConvParams,p=u.extractSeparableConvParams,l=u.extractReductionBlockParams,h=u.extractMainBlockParams,f=c(3,32,3,"entry_flow/conv_in"),d=l(32,64,"entry_flow/reduction_block_0"),m=l(64,128,"entry_flow/reduction_block_1"),y={};b(e,0,1).forEach(function(t){y["main_block_"+t]=h(128,"middle_flow/main_block_"+t)});var v=l(128,256,"exit_flow/reduction_block"),g=p(256,512,"exit_flow/separable_conv");if(0!==s().length)throw Error("weights remaing after extract: "+s().length);return{paramMappings:i,params:{entry_flow:{conv_in:f,reduction_block_0:d,reduction_block_1:m},middle_flow:y,exit_flow:{reduction_block:v,separable_conv:g}}}}(t,this._numMainBlocks)},e}(tr);!function(t){t.FEMALE="female",t.MALE="male"}(a||(a={}));var tF=function(t){function e(e){void 0===e&&(e=new tk(2));var n=t.call(this,"AgeGenderNet")||this;return n._faceFeatureExtractor=e,n}return c(e,t),Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(t){var e=this,n=this.params;if(!n)throw Error(this._name+" - load model before inference");return s.DZQ(function(){var r=t instanceof Y?e.faceFeatureExtractor.forwardInput(t):t,i=s.$jT(r,[7,7],[2,2],"valid").as2D(r.shape[0],-1);return{age:tx(i,n.fc.age).as1D(),gender:tx(i,n.fc.gender)}})},e.prototype.forwardInput=function(t){var e=this;return s.DZQ(function(){var n=e.runNet(t),r=n.age,i=n.gender;return{age:r,gender:s.Vs9(i)}})},e.prototype.forward=function(t){return l(this,void 0,void 0,function(){var e;return h(this,function(n){switch(n.label){case 0:return e=this.forwardInput,[4,J(t)];case 1:return[2,e.apply(this,[n.sent()])]}})})},e.prototype.predictAgeAndGender=function(t){return l(this,void 0,void 0,function(){var e,n,r,i,o,u=this;return h(this,function(c){switch(c.label){case 0:return[4,J(t)];case 1:return e=c.sent(),[4,this.forwardInput(e)];case 2:return n=c.sent(),r=s.K$i(n.age),i=s.K$i(n.gender),[4,Promise.all(r.map(function(t,e){return{ageTensor:t,genderTensor:i[e]}}).map(function(t){var e=t.ageTensor,n=t.genderTensor;return l(u,void 0,void 0,function(){var t,r,i,o,s;return h(this,function(u){switch(u.label){case 0:return[4,e.data()];case 1:return t=u.sent()[0],[4,n.data()];case 2:return o=(i=(r=u.sent()[0])>.5)?a.MALE:a.FEMALE,s=i?r:1-r,e.dispose(),n.dispose(),[2,{age:t,gender:o,genderProbability:s}]}})})}))];case 3:return o=c.sent(),n.age.dispose(),n.gender.dispose(),[2,e.isBatchInput?o:o[0]]}})})},e.prototype.getDefaultModelName=function(){return"age_gender_model"},e.prototype.dispose=function(e){void 0===e&&(e=!0),this.faceFeatureExtractor.dispose(e),t.prototype.dispose.call(this,e)},e.prototype.loadClassifierParams=function(t){var e=this.extractClassifierParams(t),n=e.params,r=e.paramMappings;this._params=n,this._paramMappings=r},e.prototype.extractClassifierParams=function(t){return function(t){var e=[],n=tm(t),r=n.extractWeights,i=n.getRemainingWeights,a=tp(r,e),o=a(512,1,"fc/age"),s=a(512,2,"fc/gender");if(0!==i().length)throw Error("weights remaing after extract: "+i().length);return{paramMappings:e,params:{fc:{age:o,gender:s}}}}(t)},e.prototype.extractParamsFromWeigthMap=function(t){var e=tw(t),n=e.featureExtractorMap,r=e.classifierMap;this.faceFeatureExtractor.loadFromWeightMap(n);var i=[],a=td(r,i);function o(t){return{weights:a(t+"/weights",2),bias:a(t+"/bias",1)}}var s={fc:{age:o("fc/age"),gender:o("fc/gender")}};return tu(r,i),{params:s,paramMappings:i}},e.prototype.extractParams=function(t){var e=t.slice(0,t.length-1539),n=t.slice(t.length-1539);return this.faceFeatureExtractor.extractWeights(e),this.extractClassifierParams(n)},e}(tr),tI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.postProcess=function(t,e,n){var r=n.map(function(t){var n=t.width,r=t.height,i=e/Math.max(r,n);return{width:n*i,height:r*i}}),i=r.length;return s.DZQ(function(){var n=function(t,e){return s.t$z([s.GSj([68],t),s.GSj([68],e)],1).as2D(1,136).as1D()},a=function(t,e){var n=r[t],i=n.width,a=n.height;return e(i,a)?Math.abs(i-a)/2:0};return t.mul(s.GSj([i,136],e)).sub(s.t$z(Array.from(Array(i),function(t,e){return n(a(e,function(t,e){return t<e}),a(e,function(t,e){return e<t}))}))).div(s.t$z(Array.from(Array(i),function(t,e){return n(r[e].width,r[e].height)})))})},e.prototype.forwardInput=function(t){var e=this;return s.DZQ(function(){var n=e.runNet(t);return e.postProcess(n,t.inputSize,t.inputDimensions.map(function(t){return{height:t[0],width:t[1]}}))})},e.prototype.forward=function(t){return l(this,void 0,void 0,function(){var e;return h(this,function(n){switch(n.label){case 0:return e=this.forwardInput,[4,J(t)];case 1:return[2,e.apply(this,[n.sent()])]}})})},e.prototype.detectLandmarks=function(t){return l(this,void 0,void 0,function(){var e,n,r,i=this;return h(this,function(a){switch(a.label){case 0:return[4,J(t)];case 1:return e=a.sent(),[4,Promise.all((n=s.DZQ(function(){return s.K$i(i.forwardInput(e))})).map(function(t,n){return l(i,void 0,void 0,function(){var r,i,a,o,s;return h(this,function(u){switch(u.label){case 0:return a=(i=Array).from,[4,t.data()];case 1:return o=(r=a.apply(i,[u.sent()])).filter(function(t,e){return e%2==0}),s=r.filter(function(t,e){return e%2!=0}),[2,new k(Array(68).fill(0).map(function(t,e){return new _(o[e],s[e])}),{height:e.getInputHeight(n),width:e.getInputWidth(n)})]}})})}))];case 2:return r=a.sent(),n.forEach(function(t){return t.dispose()}),[2,e.isBatchInput?r:r[0]]}})})},e.prototype.getClassifierChannelsOut=function(){return 136},e}(t_),tV=function(t){function e(e){return void 0===e&&(e=new tb),t.call(this,"FaceLandmark68Net",e)||this}return c(e,t),e.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e}(tI),tR=function(t){function e(){return t.call(this,"TinyFaceFeatureExtractor")||this}return c(e,t),e.prototype.forwardInput=function(t){var e=this.params;if(!e)throw Error("TinyFaceFeatureExtractor - load model before inference");return s.DZQ(function(){var n=ta(A(t.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(s.d_2(255)),e.dense0,!0);return n=ta(n,e.dense1),n=ta(n,e.dense2),n=s.$jT(n,[14,14],[2,2],"valid")})},e.prototype.forward=function(t){return l(this,void 0,void 0,function(){var e;return h(this,function(n){switch(n.label){case 0:return e=this.forwardInput,[4,J(t)];case 1:return[2,e.apply(this,[n.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},e.prototype.extractParamsFromWeigthMap=function(t){var e,n,r;return r={dense0:(n=tg(t,e=[]).extractDenseBlock3Params)("dense0",!0),dense1:n("dense1"),dense2:n("dense2")},tu(t,e),{params:r,paramMappings:e}},e.prototype.extractParams=function(t){return function(t){var e=[],n=tm(t),r=n.extractWeights,i=n.getRemainingWeights,a=ty(r,e).extractDenseBlock3Params,o=a(3,32,"dense0",!0),s=a(32,64,"dense1"),u=a(64,128,"dense2");if(0!==i().length)throw Error("weights remaing after extract: "+i().length);return{paramMappings:e,params:{dense0:o,dense1:s,dense2:u}}}(t)},e}(tr),tj=function(t){function e(e){return void 0===e&&(e=new tR),t.call(this,"FaceLandmark68TinyNet",e)||this}return c(e,t),e.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},e.prototype.getClassifierChannelsIn=function(){return 128},e}(tI);function tL(t,e,n,r,i){void 0===i&&(i="same");var a,o,u=e.conv,c=u.filters,p=u.bias,l=s.Xtf(t,c,n,i);return a=l=s.WQq(l,p),o=e.scale,l=s.WQq(s.lKK(a,o.weights),o.biases),r?s.VVh(l):l}function tz(t,e){return tL(t,e,[1,1],!1)}function tB(t,e){return tL(t,e,[2,2],!0,"valid")}function tW(t,e){var n=tL(t,e.conv1,[1,1],!0);return n=tz(n,e.conv2),n=s.WQq(n,t),n=s.VVh(n)}function tU(t,e){var n=tB(t,e.conv1);n=tz(n,e.conv2);var r=s.$jT(t,2,2,"valid"),i=s.Ul9(r.shape),a=r.shape[3]!==n.shape[3];if(r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2]){var o=f(n.shape);o[1]=1;var u=s.Ul9(o),c=f((n=s.xWs([n,u],1)).shape);c[2]=1;var p=s.Ul9(c);n=s.xWs([n,p],2)}return r=a?s.xWs([r,i],3):r,n=s.WQq(r,n),n=s.VVh(n)}!function(t){c(function(){return null!==t&&t.apply(this,arguments)||this},t)}(tV);var tQ=function(t){function e(){return t.call(this,"FaceRecognitionNet")||this}return c(e,t),e.prototype.forwardInput=function(t){var e=this.params;if(!e)throw Error("FaceRecognitionNet - load model before inference");return s.DZQ(function(){var n=tB(A(t.toBatchTensor(150,!0).toFloat(),[122.782,117.001,104.298]).div(s.d_2(256)),e.conv32_down);n=tW(n=s.jgi(n,3,2,"valid"),e.conv32_1),n=tW(n,e.conv32_2),n=tU(n=tW(n,e.conv32_3),e.conv64_down),n=tW(n,e.conv64_1),n=tW(n,e.conv64_2),n=tU(n=tW(n,e.conv64_3),e.conv128_down),n=tW(n,e.conv128_1),n=tU(n=tW(n,e.conv128_2),e.conv256_down),n=tW(n,e.conv256_1);var r=(n=tU(n=tW(n,e.conv256_2),e.conv256_down_out)).mean([1,2]);return s.NoW(r,e.fc)})},e.prototype.forward=function(t){return l(this,void 0,void 0,function(){var e;return h(this,function(n){switch(n.label){case 0:return e=this.forwardInput,[4,J(t)];case 1:return[2,e.apply(this,[n.sent()])]}})})},e.prototype.computeFaceDescriptor=function(t){return l(this,void 0,void 0,function(){var e,n,r,i=this;return h(this,function(a){switch(a.label){case 0:return[4,J(t)];case 1:return e=a.sent(),[4,Promise.all((n=s.DZQ(function(){return s.K$i(i.forwardInput(e))})).map(function(t){return t.data()}))];case 2:return r=a.sent(),n.forEach(function(t){return t.dispose()}),[2,e.isBatchInput?r:r[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_recognition_model"},e.prototype.extractParamsFromWeigthMap=function(t){return function(t){var e=[],n=function(t,e){var n=td(t,e);function r(t){return{conv:{filters:n(t+"/conv/filters",4),bias:n(t+"/conv/bias",1)},scale:{weights:n(t+"/scale/weights",1),biases:n(t+"/scale/biases",1)}}}return{extractConvLayerParams:r,extractResidualLayerParams:function(t){return{conv1:r(t+"/conv1"),conv2:r(t+"/conv2")}}}}(t,e),r=n.extractConvLayerParams,i=n.extractResidualLayerParams,a=r("conv32_down"),o=i("conv32_1"),s=i("conv32_2"),u=i("conv32_3"),c=i("conv64_down"),p=i("conv64_1"),l=i("conv64_2"),h=i("conv64_3"),f=i("conv128_down"),d=i("conv128_1"),y=i("conv128_2"),v=i("conv256_down"),g=i("conv256_1"),b=i("conv256_2"),x=i("conv256_down_out"),w=t.fc;if(e.push({originalPath:"fc",paramPath:"fc"}),!m(w,2))throw Error("expected weightMap[fc] to be a Tensor2D, instead have "+w);return tu(t,e),{params:{conv32_down:a,conv32_1:o,conv32_2:s,conv32_3:u,conv64_down:c,conv64_1:p,conv64_2:l,conv64_3:h,conv128_down:f,conv128_1:d,conv128_2:y,conv256_down:v,conv256_1:g,conv256_2:b,conv256_down_out:x,fc:w},paramMappings:e}}(t)},e.prototype.extractParams=function(t){return function(t){var e=tm(t),n=e.extractWeights,r=e.getRemainingWeights,i=[],a=function(t,e){function n(n,r,i,a){var o,u,c,p,l,h;return{conv:(o=a+"/conv",u=function(e,n,r){var i=t(e),a=i.length/(n*r*r);if(a%1!=0)throw Error("depth has to be an integer: "+a+", weights.length: "+i.length+", numFilters: "+n+", filterSize: "+r);return s.DZQ(function(){return s.mgz(s.g9W(i,[n,a,r,r]),[2,3,1,0])})}(n,r,i),c=s.tGX(t(r)),e.push({paramPath:o+"/filters"},{paramPath:o+"/bias"}),{filters:u,bias:c}),scale:(p=a+"/scale",l=s.tGX(t(r)),h=s.tGX(t(r)),e.push({paramPath:p+"/weights"},{paramPath:p+"/biases"}),{weights:l,biases:h})}}return{extractConvLayerParams:n,extractResidualLayerParams:function(t,e,r,i,a){return void 0===a&&(a=!1),{conv1:n((a?.5:1)*t,e,r,i+"/conv1"),conv2:n(t,e,r,i+"/conv2")}}}}(n,i),o=a.extractConvLayerParams,u=a.extractResidualLayerParams,c=o(4704,32,7,"conv32_down"),p=u(9216,32,3,"conv32_1"),l=u(9216,32,3,"conv32_2"),h=u(9216,32,3,"conv32_3"),f=u(36864,64,3,"conv64_down",!0),d=u(36864,64,3,"conv64_1"),m=u(36864,64,3,"conv64_2"),y=u(36864,64,3,"conv64_3"),v=u(147456,128,3,"conv128_down",!0),g=u(147456,128,3,"conv128_1"),b=u(147456,128,3,"conv128_2"),x=u(589824,256,3,"conv256_down",!0),w=u(589824,256,3,"conv256_1"),_=u(589824,256,3,"conv256_2"),S=u(589824,256,3,"conv256_down_out"),T=s.DZQ(function(){return s.mgz(s.KtR(n(32768),[128,256]),[1,0])});if(i.push({paramPath:"fc"}),0!==r().length)throw Error("weights remaing after extract: "+r().length);return{params:{conv32_down:c,conv32_1:p,conv32_2:l,conv32_3:h,conv64_down:f,conv64_1:d,conv64_2:m,conv64_3:y,conv128_down:v,conv128_1:g,conv128_2:b,conv256_down:x,conv256_1:w,conv256_2:_,conv256_down_out:S,fc:T},paramMappings:i}}(t)},e}(tr);function tq(t,e,n){return Object.assign({},t,{gender:e,genderProbability:n})}var tH=function(){function t(t){var e=void 0===t?{}:t,n=e.minFaceSize,r=e.scaleFactor,i=e.maxNumScales,a=e.scoreThresholds,o=e.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=n||20,this._scaleFactor=r||.709,this._maxNumScales=i||10,this._scoreThresholds=a||[.6,.7,.7],this._scaleSteps=o,"number"!=typeof this._minFaceSize||this._minFaceSize<0)throw Error(this._name+" - expected minFaceSize to be a number > 0");if("number"!=typeof this._scaleFactor||this._scaleFactor<=0||this._scaleFactor>=1)throw Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if("number"!=typeof this._maxNumScales||this._maxNumScales<0)throw Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||3!==this._scoreThresholds.length||this._scoreThresholds.some(function(t){return"number"!=typeof t}))throw Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(t){return"number"!=typeof t})))throw Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(t.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),t}();function tZ(t,e,n){return s.DZQ(function(){var r=s.Xtf(t,e.filters,n,"same");return r=s.WQq(r,e.batch_norm_offset),s.zQh(r,0,6)})}function tG(t,e){return s.DZQ(function(){var n=t.shape[0];return{boxPredictionEncoding:s.tQQ(ts(t,e.box_encoding_predictor),[n,-1,1,4]),classPrediction:s.tQQ(ts(t,e.class_predictor),[n,-1,3])}})}var t$=function(){function t(t){var e=void 0===t?{}:t,n=e.minConfidence,r=e.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=n||.5,this._maxResults=r||100,"number"!=typeof this._minConfidence||this._minConfidence<=0||this._minConfidence>=1)throw Error(this._name+" - expected minConfidence to be a number between 0 and 1");if("number"!=typeof this._maxResults)throw Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(t.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),t}(),tK=function(t){function e(){return t.call(this,"SsdMobilenetv1")||this}return c(e,t),e.prototype.forwardInput=function(t){var e=this.params;if(!e)throw Error("SsdMobilenetv1 - load model before inference");return s.DZQ(function(){var n,r,i,a,o,u,c=t.toBatchTensor(512,!1).toFloat(),p=(n=s.jbE(s.lKK(c,s.d_2(.007843137718737125)),s.d_2(1)),r=e.mobilenetv1,s.DZQ(function(){var t=null,e=tZ(n,r.conv_0,[2,2]);if([r.conv_1,r.conv_2,r.conv_3,r.conv_4,r.conv_5,r.conv_6,r.conv_7,r.conv_8,r.conv_9,r.conv_10,r.conv_11,r.conv_12,r.conv_13].forEach(function(n,r){var i,a,o=r+1,u=[2,4,6,12].some(function(t){return t===o})?[2,2]:[1,1];i=e,a=n.depthwise_conv,e=tZ(e=s.DZQ(function(){var t=s.Gl3(i,a.filters,u,"same");return t=s.$v7(t,a.batch_norm_mean,a.batch_norm_variance,a.batch_norm_offset,a.batch_norm_scale,.0010000000474974513),s.zQh(t,0,6)}),n.pointwise_conv,[1,1]),11===o&&(t=e)}),null===t)throw Error("mobileNetV1 - output of conv layer 11 is null");return{out:e,conv11:t}})),l=(i=p.out,a=p.conv11,o=e.prediction_layer,s.DZQ(function(){var t=tZ(i,o.conv_0,[1,1]),e=tZ(t,o.conv_1,[2,2]),n=tZ(e,o.conv_2,[1,1]),r=tZ(n,o.conv_3,[2,2]),u=tZ(r,o.conv_4,[1,1]),c=tZ(u,o.conv_5,[2,2]),p=tZ(c,o.conv_6,[1,1]),l=tZ(p,o.conv_7,[2,2]),h=tG(a,o.box_predictor_0),f=tG(i,o.box_predictor_1),d=tG(e,o.box_predictor_2),m=tG(r,o.box_predictor_3),y=tG(c,o.box_predictor_4),v=tG(l,o.box_predictor_5);return{boxPredictions:s.xWs([h.boxPredictionEncoding,f.boxPredictionEncoding,d.boxPredictionEncoding,m.boxPredictionEncoding,y.boxPredictionEncoding,v.boxPredictionEncoding],1),classPredictions:s.xWs([h.classPrediction,f.classPrediction,d.classPrediction,m.classPrediction,y.classPrediction,v.classPrediction],1)}})),h=l.boxPredictions,f=l.classPredictions;return u=e.output_layer,s.DZQ(function(){var t,e,n,r,i,a,o,c,p,l,d,m,y,v=h.shape[0],g=(t=s.tQQ(s.Vsq(u.extra_dim,[v,1,1]),[-1,4]),e=s.tQQ(h,[-1,4]),o=(n=s.K$i(s.mgz(t,[1,0])),r=[s.jbE(n[2],n[0]),s.jbE(n[3],n[1])],i=[s.WQq(n[0],s.y4m(r[0],s.d_2(2))),s.WQq(n[1],s.y4m(r[1],s.d_2(2)))],a={sizes:r,centers:i}).sizes,c=a.centers,p=s.K$i(s.mgz(e,[1,0])),l=s.y4m(s.lKK(s.oNF(s.y4m(p[2],s.d_2(5))),o[0]),s.d_2(2)),d=s.WQq(s.lKK(s.y4m(p[0],s.d_2(10)),o[0]),c[0]),m=s.y4m(s.lKK(s.oNF(s.y4m(p[3],s.d_2(5))),o[1]),s.d_2(2)),y=s.WQq(s.lKK(s.y4m(p[1],s.d_2(10)),o[1]),c[1]),s.mgz(s.t$z([s.jbE(d,l),s.jbE(y,m),s.WQq(d,l),s.WQq(y,m)]),[1,0]));g=s.tQQ(g,[v,g.shape[0]/v,4]);var b=s.ry7(s.dik(f,[0,0,1],[-1,-1,-1])),x=s.dik(b,[0,0,0],[-1,-1,1]);return x=s.tQQ(x,[v,x.shape[1]]),{boxes:s.K$i(g),scores:s.K$i(x)}})})},e.prototype.forward=function(t){return l(this,void 0,void 0,function(){var e;return h(this,function(n){switch(n.label){case 0:return e=this.forwardInput,[4,J(t)];case 1:return[2,e.apply(this,[n.sent()])]}})})},e.prototype.locateFaces=function(t,e){return void 0===e&&(e={}),l(this,void 0,void 0,function(){var n,r,i,a,o,s,u,c,p,l,f,d,m,y,v,g,b,x,w,_;return h(this,function(h){switch(h.label){case 0:return r=(n=new t$(e)).maxResults,i=n.minConfidence,[4,J(t)];case 1:for(a=h.sent(),s=(o=this.forwardInput(a)).boxes,u=o.scores,c=s[0],p=u[0],l=1;l<s.length;l++)s[l].dispose(),u[l].dispose();return m=(d=Array).from,[4,p.data()];case 2:var S,T,N,P,A,M;return f=m.apply(d,[h.sent()]),S=c,T=r,N=i,P=Math.min(T,S.shape[0]),A=f.map(function(t,e){return{score:t,boxIndex:e}}).filter(function(t){return t.score>N}).sort(function(t,e){return e.score-t.score}),M=[],A.forEach(function(t){if(!(M.length>=P)){for(var e=t.score,n=M.length-1;n>=0;--n){var r=function(t,e,n){var r=t.arraySync(),i=Math.min(r[e][0],r[e][2]),a=Math.min(r[e][1],r[e][3]),o=Math.max(r[e][0],r[e][2]),s=Math.max(r[e][1],r[e][3]),u=Math.min(r[n][0],r[n][2]),c=Math.min(r[n][1],r[n][3]),p=Math.max(r[n][0],r[n][2]),l=Math.max(r[n][1],r[n][3]),h=(o-i)*(s-a),f=(p-u)*(l-c);if(h<=0||f<=0)return 0;var d=Math.max(Math.min(o,p)-Math.max(i,u),0)*Math.max(Math.min(s,l)-Math.max(a,c),0);return d/(h+f-d)}(S,t.boxIndex,M[n]);if(0!==r&&(t.score*=r<=.5,t.score<=N))break}e===t.score&&M.push(t.boxIndex)}}),y=M,v=a.getReshapedInputDimensions(0),b=(g=a.inputSize)/v.width,x=g/v.height,w=c.arraySync(),_=y.map(function(t){var e=[Math.max(0,w[t][0]),Math.min(1,w[t][2])].map(function(t){return t*x}),n=e[0],r=e[1],i=[Math.max(0,w[t][1]),Math.min(1,w[t][3])].map(function(t){return t*b}),o=i[0],s=i[1];return new E(f[t],new O(o,n,s-o,r-n),{height:a.getInputHeight(0),width:a.getInputWidth(0)})}),c.dispose(),p.dispose(),[2,_]}})})},e.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},e.prototype.extractParamsFromWeigthMap=function(t){return function(t){var e=[],n=function(t,e){var n=td(t,e);function r(t,e,r){return{filters:n(t+"/Conv2d_"+e+"_pointwise/weights",4,r+"/filters"),batch_norm_offset:n(t+"/Conv2d_"+e+"_pointwise/convolution_bn_offset",1,r+"/batch_norm_offset")}}function i(t){var e="mobilenetv1/conv_"+t,i="MobilenetV1/Conv2d_"+t+"_depthwise",a=e+"/depthwise_conv";return{depthwise_conv:{filters:n(i+"/depthwise_weights",4,a+"/filters"),batch_norm_scale:n(i+"/BatchNorm/gamma",1,a+"/batch_norm_scale"),batch_norm_offset:n(i+"/BatchNorm/beta",1,a+"/batch_norm_offset"),batch_norm_mean:n(i+"/BatchNorm/moving_mean",1,a+"/batch_norm_mean"),batch_norm_variance:n(i+"/BatchNorm/moving_variance",1,a+"/batch_norm_variance")},pointwise_conv:r("MobilenetV1",t,e+"/pointwise_conv")}}function a(t,e){return{filters:n(t+"/weights",4,e+"/filters"),bias:n(t+"/biases",1,e+"/bias")}}function o(t){return{box_encoding_predictor:a("Prediction/BoxPredictor_"+t+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+t+"/box_encoding_predictor"),class_predictor:a("Prediction/BoxPredictor_"+t+"/ClassPredictor","prediction_layer/box_predictor_"+t+"/class_predictor")}}return{extractMobilenetV1Params:function(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:i(1),conv_2:i(2),conv_3:i(3),conv_4:i(4),conv_5:i(5),conv_6:i(6),conv_7:i(7),conv_8:i(8),conv_9:i(9),conv_10:i(10),conv_11:i(11),conv_12:i(12),conv_13:i(13)}},extractPredictionLayerParams:function(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:o(0),box_predictor_1:o(1),box_predictor_2:o(2),box_predictor_3:o(3),box_predictor_4:o(4),box_predictor_5:o(5)}}}}(t,e),r=n.extractMobilenetV1Params,i=n.extractPredictionLayerParams,a=t["Output/extra_dim"];if(e.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!m(a,3))throw Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+a);var o={mobilenetv1:r(),prediction_layer:i(),output_layer:{extra_dim:a}};return tu(t,e),{params:o,paramMappings:e}}(t)},e.prototype.extractParams=function(t){return function(t){var e=[],n=tm(t),r=n.extractWeights,i=n.getRemainingWeights,a=function(t,e){function n(n,r,i,a,o){var u=s.g9W(t(n*r*i*i),[i,i,n,r]),c=s.tGX(t(r));return e.push({paramPath:a+"/filters"},{paramPath:a+"/"+(o?"batch_norm_offset":"bias")}),{filters:u,bias:c}}function r(t,e,r,i){var a=n(t,e,r,i,!0);return{filters:a.filters,batch_norm_offset:a.bias}}function i(n,i,a){var o,u,c,p,l,h;return{depthwise_conv:(o=a+"/depthwise_conv",u=s.g9W(t(9*n),[3,3,n,1]),c=s.tGX(t(n)),p=s.tGX(t(n)),l=s.tGX(t(n)),h=s.tGX(t(n)),e.push({paramPath:o+"/filters"},{paramPath:o+"/batch_norm_scale"},{paramPath:o+"/batch_norm_offset"},{paramPath:o+"/batch_norm_mean"},{paramPath:o+"/batch_norm_variance"}),{filters:u,batch_norm_scale:c,batch_norm_offset:p,batch_norm_mean:l,batch_norm_variance:h}),pointwise_conv:r(n,i,1,a+"/pointwise_conv")}}return{extractMobilenetV1Params:function(){return{conv_0:r(3,32,3,"mobilenetv1/conv_0"),conv_1:i(32,64,"mobilenetv1/conv_1"),conv_2:i(64,128,"mobilenetv1/conv_2"),conv_3:i(128,128,"mobilenetv1/conv_3"),conv_4:i(128,256,"mobilenetv1/conv_4"),conv_5:i(256,256,"mobilenetv1/conv_5"),conv_6:i(256,512,"mobilenetv1/conv_6"),conv_7:i(512,512,"mobilenetv1/conv_7"),conv_8:i(512,512,"mobilenetv1/conv_8"),conv_9:i(512,512,"mobilenetv1/conv_9"),conv_10:i(512,512,"mobilenetv1/conv_10"),conv_11:i(512,512,"mobilenetv1/conv_11"),conv_12:i(512,1024,"mobilenetv1/conv_12"),conv_13:i(1024,1024,"mobilenetv1/conv_13")}},extractPredictionLayerParams:function(){return{conv_0:r(1024,256,1,"prediction_layer/conv_0"),conv_1:r(256,512,3,"prediction_layer/conv_1"),conv_2:r(512,128,1,"prediction_layer/conv_2"),conv_3:r(128,256,3,"prediction_layer/conv_3"),conv_4:r(256,128,1,"prediction_layer/conv_4"),conv_5:r(128,256,3,"prediction_layer/conv_5"),conv_6:r(256,64,1,"prediction_layer/conv_6"),conv_7:r(64,128,3,"prediction_layer/conv_7"),box_predictor_0:{box_encoding_predictor:n(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),class_predictor:n(512,9,1,"prediction_layer/box_predictor_0/class_predictor")},box_predictor_1:{box_encoding_predictor:n(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),class_predictor:n(1024,18,1,"prediction_layer/box_predictor_1/class_predictor")},box_predictor_2:{box_encoding_predictor:n(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),class_predictor:n(512,18,1,"prediction_layer/box_predictor_2/class_predictor")},box_predictor_3:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_3/class_predictor")},box_predictor_4:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_4/class_predictor")},box_predictor_5:{box_encoding_predictor:n(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),class_predictor:n(128,18,1,"prediction_layer/box_predictor_5/class_predictor")}}}}}(r,e),o=a.extractMobilenetV1Params,u=a.extractPredictionLayerParams,c=o(),p=u(),l=s.$_$(r(20472),[1,5118,4]);if(e.push({paramPath:"output_layer/extra_dim"}),0!==i().length)throw Error("weights remaing after extract: "+i().length);return{params:{mobilenetv1:c,prediction_layer:p,output_layer:{extra_dim:l}},paramMappings:e}}(t)},e}(tr);!function(t){c(function(){return null!==t&&t.apply(this,arguments)||this},t)}(tK);var tX=[new _(.738768,.874946),new _(2.42204,2.65704),new _(4.30971,7.04493),new _(10.246,4.59428),new _(12.6868,11.8741)],tY=[new _(1.603231,2.094468),new _(6.041143,7.080126),new _(2.882459,3.518061),new _(4.266906,5.178857),new _(9.041765,10.66308)],tJ=[117.001,114.697,97.404],t0=function(t){return"number"==typeof t};function t1(t){return s.DZQ(function(){var e=s.lKK(t,s.d_2(.10000000149011612));return s.WQq(s.VVh(s.jbE(t,e)),e)})}function t2(t,e){return s.DZQ(function(){var n=s.eVF(t,[[0,0],[1,1],[1,1],[0,0]]);return n=s.Xtf(n,e.conv.filters,[1,1],"valid"),n=s.jbE(n,e.bn.sub),n=s.lKK(n,e.bn.truediv),t1(n=s.WQq(n,e.conv.bias))})}function t3(t,e){return s.DZQ(function(){var n=s.eVF(t,[[0,0],[1,1],[1,1],[0,0]]);return n=s.wdz(n,e.depthwise_filter,e.pointwise_filter,[1,1],"valid"),t1(n=s.WQq(n,e.bias))})}!function(t){t[t.XS=224]="XS",t[t.SM=320]="SM",t[t.MD=416]="MD",t[t.LG=608]="LG"}(o||(o={}));var t4=function(){function t(t){var e=void 0===t?{}:t,n=e.inputSize,r=e.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=n||416,this._scoreThreshold=r||.5,"number"!=typeof this._inputSize||this._inputSize%32!=0)throw Error(this._name+" - expected inputSize to be a number divisible by 32");if("number"!=typeof this._scoreThreshold||this._scoreThreshold<=0||this._scoreThreshold>=1)throw Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),t}(),t5=function(t){function e(e){var n=t.call(this,"TinyYolov2")||this;if(!e)throw Error("invalid config: "+e);if("boolean"!=typeof e.withSeparableConvs)throw Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!t0(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(function(t){return"string"==typeof t}))throw Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(function(t){return t||{}}).every(function(t){return t0(t.x)&&t0(t.y)}))throw Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||3!==e.meanRgb.length||!e.meanRgb.every(t0)))throw Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb));return n._config=e,n}return c(e,t),Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),e.prototype.runTinyYolov2=function(t,e){var n=t2(t,e.conv0);return n=t2(n=s.jgi(n,[2,2],[2,2],"same"),e.conv1),n=t2(n=s.jgi(n,[2,2],[2,2],"same"),e.conv2),n=t2(n=s.jgi(n,[2,2],[2,2],"same"),e.conv3),n=t2(n=s.jgi(n,[2,2],[2,2],"same"),e.conv4),n=t2(n=s.jgi(n,[2,2],[2,2],"same"),e.conv5),n=t2(n=s.jgi(n,[2,2],[1,1],"same"),e.conv6),ts(n=t2(n,e.conv7),e.conv8,"valid",!1)},e.prototype.runMobilenet=function(t,e){var n=this.config.isFirstLayerConv2d?t1(ts(t,e.conv0,"valid",!1)):t3(t,e.conv0);return n=t3(n=s.jgi(n,[2,2],[2,2],"same"),e.conv1),n=t3(n=s.jgi(n,[2,2],[2,2],"same"),e.conv2),n=t3(n=s.jgi(n,[2,2],[2,2],"same"),e.conv3),n=t3(n=s.jgi(n,[2,2],[2,2],"same"),e.conv4),n=t3(n=s.jgi(n,[2,2],[2,2],"same"),e.conv5),n=s.jgi(n,[2,2],[1,1],"same"),n=e.conv6?t3(n,e.conv6):n,ts(n=e.conv7?t3(n,e.conv7):n,e.conv8,"valid",!1)},e.prototype.forwardInput=function(t,e){var n=this,r=this.params;if(!r)throw Error("TinyYolov2 - load model before inference");return s.DZQ(function(){var i=t.toBatchTensor(e,!1).toFloat();return i=(i=n.config.meanRgb?A(i,n.config.meanRgb):i).div(s.d_2(256)),n.config.withSeparableConvs?n.runMobilenet(i,r):n.runTinyYolov2(i,r)})},e.prototype.forward=function(t,e){return l(this,void 0,void 0,function(){var n;return h(this,function(r){switch(r.label){case 0:return n=this.forwardInput,[4,J(t)];case 1:return[4,n.apply(this,[r.sent(),e])];case 2:return[2,r.sent()]}})})},e.prototype.detect=function(t,e){return void 0===e&&(e={}),l(this,void 0,void 0,function(){var n,r,i,a,o,u,c,p,l,f,d,m,y=this;return h(this,function(h){switch(h.label){case 0:return r=(n=new t4(e)).inputSize,i=n.scoreThreshold,[4,J(t)];case 1:return a=h.sent(),[4,this.forwardInput(a,r)];case 2:return o=h.sent(),u=s.DZQ(function(){return s.K$i(o)[0].expandDims()}),c={width:a.getInputWidth(0),height:a.getInputHeight(0)},[4,this.extractBoxes(u,a.getReshapedInputDimensions(0),i)];case 3:return p=h.sent(),o.dispose(),u.dispose(),l=p.map(function(t){return t.box}),f=p.map(function(t){return t.score}),d=p.map(function(t){return t.classScore}),m=p.map(function(t){return y.config.classes[t.label]}),[2,P(l.map(function(t){return t.rescale(r)}),f,this.config.iouThreshold,!0).map(function(t){return new N(f[t],d[t],m[t],l[t],c)})]}})})},e.prototype.getDefaultModelName=function(){return""},e.prototype.extractParamsFromWeigthMap=function(t){return function(t,e){var n,r=[],i=function(t,e){var n=td(t,e);function r(t){return{filters:n(t+"/filters",4),bias:n(t+"/bias",1)}}return{extractConvParams:r,extractConvWithBatchNormParams:function(t){var e;return{conv:r(t+"/conv"),bn:{sub:n((e=t+"/bn")+"/sub",1),truediv:n(e+"/truediv",1)}}},extractSeparableConvParams:tf(n)}}(t,r),a=i.extractConvParams,o=i.extractConvWithBatchNormParams,s=i.extractSeparableConvParams;if(e.withSeparableConvs){var u=e.filterSizes&&e.filterSizes.length||9;n={conv0:e.isFirstLayerConv2d?a("conv0"):s("conv0"),conv1:s("conv1"),conv2:s("conv2"),conv3:s("conv3"),conv4:s("conv4"),conv5:s("conv5"),conv6:u>7?s("conv6"):void 0,conv7:u>8?s("conv7"):void 0,conv8:a("conv8")}}else n={conv0:o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:o("conv6"),conv7:o("conv7"),conv8:a("conv8")};return tu(t,r),{params:n,paramMappings:r}}(t,this.config)},e.prototype.extractParams=function(t){var n=this.config.filterSizes||e.DEFAULT_FILTER_SIZES,r=n?n.length:void 0;if(7!==r&&8!==r&&9!==r)throw Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+r+" filterSizes in config");return function(t,e,n,r){var i,a,o=tm(t),u=o.extractWeights,c=o.getRemainingWeights,p=[],l={extractConvParams:i=tc(u,p),extractConvWithBatchNormParams:function(t,e,n){var r,a,o;return{conv:i(t,e,3,n+"/conv"),bn:(r=n+"/bn",a=s.tGX(u(e)),o=s.tGX(u(e)),p.push({paramPath:r+"/sub"},{paramPath:r+"/truediv"}),{sub:a,truediv:o})}},extractSeparableConvParams:th(u,p)},h=l.extractConvParams,f=l.extractConvWithBatchNormParams,d=l.extractSeparableConvParams;if(e.withSeparableConvs){var m=r[0],y=r[1],v=r[2],g=r[3],b=r[4],x=r[5],w=r[6],_=r[7],S=r[8],T=e.isFirstLayerConv2d?h(m,y,3,"conv0"):d(m,y,"conv0"),N=d(y,v,"conv1"),E=d(v,g,"conv2"),P=d(g,b,"conv3"),A=d(b,x,"conv4"),M=d(x,w,"conv5"),O=_?d(w,_,"conv6"):void 0,D=S?d(_,S,"conv7"):void 0,C=h(S||_||w,5*n,1,"conv8");a={conv0:T,conv1:N,conv2:E,conv3:P,conv4:A,conv5:M,conv6:O,conv7:D,conv8:C}}else{var m=r[0],y=r[1],v=r[2],g=r[3],b=r[4],x=r[5],w=r[6],_=r[7],S=r[8],T=f(m,y,"conv0"),N=f(y,v,"conv1"),E=f(v,g,"conv2"),P=f(g,b,"conv3"),A=f(b,x,"conv4"),M=f(x,w,"conv5"),O=f(w,_,"conv6"),D=f(_,S,"conv7"),C=h(S,5*n,1,"conv8");a={conv0:T,conv1:N,conv2:E,conv3:P,conv4:A,conv5:M,conv6:O,conv7:D,conv8:C}}if(0!==c().length)throw Error("weights remaing after extract: "+c().length);return{params:a,paramMappings:p}}(t,this.config,this.boxEncodingSize,n)},e.prototype.extractBoxes=function(t,e,n){return l(this,void 0,void 0,function(){var r,i,a,o,u,c,l,f,d,m,y,v,g,b,x,w,_,S,N,E,P,A,O,D,C,k,F,I,V,R=this;return h(this,function(h){switch(h.label){case 0:return o=(a=Math.max(r=e.width,i=e.height))/r,u=a/i,c=t.shape[1],l=this.config.anchors.length,d=(f=s.DZQ(function(){var e=t.reshape([c,c,l,R.boxEncodingSize]);return[e.slice([0,0,0,0],[c,c,l,4]),e.slice([0,0,0,4],[c,c,l,1]),R.withClassScores?s.Vs9(e.slice([0,0,0,5],[c,c,l,R.config.classes.length]),3):s.d_2(0)]}))[0],m=f[1],y=f[2],v=[],[4,m.array()];case 1:return g=h.sent(),[4,d.array()];case 2:b=h.sent(),x=0,h.label=3;case 3:if(!(x<c))return[3,12];w=0,h.label=4;case 4:if(!(w<c))return[3,11];_=0,h.label=5;case 5:if(!(_<l))return[3,10];if(S=M(g[x][w][_][0]),!(!n||S>n))return[3,9];if(N=(w+M(b[x][w][_][0]))/c*o,E=(x+M(b[x][w][_][1]))/c*u,P=Math.exp(b[x][w][_][2])*this.config.anchors[_].x/c*o,A=Math.exp(b[x][w][_][3])*this.config.anchors[_].y/c*u,O=N-P/2,D=E-A/2,C={row:x,col:w,anchor:_},!this.withClassScores)return[3,7];return[4,this.extractPredictedClass(y,C)];case 6:return V=h.sent(),[3,8];case 7:V={classScore:1,label:0},h.label=8;case 8:F=(k=V).classScore,I=k.label,v.push(p({box:new T(O,D,O+P,D+A),score:S,classScore:S*F,label:I},C)),h.label=9;case 9:return _++,[3,5];case 10:return w++,[3,4];case 11:return x++,[3,3];case 12:return d.dispose(),m.dispose(),y.dispose(),[2,v]}})})},e.prototype.extractPredictedClass=function(t,e){return l(this,void 0,void 0,function(){var n,r,i,a;return h(this,function(o){switch(o.label){case 0:return n=e.row,r=e.col,i=e.anchor,[4,t.array()];case 1:return a=o.sent(),[2,Array(this.config.classes.length).fill(0).map(function(t,e){return a[n][r][i][e]}).map(function(t,e){return{classScore:t,label:e}}).reduce(function(t,e){return t.classScore>e.classScore?t:e})]}})})},e.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],e}(tr),t6=function(t){function e(e){void 0===e&&(e=!0);var n=this,r=Object.assign({},{withSeparableConvs:e,iouThreshold:.4,classes:["face"]},e?{anchors:tY,meanRgb:tJ}:{anchors:tX,withClassScores:!0});return t.call(this,r)||this}return c(e,t),Object.defineProperty(e.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(t,e){return l(this,void 0,void 0,function(){return h(this,function(n){switch(n.label){case 0:return[4,this.detect(t,e)];case 1:return[2,n.sent().map(function(t){return new E(t.score,t.relativeBox,{width:t.imageWidth,height:t.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return this.withSeparableConvs?"tiny_yolov2_separable_conv_model":"tiny_yolov2_model"},e.prototype.extractParamsFromWeigthMap=function(e){return t.prototype.extractParamsFromWeigthMap.call(this,e)},e}(t5),t8=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._name="TinyFaceDetectorOptions",e}return c(e,t),e}(t4),t7=function(){function t(){}return t.prototype.then=function(t){return l(this,void 0,void 0,function(){var e;return h(this,function(n){switch(n.label){case 0:return e=t,[4,this.run()];case 1:return[2,e.apply(void 0,[n.sent()])]}})})},t.prototype.run=function(){return l(this,void 0,void 0,function(){return h(this,function(t){throw Error("ComposableTask - run is not implemented")})})},t}();function t9(t,e){return Object.assign({},t,{descriptor:e})}function et(t,e,n,r,i){return void 0===i&&(i=function(t){return t.alignedRect}),l(this,void 0,void 0,function(){var a,o,u,c,p;return h(this,function(l){switch(l.label){case 0:if(a=t.map(function(t){return tP(t)?i(t):t.detection}),u=r)return[3,5];if(!(e instanceof s.qYS))return[3,2];return[4,te(e,a)];case 1:return c=l.sent(),[3,4];case 2:return[4,tt(e,a)];case 3:c=l.sent(),l.label=4;case 4:u=c,l.label=5;case 5:return[4,n(o=u)];case 6:return p=l.sent(),o.forEach(function(t){return t instanceof s.qYS&&t.dispose()}),[2,p]}})})}function ee(t,e,n,r,i){return l(this,void 0,void 0,function(){var a=this;return h(this,function(o){return[2,et([t],e,function(t){return l(a,void 0,void 0,function(){return h(this,function(e){return[2,n(t[0])]})})},r,i)]})})}function en(t,e){return{height:Math.floor(e[0]*t),width:Math.floor(e[1]*t)}}var er=function(t){function e(e,n,r,i){return t.call(this,{left:e,top:n,right:r,bottom:i},!0)||this}return c(e,t),e}(S);function ei(t){return s.DZQ(function(){return s.lKK(s.jbE(t,s.d_2(127.5)),s.d_2(.0078125))})}function ea(t,e){return s.DZQ(function(){return s.WQq(s.VVh(t),s.lKK(e,s.HZy(s.VVh(s.HZy(t)))))})}function eo(t,e,n){return void 0===n&&(n=!1),s.DZQ(function(){var r=ts(t,e.conv1,"valid");return r=ea(r,e.prelu1_alpha),r=ea(r=ts(r=s.jgi(r,n?[2,2]:[3,3],[2,2],"same"),e.conv2,"valid"),e.prelu2_alpha),r=ea(r=ts(r=n?r:s.jgi(r,[3,3],[2,2],"valid"),e.conv3,"valid"),e.prelu3_alpha)})}function es(t,e,n){var r=n.width,i=n.height;return l(this,void 0,void 0,function(){var n,a,o,u=this;return h(this,function(c){switch(c.label){case 0:return n=U(t),[4,Promise.all(e.map(function(e){return l(u,void 0,void 0,function(){var r,i,a,o,s,u,c,p;return h(this,function(l){return i=(r=e.padAtBorders(t.height,t.width)).y,a=r.ey,o=r.x,s=r.ex,u=o-1,c=i-1,p=n.getImageData(u,c,s-u,a-c),[2,B.isNodejs()?K(p):createImageBitmap(p)]})})}))];case 1:return a=c.sent(),o=[],a.forEach(function(t){var e=U($({width:r,height:i}));e.drawImage(t,0,0,r,i);for(var n=e.getImageData(0,0,r,i).data,a=[],s=0;s<n.length;s+=4)a.push(n[s+2]),a.push(n[s+1]),a.push(n[s]);o.push(a)}),[2,o.map(function(t){return s.DZQ(function(){return ei(s.mgz(s.g9W(t,[1,r,i,3]),[0,2,1,3]).toFloat())})})]}})})}var eu=function(t){function e(){return t.call(this,"Mtcnn")||this}return c(e,t),e.prototype.load=function(e){return l(this,void 0,void 0,function(){return h(this,function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,t.prototype.load.call(this,e)]})})},e.prototype.loadFromDisk=function(e){return l(this,void 0,void 0,function(){return h(this,function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,t.prototype.loadFromDisk.call(this,e)]})})},e.prototype.forwardInput=function(t,e){return void 0===e&&(e={}),l(this,void 0,void 0,function(){var n,r,i,a,o,u,c,p,f,d,m,y,v,g,b,x,w,S,N,A;return h(this,function(M){switch(M.label){case 0:if(!(n=this.params))throw Error("Mtcnn - load model before inference");if(!(r=t.canvases[0]))throw Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return i={},a=Date.now(),o=s.DZQ(function(){var t;return t=s.UG6(s.TaL.fromPixels(r)).toFloat(),s.DZQ(function(){return s.t$z(s.K$i(t,3).reverse(),3)})}),u=function(t){return o.dispose(),i.total=Date.now()-a,t},p=(c=o.shape.slice(1))[0],f=c[1],m=(d=new tH(e)).minFaceSize,y=d.scaleFactor,v=d.maxNumScales,g=d.scoreThresholds,b=(d.scaleSteps||function(t,e,n){for(var r=n[0],i=n[1],a=12/t,o=[],s=Math.min(r,i)*a,u=0;s>=12;)o.push(a*Math.pow(e,u)),s*=e,u+=1;return o}(m,y,[p,f])).filter(function(t){var e=en(t,[p,f]);return Math.min(e.width,e.height)>12}).slice(0,v),i.scales=b,i.pyramid=b.map(function(t){return en(t,[p,f])}),x=Date.now(),[4,function(t,e,n,r,i){i.stage1=[];var a=e.map(function(e){return s.DZQ(function(){var n={scale:e},i=s.DZQ(function(){var n=en(e,t.shape.slice(1)),r=n.height,i=n.width,a=ei(s.Slp.resizeBilinear(t,[r,i]));return s.mgz(a,[0,2,1,3])}),a=Date.now(),o=s.DZQ(function(){var t=eo(i,r,!0),e=ts(t,r.conv4_1,"valid"),n=s.UG6(s.T9B(e,3),3);return{prob:s.Vs9(s.jbE(e,n),3),regions:ts(t,r.conv4_2,"valid")}}),u=o.prob,c=o.regions;return n.pnet=Date.now()-a,{scoresTensor:s.K$i(s.K$i(u,3)[1])[0],regionsTensor:s.K$i(c)[0],scale:e,statsForScale:n}})}).map(function(t){var e=t.scoresTensor,r=t.regionsTensor,a=t.scale,o=t.statsForScale,s=function(t,e,n,r){for(var i=[],a=t.arraySync(),o=0;o<t.shape[0];o++)for(var s=0;s<t.shape[1];s++)a[o][s]>=r&&i.push(new _(s,o));return i.map(function(t){var r=new T(Math.round((2*t.y+1)/n),Math.round((2*t.x+1)/n),Math.round((2*t.y+12)/n),Math.round((2*t.x+12)/n)),i=a[t.y][t.x],o=e.arraySync();return{cell:r,score:i,region:new er(o[t.y][t.x][0],o[t.y][t.x][1],o[t.y][t.x][2],o[t.y][t.x][3])}})}(e,r,a,n);if(e.dispose(),r.dispose(),!s.length)return i.stage1.push(o),[];var u=Date.now(),c=P(s.map(function(t){return t.cell}),s.map(function(t){return t.score}),.5);return o.nms=Date.now()-u,o.numBoxes=c.length,i.stage1.push(o),c.map(function(t){return s[t]})}).reduce(function(t,e){return t.concat(e)},[]),o=[],u=[];if(a.length>0){var c=Date.now(),p=P(a.map(function(t){return t.cell}),a.map(function(t){return t.score}),.7);i.stage1_nms=Date.now()-c,u=p.map(function(t){return a[t].score}),o=p.map(function(t){return a[t]}).map(function(t){var e=t.cell,n=t.region;return new T(e.left+n.left*e.width,e.top+n.top*e.height,e.right+n.right*e.width,e.bottom+n.bottom*e.height).toSquare().round()})}return{boxes:o,scores:u}}(o,b,g[0],n.pnet,i)];case 1:if(w=M.sent(),i.total_stage1=Date.now()-x,!w.boxes.length)return[2,u({results:[],stats:i})];return i.stage2_numInputBoxes=w.boxes.length,x=Date.now(),[4,function(t,e,n,r,i){return l(this,void 0,void 0,function(){var a,o,u,c,p,l,f,d,m,y,v,g,b,x;return h(this,function(h){switch(h.label){case 0:return a=Date.now(),[4,es(t,e,{width:24,height:24})];case 1:return o=h.sent(),i.stage2_extractImagePatches=Date.now()-a,a=Date.now(),u=o.map(function(t){var e=s.DZQ(function(){var e=eo(t,r),n=ea(tx(s.tQQ(e,[e.shape[0],r.fc1.weights.shape[0]]),r.fc1),r.prelu4_alpha),i=tx(n,r.fc2_1),a=s.UG6(s.T9B(i,1),1),o=s.Vs9(s.jbE(i,a),1),u=tx(n,r.fc2_2);return{scores:s.K$i(o,1)[1],regions:u}});return t.dispose(),e}),i.stage2_rnet=Date.now()-a,c=u.length>1?s.xWs(u.map(function(t){return t.scores})):u[0].scores,f=(l=Array).from,[4,c.data()];case 2:return p=f.apply(l,[h.sent()]),c.dispose(),m=(d=p.map(function(t,e){return{score:t,idx:e}}).filter(function(t){return t.score>n}).map(function(t){return t.idx})).map(function(t){return e[t]}),y=d.map(function(t){return p[t]}),v=[],g=[],m.length>0&&(a=Date.now(),b=P(m,y,.7),i.stage2_nms=Date.now()-a,x=b.map(function(t){var e=u[d[t]].regions.arraySync();return new er(e[0][0],e[0][1],e[0][2],e[0][3])}),g=b.map(function(t){return y[t]}),v=b.map(function(t,e){return m[t].calibrate(x[e])})),u.forEach(function(t){t.regions.dispose(),t.scores.dispose()}),[2,{boxes:v,scores:g}]}})})}(r,w.boxes,g[1],n.rnet,i)];case 2:if(S=M.sent(),i.total_stage2=Date.now()-x,!S.boxes.length)return[2,u({results:[],stats:i})];return i.stage3_numInputBoxes=S.boxes.length,x=Date.now(),[4,function(t,e,n,r,i){return l(this,void 0,void 0,function(){var a,o,u,c,p,l,f,d,m,y,v,g,b,x,w;return h(this,function(h){switch(h.label){case 0:return a=Date.now(),[4,es(t,e,{width:48,height:48})];case 1:return o=h.sent(),i.stage3_extractImagePatches=Date.now()-a,a=Date.now(),u=o.map(function(t){var e=s.DZQ(function(){var e=eo(t,r);e=ea(e=ts(e=s.jgi(e,[2,2],[2,2],"same"),r.conv4,"valid"),r.prelu4_alpha);var n=ea(tx(s.tQQ(e,[e.shape[0],r.fc1.weights.shape[0]]),r.fc1),r.prelu5_alpha),i=tx(n,r.fc2_1),a=s.UG6(s.T9B(i,1),1),o=s.Vs9(s.jbE(i,a),1),u=tx(n,r.fc2_2),c=tx(n,r.fc2_3);return{scores:s.K$i(o,1)[1],regions:u,points:c}});return t.dispose(),e}),i.stage3_onet=Date.now()-a,c=u.length>1?s.xWs(u.map(function(t){return t.scores})):u[0].scores,f=(l=Array).from,[4,c.data()];case 2:return p=f.apply(l,[h.sent()]),c.dispose(),m=(d=p.map(function(t,e){return{score:t,idx:e}}).filter(function(t){return t.score>n}).map(function(t){return t.idx})).map(function(t){var e=u[t].regions.arraySync();return new er(e[0][0],e[0][1],e[0][2],e[0][3])}),y=d.map(function(t,n){return e[t].calibrate(m[n])}),v=d.map(function(t){return p[t]}),g=[],b=[],x=[],y.length>0&&(a=Date.now(),w=P(y,v,.7,!1),i.stage3_nms=Date.now()-a,g=w.map(function(t){return y[t]}),b=w.map(function(t){return v[t]}),x=w.map(function(t,e){return[,,,,,].fill(0).map(function(n,r){var i=u[t].points.arraySync();return new _(i[0][r]*(g[e].width+1)+g[e].left,i[0][r+5]*(g[e].height+1)+g[e].top)})})),u.forEach(function(t){t.regions.dispose(),t.scores.dispose(),t.points.dispose()}),[2,{boxes:g,scores:b,points:x}]}})})}(r,S.boxes,g[2],n.onet,i)];case 3:return N=M.sent(),i.total_stage3=Date.now()-x,A=N.boxes.map(function(t,e){return tA(j({},new E(N.scores[e],new O(t.left/f,t.top/p,t.width/f,t.height/p),{height:p,width:f})),new C(N.points[e].map(function(e){return e.sub(new _(t.left,t.top)).div(new _(t.width,t.height))}),{width:t.width,height:t.height}))}),[2,u({results:A,stats:i})]}})})},e.prototype.forward=function(t,e){return void 0===e&&(e={}),l(this,void 0,void 0,function(){var n;return h(this,function(r){switch(r.label){case 0:return n=this.forwardInput,[4,J(t)];case 1:return[4,n.apply(this,[r.sent(),e])];case 2:return[2,r.sent().results]}})})},e.prototype.forwardWithStats=function(t,e){return void 0===e&&(e={}),l(this,void 0,void 0,function(){var n;return h(this,function(r){switch(r.label){case 0:return n=this.forwardInput,[4,J(t)];case 1:return[2,n.apply(this,[r.sent(),e])]}})})},e.prototype.getDefaultModelName=function(){return"mtcnn_model"},e.prototype.extractParamsFromWeigthMap=function(t){var e,n,r,i,a,o,s,u;return r=(n=function(t,e){var n=td(t,e);function r(t){return{filters:n(t+"/weights",4,t+"/filters"),bias:n(t+"/bias",1)}}function i(t){return{weights:n(t+"/weights",2),bias:n(t+"/bias",1)}}function a(t){return{conv1:r(t+"/conv1"),prelu1_alpha:n(t+"/prelu1_alpha",1),conv2:r(t+"/conv2"),prelu2_alpha:n(t+"/prelu2_alpha",1),conv3:r(t+"/conv3"),prelu3_alpha:n(t+"/prelu3_alpha",1)}}return{extractPNetParams:function(){var t=a("pnet"),e=r("pnet/conv4_1"),n=r("pnet/conv4_2");return p(p({},t),{conv4_1:e,conv4_2:n})},extractRNetParams:function(){var t=a("rnet"),e=i("rnet/fc1"),r=n("rnet/prelu4_alpha",1),o=i("rnet/fc2_1"),s=i("rnet/fc2_2");return p(p({},t),{fc1:e,prelu4_alpha:r,fc2_1:o,fc2_2:s})},extractONetParams:function(){var t=a("onet"),e=r("onet/conv4"),o=n("onet/prelu4_alpha",1),s=i("onet/fc1"),u=n("onet/prelu5_alpha",1),c=i("onet/fc2_1"),l=i("onet/fc2_2"),h=i("onet/fc2_3");return p(p({},t),{conv4:e,prelu4_alpha:o,fc1:s,prelu5_alpha:u,fc2_1:c,fc2_2:l,fc2_3:h})}}}(t,e=[])).extractPNetParams,i=n.extractRNetParams,a=n.extractONetParams,o=r(),s=i(),u=a(),tu(t,e),{params:{pnet:o,rnet:s,onet:u},paramMappings:e}},e.prototype.extractParams=function(t){return function(t){var e=tm(t),n=e.extractWeights,r=e.getRemainingWeights,i=[],a=function(t,e){var n=tc(t,e),r=tp(t,e);function i(n,r){var i=s.tGX(t(n));return e.push({paramPath:r}),i}function a(t,e,r){return void 0===r&&(r=!1),{conv1:n(t[0],t[1],3,e+"/conv1"),prelu1_alpha:i(t[1],e+"/prelu1_alpha"),conv2:n(t[1],t[2],3,e+"/conv2"),prelu2_alpha:i(t[2],e+"/prelu2_alpha"),conv3:n(t[2],t[3],r?2:3,e+"/conv3"),prelu3_alpha:i(t[3],e+"/prelu3_alpha")}}return{extractPNetParams:function(){var t=a([3,10,16,32],"pnet"),e=n(32,2,1,"pnet/conv4_1"),r=n(32,4,1,"pnet/conv4_2");return p(p({},t),{conv4_1:e,conv4_2:r})},extractRNetParams:function(){var t=a([3,28,48,64],"rnet",!0),e=r(576,128,"rnet/fc1"),n=i(128,"rnet/prelu4_alpha"),o=r(128,2,"rnet/fc2_1"),s=r(128,4,"rnet/fc2_2");return p(p({},t),{fc1:e,prelu4_alpha:n,fc2_1:o,fc2_2:s})},extractONetParams:function(){var t=a([3,32,64,64],"onet"),e=n(64,128,2,"onet/conv4"),o=i(128,"onet/prelu4_alpha"),s=r(1152,256,"onet/fc1"),u=i(256,"onet/prelu5_alpha"),c=r(256,2,"onet/fc2_1"),l=r(256,4,"onet/fc2_2"),h=r(256,10,"onet/fc2_3");return p(p({},t),{conv4:e,prelu4_alpha:o,fc1:s,prelu5_alpha:u,fc2_1:c,fc2_2:l,fc2_3:h})}}}(n,i),o=a.extractPNetParams,u=a.extractRNetParams,c=a.extractONetParams,l=o(),h=u(),f=c();if(0!==r().length)throw Error("weights remaing after extract: "+r().length);return{params:{pnet:l,rnet:h,onet:f},paramMappings:i}}(t)},e}(tr),ec=[new _(1.603231,2.094468),new _(6.041143,7.080126),new _(2.882459,3.518061),new _(4.266906,5.178857),new _(9.041765,10.66308)],ep=[117.001,114.697,97.404],el=function(t){function e(){var e=this;return t.call(this,{withSeparableConvs:!0,iouThreshold:.4,classes:["face"],anchors:ec,meanRgb:ep,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]})||this}return c(e,t),Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(t,e){return l(this,void 0,void 0,function(){return h(this,function(n){switch(n.label){case 0:return[4,this.detect(t,e)];case 1:return[2,n.sent().map(function(t){return new E(t.score,t.relativeBox,{width:t.imageWidth,height:t.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},e.prototype.extractParamsFromWeigthMap=function(e){return t.prototype.extractParamsFromWeigthMap.call(this,e)},e}(t5),eh={ssdMobilenetv1:new tK,tinyFaceDetector:new el,tinyYolov2:new t6,mtcnn:new eu,faceLandmark68Net:new tV,faceLandmark68TinyNet:new tj,faceRecognitionNet:new tQ,faceExpressionNet:new tN,ageGenderNet:new tF};function ef(t,e){return Object.assign({},t,{age:e})}var ed=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parentTask=e,i.input=n,i.extractedFaces=r,i}return c(e,t),e}(t7),em=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.run=function(){return l(this,void 0,void 0,function(){var t,e,n=this;return h(this,function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,et(t=r.sent(),this.input,function(t){return l(n,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:return[4,Promise.all(t.map(function(t){return eh.faceExpressionNet.predictExpressions(t)}))];case 1:return[2,e.sent()]}})})},this.extractedFaces)];case 2:return e=r.sent(),[2,t.map(function(t,n){return tE(t,e[n])})]}})})},e.prototype.withAgeAndGender=function(){return new ex(this,this.input)},e}(ed),ey=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.run=function(){return l(this,void 0,void 0,function(){var t,e;return h(this,function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:if(!(t=n.sent()))return[2];return[4,ee(t,this.input,function(t){return eh.faceExpressionNet.predictExpressions(t)},this.extractedFaces)];case 2:return e=n.sent(),[2,tE(t,e)]}})})},e.prototype.withAgeAndGender=function(){return new ew(this,this.input)},e}(ed),ev=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.withAgeAndGender=function(){return new e_(this,this.input)},e.prototype.withFaceDescriptors=function(){return new eN(this,this.input)},e}(em),eg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.withAgeAndGender=function(){return new eS(this,this.input)},e.prototype.withFaceDescriptor=function(){return new eE(this,this.input)},e}(ey),eb=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parentTask=e,i.input=n,i.extractedFaces=r,i}return c(e,t),e}(t7),ex=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.run=function(){return l(this,void 0,void 0,function(){var t,e,n=this;return h(this,function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,et(t=r.sent(),this.input,function(t){return l(n,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:return[4,Promise.all(t.map(function(t){return eh.ageGenderNet.predictAgeAndGender(t)}))];case 1:return[2,e.sent()]}})})},this.extractedFaces)];case 2:return e=r.sent(),[2,t.map(function(t,n){var r=e[n],i=r.age;return ef(tq(t,r.gender,r.genderProbability),i)})]}})})},e.prototype.withFaceExpressions=function(){return new em(this,this.input)},e}(eb),ew=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.run=function(){return l(this,void 0,void 0,function(){var t,e,n,r,i;return h(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:if(!(t=a.sent()))return[2];return[4,ee(t,this.input,function(t){return eh.ageGenderNet.predictAgeAndGender(t)},this.extractedFaces)];case 2:return n=(e=a.sent()).age,r=e.gender,i=e.genderProbability,[2,ef(tq(t,r,i),n)]}})})},e.prototype.withFaceExpressions=function(){return new ey(this,this.input)},e}(eb),e_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.withFaceExpressions=function(){return new ev(this,this.input)},e.prototype.withFaceDescriptors=function(){return new eN(this,this.input)},e}(ex),eS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.withFaceExpressions=function(){return new eg(this,this.input)},e.prototype.withFaceDescriptor=function(){return new eE(this,this.input)},e}(ew),eT=function(t){function e(e,n){var r=t.call(this)||this;return r.parentTask=e,r.input=n,r}return c(e,t),e}(t7),eN=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.run=function(){return l(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,this.parentTask];case 1:return[4,et(t=e.sent(),this.input,function(t){return Promise.all(t.map(function(t){return eh.faceRecognitionNet.computeFaceDescriptor(t)}))},null,function(t){return t.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return[2,e.sent().map(function(e,n){return t9(t[n],e)})]}})})},e.prototype.withFaceExpressions=function(){return new ev(this,this.input)},e.prototype.withAgeAndGender=function(){return new e_(this,this.input)},e}(eT),eE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.run=function(){return l(this,void 0,void 0,function(){var t,e;return h(this,function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:if(!(t=n.sent()))return[2];return[4,ee(t,this.input,function(t){return eh.faceRecognitionNet.computeFaceDescriptor(t)},null,function(t){return t.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return e=n.sent(),[2,t9(t,e)]}})})},e.prototype.withFaceExpressions=function(){return new eg(this,this.input)},e.prototype.withAgeAndGender=function(){return new eS(this,this.input)},e}(eT),eP=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parentTask=e,i.input=n,i.useTinyLandmarkNet=r,i}return c(e,t),Object.defineProperty(e.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?eh.faceLandmark68TinyNet:eh.faceLandmark68Net},enumerable:!0,configurable:!0}),e}(t7),eA=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.run=function(){return l(this,void 0,void 0,function(){var t,e,n,r,i,a=this;return h(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:if(e=(t=o.sent()).map(function(t){return t.detection}),!(this.input instanceof s.qYS))return[3,3];return[4,te(this.input,e)];case 2:return r=o.sent(),[3,5];case 3:return[4,tt(this.input,e)];case 4:r=o.sent(),o.label=5;case 5:return[4,Promise.all((n=r).map(function(t){return a.landmarkNet.detectLandmarks(t)}))];case 6:return i=o.sent(),n.forEach(function(t){return t instanceof s.qYS&&t.dispose()}),[2,t.map(function(t,e){return tA(t,i[e])})]}})})},e.prototype.withFaceExpressions=function(){return new ev(this,this.input)},e.prototype.withAgeAndGender=function(){return new e_(this,this.input)},e.prototype.withFaceDescriptors=function(){return new eN(this,this.input)},e}(eP),eM=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.run=function(){return l(this,void 0,void 0,function(){var t,e,n,r,i;return h(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:if(!(t=a.sent()))return[2];if(e=t.detection,!(this.input instanceof s.qYS))return[3,3];return[4,te(this.input,[e])];case 2:return r=a.sent(),[3,5];case 3:return[4,tt(this.input,[e])];case 4:r=a.sent(),a.label=5;case 5:return n=r,[4,this.landmarkNet.detectLandmarks(n[0])];case 6:return i=a.sent(),n.forEach(function(t){return t instanceof s.qYS&&t.dispose()}),[2,tA(t,i)]}})})},e.prototype.withFaceExpressions=function(){return new eg(this,this.input)},e.prototype.withAgeAndGender=function(){return new eS(this,this.input)},e.prototype.withFaceDescriptor=function(){return new eE(this,this.input)},e}(eP),eO=function(t){function e(e,n){void 0===n&&(n=new t$);var r=t.call(this)||this;return r.input=e,r.options=n,r}return c(e,t),e}(t7),eD=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.run=function(){return l(this,void 0,void 0,function(){var t,e,n,r;return h(this,function(i){switch(i.label){case 0:if(t=this,e=t.input,!((n=t.options)instanceof tH))return[3,2];return[4,eh.mtcnn.forward(e,n)];case 1:return[2,i.sent().map(function(t){return t.detection})];case 2:if(!(r=n instanceof t8?function(t){return eh.tinyFaceDetector.locateFaces(t,n)}:n instanceof t$?function(t){return eh.ssdMobilenetv1.locateFaces(t,n)}:n instanceof t4?function(t){return eh.tinyYolov2.locateFaces(t,n)}:null))throw Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,r(e)]}})})},e.prototype.runAndExtendWithFaceDetections=function(){var t=this;return new Promise(function(e){return l(t,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,this.run()];case 1:return[2,e(t.sent().map(function(t){return j({},t)}))]}})})})},e.prototype.withFaceLandmarks=function(t){return void 0===t&&(t=!1),new eA(this.runAndExtendWithFaceDetections(),this.input,t)},e.prototype.withFaceExpressions=function(){return new em(this.runAndExtendWithFaceDetections(),this.input)},e.prototype.withAgeAndGender=function(){return new ex(this.runAndExtendWithFaceDetections(),this.input)},e}(eO);function eC(t,e){return void 0===e&&(e=new t$),new eD(t,e)}!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}c(e,t),e.prototype.run=function(){return l(this,void 0,void 0,function(){var t,e;return h(this,function(n){switch(n.label){case 0:return[4,new eD(this.input,this.options)];case 1:return e=(t=n.sent())[0],t.forEach(function(t){t.score>e.score&&(e=t)}),[2,e]}})})},e.prototype.runAndExtendWithFaceDetection=function(){var t=this;return new Promise(function(e){return l(t,void 0,void 0,function(){var t;return h(this,function(n){switch(n.label){case 0:return[4,this.run()];case 1:return[2,e((t=n.sent())?j({},t):void 0)]}})})})},e.prototype.withFaceLandmarks=function(t){return void 0===t&&(t=!1),new eM(this.runAndExtendWithFaceDetection(),this.input,t)},e.prototype.withFaceExpressions=function(){return new ey(this.runAndExtendWithFaceDetection(),this.input)},e.prototype.withAgeAndGender=function(){return new ew(this.runAndExtendWithFaceDetection(),this.input)}}(eO),!function(){function t(t,e){void 0===e&&(e=.6),this._distanceThreshold=e;var n=Array.isArray(t)?t:[t];if(!n.length)throw Error("FaceRecognizer.constructor - expected atleast one input");var r=1,i=function(){return"person "+r++};this._labeledDescriptors=n.map(function(t){if(t instanceof V)return t;if(t instanceof Float32Array)return new V(i(),[t]);if(t.descriptor&&t.descriptor instanceof Float32Array)return new V(i(),[t.descriptor]);throw Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}Object.defineProperty(t.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),t.prototype.computeMeanDistance=function(t,e){return e.map(function(e){if(e.length!==t.length)throw Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(e),r=Array.from(t);return Math.sqrt(n.map(function(t,e){return t-r[e]}).reduce(function(t,e){return t+Math.pow(e,2)},0))}).reduce(function(t,e){return t+e},0)/(e.length||1)},t.prototype.matchDescriptor=function(t){var e=this;return this.labeledDescriptors.map(function(n){var r=n.descriptors;return new F(n.label,e.computeMeanDistance(t,r))}).reduce(function(t,e){return t.distance<e.distance?t:e})},t.prototype.findBestMatch=function(t){var e=this.matchDescriptor(t);return e.distance<this.distanceThreshold?e:new F("unknown",e.distance)},t.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(t){return t.toJSON()})}},t.fromJSON=function(e){return new t(e.labeledDescriptors.map(function(t){return V.fromJSON(t)}),e.distanceThreshold)}}()},760:(t,e,n)=>{"use strict";n.d(e,{N:()=>v});var r=n(5155),i=n(2115),a=n(869),o=n(2885),s=n(7494),u=n(845),c=n(1508);class p extends i.Component{getSnapshotBeforeUpdate(t){let e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){let t=e.offsetParent,n=t instanceof HTMLElement&&t.offsetWidth||0,r=this.props.sizeRef.current;r.height=e.offsetHeight||0,r.width=e.offsetWidth||0,r.top=e.offsetTop,r.left=e.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function l(t){let{children:e,isPresent:n,anchorX:a}=t,o=(0,i.useId)(),s=(0,i.useRef)(null),u=(0,i.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=(0,i.useContext)(c.Q);return(0,i.useInsertionEffect)(()=>{let{width:t,height:e,top:r,left:i,right:c}=u.current;if(n||!s.current||!t||!e)return;s.current.dataset.motionPopId=o;let p=document.createElement("style");return l&&(p.nonce=l),document.head.appendChild(p),p.sheet&&p.sheet.insertRule('\n          [data-motion-pop-id="'.concat(o,'"] {\n            position: absolute !important;\n            width: ').concat(t,"px !important;\n            height: ").concat(e,"px !important;\n            ").concat("left"===a?"left: ".concat(i):"right: ".concat(c),"px !important;\n            top: ").concat(r,"px !important;\n          }\n        ")),()=>{document.head.contains(p)&&document.head.removeChild(p)}},[n]),(0,r.jsx)(p,{isPresent:n,childRef:s,sizeRef:u,children:i.cloneElement(e,{ref:s})})}let h=t=>{let{children:e,initial:n,isPresent:a,onExitComplete:s,custom:c,presenceAffectsLayout:p,mode:h,anchorX:d}=t,m=(0,o.M)(f),y=(0,i.useId)(),v=!0,g=(0,i.useMemo)(()=>(v=!1,{id:y,initial:n,isPresent:a,custom:c,onExitComplete:t=>{for(let e of(m.set(t,!0),m.values()))if(!e)return;s&&s()},register:t=>(m.set(t,!1),()=>m.delete(t))}),[a,m,s]);return p&&v&&(g={...g}),(0,i.useMemo)(()=>{m.forEach((t,e)=>m.set(e,!1))},[a]),i.useEffect(()=>{a||m.size||!s||s()},[a]),"popLayout"===h&&(e=(0,r.jsx)(l,{isPresent:a,anchorX:d,children:e})),(0,r.jsx)(u.t.Provider,{value:g,children:e})};function f(){return new Map}var d=n(2082);let m=t=>t.key||"";function y(t){let e=[];return i.Children.forEach(t,t=>{(0,i.isValidElement)(t)&&e.push(t)}),e}let v=t=>{let{children:e,custom:n,initial:u=!0,onExitComplete:c,presenceAffectsLayout:p=!0,mode:l="sync",propagate:f=!1,anchorX:v="left"}=t,[g,b]=(0,d.xQ)(f),x=(0,i.useMemo)(()=>y(e),[e]),w=f&&!g?[]:x.map(m),_=(0,i.useRef)(!0),S=(0,i.useRef)(x),T=(0,o.M)(()=>new Map),[N,E]=(0,i.useState)(x),[P,A]=(0,i.useState)(x);(0,s.E)(()=>{_.current=!1,S.current=x;for(let t=0;t<P.length;t++){let e=m(P[t]);w.includes(e)?T.delete(e):!0!==T.get(e)&&T.set(e,!1)}},[P,w.length,w.join("-")]);let M=[];if(x!==N){let t=[...x];for(let e=0;e<P.length;e++){let n=P[e],r=m(n);w.includes(r)||(t.splice(e,0,n),M.push(n))}return"wait"===l&&M.length&&(t=M),A(y(t)),E(x),null}let{forceRender:O}=(0,i.useContext)(a.L);return(0,r.jsx)(r.Fragment,{children:P.map(t=>{let e=m(t),i=(!f||!!g)&&(x===P||w.includes(e));return(0,r.jsx)(h,{isPresent:i,initial:(!_.current||!!u)&&void 0,custom:n,presenceAffectsLayout:p,mode:l,onExitComplete:i?void 0:()=>{if(!T.has(e))return;T.set(e,!0);let t=!0;T.forEach(e=>{e||(t=!1)}),t&&(null==O||O(),A(S.current),f&&(null==b||b()),c&&c())},anchorX:v,children:t},e)})})}},845:(t,e,n)=>{"use strict";n.d(e,{t:()=>r});let r=(0,n(2115).createContext)(null)},869:(t,e,n)=>{"use strict";n.d(e,{L:()=>r});let r=(0,n(2115).createContext)({})},1508:(t,e,n)=>{"use strict";n.d(e,{Q:()=>r});let r=(0,n(2115).createContext)({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"})},2082:(t,e,n)=>{"use strict";n.d(e,{xQ:()=>a});var r=n(2115),i=n(845);function a(t=!0){let e=(0,r.useContext)(i.t);if(null===e)return[!0,null];let{isPresent:n,onExitComplete:o,register:s}=e,u=(0,r.useId)();(0,r.useEffect)(()=>{if(t)return s(u)},[t]);let c=(0,r.useCallback)(()=>t&&o&&o(u),[u,o,t]);return!n&&o?[!1,c]:[!0]}},2885:(t,e,n)=>{"use strict";n.d(e,{M:()=>i});var r=n(2115);function i(t){let e=(0,r.useRef)(null);return null===e.current&&(e.current=t()),e.current}},3429:function(t,e,n){var r;r=n(2115),t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e||4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,(function(e){return t[e]}).bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(t,e,n){"use strict";n.r(e);var r,i=n("react"),a=(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},s=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)0>e.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function u(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}"undefined"!=typeof window&&(void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(t){var e=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return e?new Promise(function(n,r){e.call(navigator,t,n,r)}):Promise.reject(Error("getUserMedia is not implemented in this browser"))})),e.default=function(t){function e(e){var n=t.call(this,e)||this;return n.canvas=null,n.ctx=null,n.requestUserMediaId=0,n.unmounted=!1,n.state={hasUserMedia:!1},n}return a(e,t),e.prototype.componentDidMount=function(){var t=this.state,e=this.props;if(this.unmounted=!1,!u())return void e.onUserMediaError("getUserMedia not supported");t.hasUserMedia||this.requestUserMedia(),e.children&&"function"!=typeof e.children&&console.warn("children must be a function")},e.prototype.componentDidUpdate=function(t){var e=this.props;if(!u())return void e.onUserMediaError("getUserMedia not supported");var n=JSON.stringify(t.audioConstraints)!==JSON.stringify(e.audioConstraints),r=JSON.stringify(t.videoConstraints)!==JSON.stringify(e.videoConstraints),i=t.minScreenshotWidth!==e.minScreenshotWidth,a=t.minScreenshotHeight!==e.minScreenshotHeight;(r||i||a)&&(this.canvas=null,this.ctx=null),(n||r)&&(this.stopAndCleanup(),this.requestUserMedia())},e.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},e.stopMediaStream=function(t){t&&(t.getVideoTracks&&t.getAudioTracks?(t.getVideoTracks().map(function(e){t.removeTrack(e),e.stop()}),t.getAudioTracks().map(function(e){t.removeTrack(e),e.stop()})):t.stop())},e.prototype.stopAndCleanup=function(){var t=this.state;t.hasUserMedia&&(e.stopMediaStream(this.stream),t.src&&window.URL.revokeObjectURL(t.src))},e.prototype.getScreenshot=function(t){var e=this.state,n=this.props;if(!e.hasUserMedia)return null;var r=this.getCanvas(t);return r&&r.toDataURL(n.screenshotFormat,n.screenshotQuality)},e.prototype.getCanvas=function(t){var e=this.state,n=this.props;if(!this.video||!e.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var r=this.video.videoWidth,i=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var a=r/i;i=(r=n.minScreenshotWidth||this.video.clientWidth)/a,n.minScreenshotHeight&&i<n.minScreenshotHeight&&(r=(i=n.minScreenshotHeight)*a)}this.canvas=document.createElement("canvas"),this.canvas.width=(null==t?void 0:t.width)||r,this.canvas.height=(null==t?void 0:t.height)||i,this.ctx=this.canvas.getContext("2d")}var o=this.ctx,s=this.canvas;return o&&s&&(s.width=(null==t?void 0:t.width)||s.width,s.height=(null==t?void 0:t.height)||s.height,n.mirrored&&(o.translate(s.width,0),o.scale(-1,1)),o.imageSmoothingEnabled=n.imageSmoothing,o.drawImage(this.video,0,0,(null==t?void 0:t.width)||s.width,(null==t?void 0:t.height)||s.height),n.mirrored&&(o.scale(-1,1),o.translate(-s.width,0))),s},e.prototype.requestUserMedia=function(){var t=this,n=this.props,r=function(r,i){var a={video:void 0===i||i};n.audio&&(a.audio=void 0===r||r),t.requestUserMediaId++;var o=t.requestUserMediaId;navigator.mediaDevices.getUserMedia(a).then(function(n){t.unmounted||o!==t.requestUserMediaId?e.stopMediaStream(n):t.handleUserMedia(null,n)}).catch(function(e){t.handleUserMedia(e)})};if("mediaDevices"in navigator)r(n.audioConstraints,n.videoConstraints);else{var i=function(t){return{optional:[{sourceId:t}]}},a=function(t){var e=t.deviceId;return"string"==typeof e?e:Array.isArray(e)&&e.length>0?e[0]:"object"==typeof e&&e.ideal?e.ideal:null};MediaStreamTrack.getSources(function(t){var e=null,o=null;t.forEach(function(t){"audio"===t.kind?e=t.id:"video"===t.kind&&(o=t.id)});var s=a(n.audioConstraints);s&&(e=s);var u=a(n.videoConstraints);u&&(o=u),r(i(e),i(o))})}},e.prototype.handleUserMedia=function(t,e){var n=this.props;if(t||!e){this.setState({hasUserMedia:!1}),n.onUserMediaError(t);return}this.stream=e;try{this.video&&(this.video.srcObject=e),this.setState({hasUserMedia:!0})}catch(t){this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(e)})}n.onUserMedia(e)},e.prototype.render=function(){var t=this,e=this.state,n=this.props,r=n.audio,a=(n.forceScreenshotSourceSize,n.disablePictureInPicture),u=(n.onUserMedia,n.onUserMediaError,n.screenshotFormat,n.screenshotQuality,n.minScreenshotWidth,n.minScreenshotHeight,n.audioConstraints,n.videoConstraints,n.imageSmoothing,n.mirrored),c=n.style,p=void 0===c?{}:c,l=n.children,h=s(n,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),f=u?o(o({},p),{transform:(p.transform||"")+" scaleX(-1)"}):p,d={getScreenshot:this.getScreenshot.bind(this)};return i.createElement(i.Fragment,null,i.createElement("video",o({autoPlay:!0,disablePictureInPicture:a,src:e.src,muted:!r,playsInline:!0,ref:function(e){t.video=e},style:f},h)),l&&l(d))},e.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},e}(i.Component)},react:function(t,e){t.exports=r}}).default},4257:(t,e,n)=>{"use strict";n.d(e,{TaL:()=>a.TaL,ASo:()=>a.ASo,O0W:()=>o.O0,d_2:()=>a.d_2,jh6:()=>a.jh6});var r,i,a=n(2598),o=n(260),s=n(9641).Buffer,u=function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function c(t,e,n,r){return new(n||(n=Promise))(function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(o,s)}u((r=r.apply(t,e||[])).next())})}function p(t,e){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){var u=[a,s];if(n)throw TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}!function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"}(r||(r={})),function(t){var e;(e=t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(i||(i={}));var l={};function h(t,e,n,r){var i=e.inputParams[t];if(i&&void 0!==i.inputIndexStart){var a=i.inputIndexStart,o=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?a+1:i.inputIndexEnd;if("tensor"===i.type)return f(e.inputNames[i.inputIndexStart],n,r);if("tensors"===i.type)return e.inputNames.slice(a,o).map(function(t){return f(t,n,r)});var s=Array.prototype.slice.call(f(e.inputNames.slice(a)[0],n,r).dataSync());return"number"===i.type?s[0]:s}var u=e.attrParams[t];return u&&u.value}function f(t,e,n){var r=y(t),i=r[0],a=r[1],o=n.currentContextIds.find(function(t){return!!e[m(i,t)]});return void 0!==o?e[m(i,o)][a]:void 0}function d(t,e){var n=y(t),r=n[0],i=n[1];return[m(r,e&&e.currentContextId),i]}function m(t,e){return e?t+"-"+e:t}function y(t){var e=t.lastIndexOf(":");return -1===e?[t,0]:[t.substring(0,e),Number(t.substring(e+1))]}function v(t,e){for(var n=[],r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n}var g=Object.freeze({json:[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),b=Object.freeze({json:[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"clip_value_min",name:"clipValueMin",type:"number"},{tfName:"clip_value_max",name:"clipValueMax",type:"number"}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"clipValueMin",name:"clipValueMin",type:"number",defaultValue:0},{tfName:"clipValueMax",name:"clipValueMax",type:"number",defaultValue:6}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),x=Object.freeze({json:[{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"}]}]}),w=Object.freeze({json:[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]}]}),_=Object.freeze({json:[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}]}),S=Object.freeze({json:[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),T=Object.freeze({json:[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]}]}),N=Object.freeze({json:[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}]}),E=Object.freeze({json:[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}]}),P=Object.freeze({json:[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),A=Object.freeze({json:[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),M=Object.freeze({json:[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}]}),O=Object.freeze({json:[{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]}]}),D=Object.freeze({json:[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool",notSupported:!0}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}]}),C=Object.freeze({json:[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}]}),k=Object.freeze({json:[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]}]}),F=function(){function t(){var t=[].concat.apply([],[g,b,x,w,_,S,T,P,E,N,A,M,O,D,C,k].map(function(t){return t.json}));this.opMappers=t.reduce(function(t,e){return t[e.tfOpName]=e,t},{})}return Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!0,configurable:!0}),t.prototype.transformGraph=function(t,e){var n=this;void 0===e&&(e={});var r=[],i=[],a=t.node.reduce(function(t,e){return t[e.name]=n.mapNode(e),e.op.startsWith("Placeholder")&&r.push(t[e.name]),"Const"===e.op&&i.push(t[e.name]),t},{}),o=[],s=[],u={},c={};null!=e&&(u=this.mapSignatureEntries(e.inputs),c=this.mapSignatureEntries(e.outputs));var p=Object.keys(a);return p.forEach(function(t){var e=a[t];e.inputNames.forEach(function(t){var n=d(t)[0];e.inputs.push(a[n]),a[n].children.push(e)})}),0===Object.keys(c).length?p.forEach(function(t){var e=a[t];0===e.children.length&&s.push(e)}):Object.keys(c).forEach(function(t){var e=a[d(t)[0]];null!=e&&(e.signatureKey=c[t],s.push(e))}),Object.keys(u).length>0?Object.keys(u).forEach(function(t){var e=a[d(t)[0]];e&&(e.signatureKey=u[t],o.push(e))}):o=r,{nodes:a,inputs:o,outputs:s,weights:i,placeholders:r,signature:e}},t.prototype.mapSignatureEntries=function(t){return Object.keys(t||{}).reduce(function(e,n){return e[t[n].name]=n,e},{})},t.prototype.mapNode=function(t){var e=l[t.op]||this.opMappers[t.op]||{};null==t.attr&&(t.attr={});var n={name:t.name,op:t.op,category:e.category,inputNames:(t.input||[]).map(function(t){return t.startsWith("^")?t.substr(1):t}),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:t.attr};return null!=e.inputs&&(n.inputParams=e.inputs.reduce(function(t,e){return t[e.name]={type:e.type,inputIndexStart:e.start,inputIndexEnd:e.end},t},{})),null!=e.attrs&&(n.attrParams=e.attrs.reduce(function(e,n){var r=n.type,i=void 0;switch(n.type){case"string":void 0===(i=V(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=V(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(i=q(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=q(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(i=j(t.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(i=j(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(i=Q(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=Q(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(i=R(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=R(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(i=Z(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=Z(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(i=U(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=U(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(i=H(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=H(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(i=z(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=z(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(i=B(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=B(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw Error("Unsupported param type: "+n.type+" for op: "+t.op)}return e[n.name]={value:i,type:r},e},{})),n},t}();function I(t,e){var n=Array.isArray(t)?String.fromCharCode.apply(null,t):function(t){var e=(0,a._K2)().global;if(void 0!==e.atob)return e.atob(t);if(void 0!==s)return new s(t,"base64").toString();throw Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(t);return e?n:n.toLowerCase()}function V(t,e,n,r){void 0===r&&(r=!1);var i=t[e];return null!=i?I(i.s,r):n}function R(t,e,n){var r=t[e];return r?r.b:n}function j(t,e,n){var r=t[e]||{},i=null!=r.i?r.i:null!=r.f?r.f:n;return"number"==typeof i?i:parseInt(i,10)}function L(t){switch("string"==typeof t&&(t=r[t]),t){case r.DT_FLOAT:return"float32";case r.DT_INT32:case r.DT_INT64:case r.DT_INT8:case r.DT_UINT8:return"int32";case r.DT_BOOL:return"bool";case r.DT_DOUBLE:return"float32";case r.DT_STRING:return"string";default:return null}}function z(t,e,n){var r=t[e];return r&&r.type?L(r.type):n}function B(t,e,n){var r=t[e];return r&&r.list&&r.list.type?r.list.type.map(function(t){return L(t)}):n}function W(t){if(!t.unknownRank)return null!=t.dim?t.dim.map(function(t){return"number"==typeof t.size?t.size:parseInt(t.size,10)}):[]}function U(t,e,n){var r=t[e];return r&&r.shape?W(r.shape):n}function Q(t,e,n){var r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(function(t){return"number"==typeof t?t:parseInt(t,10)}):n}function q(t,e,n,r){void 0===r&&(r=!1);var i=t[e];return i&&i.list&&i.list.s?i.list.s.map(function(t){return I(t,r)}):n}function H(t,e,n){var r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(function(t){return W(t)}):n}function Z(t,e,n){var r=t[e];return r&&r.list&&r.list.b?r.list.b:n}var G=function(){function t(t,e,n){var r=this;this.node=t,this.tensorMap=e,this.context=n,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map(function(t){return r.getInput(t)}),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce(function(t,e){return t[e]=r.getAttr(e),t},{}))}return t.prototype.getInput=function(t){return f(t,this.tensorMap,this.context)},t.prototype.getAttr=function(t,e){var n=this.node.rawAttrs[t];if(null!=n.tensor)return f(t,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return j(this.node.rawAttrs,t,e);if(null!=n.s)return V(this.node.rawAttrs,t,e);if(null!=n.b)return R(this.node.rawAttrs,t,e);if(null!=n.shape)return U(this.node.rawAttrs,t,e);if(null!=n.type)return z(this.node.rawAttrs,t,e);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return Q(this.node.rawAttrs,t,e);if(null!=n.list.s)return q(this.node.rawAttrs,t,e);if(null!=n.list.shape)return H(this.node.rawAttrs,t,e);if(null!=n.list.b)return Z(this.node.rawAttrs,t,e);if(null!=n.list.type)return B(this.node.rawAttrs,t,e)}return e},t}(),$=function(t,e,n){switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[(0,a.WQq)(h("a",t,e,n),h("b",t,e,n))];case"AddN":return[(0,a.QiD)(h("tensors",t,e,n))];case"FloorMod":case"Mod":return[(0,a.ziu)(h("a",t,e,n),h("b",t,e,n))];case"Mul":return[(0,a.lKK)(h("a",t,e,n),h("b",t,e,n))];case"RealDiv":case"Div":return[(0,a.y4m)(h("a",t,e,n),h("b",t,e,n))];case"DivNoNan":return[(0,a.ek5)(h("a",t,e,n),h("b",t,e,n))];case"FloorDiv":return[(0,a.wh_)(h("a",t,e,n),h("b",t,e,n))];case"Sub":return[(0,a.jbE)(h("a",t,e,n),h("b",t,e,n))];case"Minimum":return[(0,a.BpO)(h("a",t,e,n),h("b",t,e,n))];case"Maximum":return[(0,a.PhQ)(h("a",t,e,n),h("b",t,e,n))];case"Pow":return[(0,a.n7C)(h("a",t,e,n),h("b",t,e,n))];case"SquaredDifference":return[(0,a.Pbu)(h("a",t,e,n),h("b",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},K=function(t,e,n){switch(t.op){case"Abs":case"ComplexAbs":return[(0,a.tnl)(h("x",t,e,n))];case"Acos":return[(0,a.HQu)(h("x",t,e,n))];case"Acosh":return[(0,a.FqL)(h("x",t,e,n))];case"Asin":return[(0,a.qRo)(h("x",t,e,n))];case"Asinh":return[(0,a.yHs)(h("x",t,e,n))];case"Atan":return[(0,a.rYl)(h("x",t,e,n))];case"Atan2":return[(0,a.FPz)(h("x",t,e,n),h("y",t,e,n))];case"Atanh":return[(0,a.rfv)(h("x",t,e,n))];case"Ceil":return[(0,a.mkO)(h("x",t,e,n))];case"Complex":return[(0,a.faB)(h("real",t,e,n),h("imag",t,e,n))];case"Cos":return[(0,a.gnS)(h("x",t,e,n))];case"Cosh":return[(0,a.yIG)(h("x",t,e,n))];case"Elu":return[(0,a.Pqc)(h("x",t,e,n))];case"Erf":return[(0,a.Y12)(h("x",t,e,n))];case"Exp":return[(0,a.oNF)(h("x",t,e,n))];case"Expm1":return[(0,a.IYd)(h("x",t,e,n))];case"Floor":return[(0,a.RIf)(h("x",t,e,n))];case"Log":return[(0,a.Rm2)(h("x",t,e,n))];case"Log1p":return[(0,a.Kko)(h("x",t,e,n))];case"Imag":return[(0,a.ngS)(h("x",t,e,n))];case"Neg":return[(0,a.HZy)(h("x",t,e,n))];case"Reciprocal":return[(0,a.VOZ)(h("x",t,e,n))];case"Real":return[(0,a.xav)(h("x",t,e,n))];case"Relu":return[(0,a.VVh)(h("x",t,e,n))];case"Round":return[(0,a.LIG)(h("x",t,e,n))];case"Selu":return[(0,a.WfX)(h("x",t,e,n))];case"Sigmoid":return[(0,a.ry7)(h("x",t,e,n))];case"Sin":return[(0,a.F8e)(h("x",t,e,n))];case"Sign":return[(0,a._SZ)(h("x",t,e,n))];case"Sinh":return[(0,a.L0l)(h("x",t,e,n))];case"Softplus":return[(0,a.lw0)(h("x",t,e,n))];case"Sqrt":return[(0,a.RZD)(h("x",t,e,n))];case"Square":return[(0,a.EwI)(h("x",t,e,n))];case"Tanh":return[(0,a.ymU)(h("x",t,e,n))];case"Tan":return[(0,a.Mlm)(h("x",t,e,n))];case"Relu6":case"ClipByValue":return[(0,a.zQh)(h("x",t,e,n),h("clipValueMin",t,e,n),h("clipValueMax",t,e,n))];case"Rsqrt":return[(0,a.Z$r)(f(t.inputNames[0],e,n))];case"Prod":return[(0,a._eU)(h("x",t,e,n),h("axes",t,e,n))];case"LeakyRelu":return[(0,a.H8d)(h("x",t,e,n),h("alpha",t,e,n))];case"Prelu":return[(0,a.NsG)(h("x",t,e,n),h("alpha",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},X=function(){function t(e,n,r,i,a,o,s){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=i,this.identicalElementShapes=a,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.id=t.nextId++}return Object.defineProperty(t.prototype,"closed",{get:function(){return this.closed_},enumerable:!0,configurable:!0}),t.prototype.clearAndClose=function(){this.tensors.forEach(function(t){return t.tensor.dispose()}),this.tensors=[],this.closed_=!0},t.prototype.size=function(){return this.tensors.length},t.prototype.read=function(t){if(this.closed_)throw Error("TensorArray "+this.name+" has already been closed.");if(t<0||t>=this.tensors.length)throw Error("Tried to read from index "+t+", but array size is: "+this.tensors.length);var e=this.tensors[t];if(e.cleared)throw Error("TensorArray "+this.name+": Could not read index "+t+" twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(e.cleared=!0),e.read=!0,e.tensor},t.prototype.readMany=function(t){var e=this;return t.map(function(t){return e.read(t)})},t.prototype.write=function(t,e){if(this.closed_)throw Error("TensorArray "+this.name+" has already been closed.");if(t<0||!this.dynamicSize&&t>=this.maxSize)throw Error("Tried to write to index "+t+", but array is not resizeable and size is: "+this.maxSize);var n=this.tensors[t]||{};if(e.dtype!==this.dtype)throw Error("TensorArray "+this.name+": Could not write to TensorArray index "+t+",\n          because the value dtype is "+e.dtype+", but TensorArray dtype is "+this.dtype+".");if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=e.shape),this.assertShapesMatchAllowUndefinedSize(this.elementShape,e.shape,"TensorArray "+this.name+": Could not write to TensorArray index "+t+"."),n&&n.read)throw Error("TensorArray "+this.name+": Could not write to TensorArray index "+t+", because it has already been read.");if(n&&n.written)throw Error("TensorArray "+this.name+": Could not write to TensorArray index "+t+", because it has already been written.");n.tensor=e,n.written=!0,this.tensors[t]=n},t.prototype.writeMany=function(t,e){var n=this;if(t.length!==e.length)throw Error("TensorArray "+this.name+": could not write multiple tensors,because the index size: "+t.length+" is not the same as tensors size: "+e.length+".");t.forEach(function(t,r){return n.write(t,e[r])})},t.prototype.gather=function(t,e){if(e&&e!==this.dtype)throw Error("TensorArray dtype is "+this.dtype+" but gather requested dtype "+e);if(!t){t=[];for(var n=0;n<this.size();n++)t.push(n)}if(0===t.length)return(0,a.OEK)([],[0].concat(this.elementShape));var r=this.readMany(t);return this.assertShapesMatchAllowUndefinedSize(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),(0,a.t$z)(r,0)},t.prototype.concat=function(t){if(t&&t!==this.dtype)throw Error("TensorArray dtype is "+this.dtype+" but concat requested dtype "+t);if(0===this.size())return(0,a.OEK)([],[0].concat(this.elementShape));for(var e=[],n=0;n<this.size();n++)e.push(n);var r=this.readMany(e);return this.assertShapesMatchAllowUndefinedSize(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape ("+this.elementShape+") vs first tensor shape ("+r[0].shape+")"),(0,a.xWs)(r,0)},t.prototype.scatter=function(t,e){if(e.dtype!==this.dtype)throw Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+e.dtype);if(t.length!==e.shape[0])throw Error("Expected len(indices) == tensor.shape[0], but saw: "+t.length+" vs. "+e.shape[0]);var n=Math.max.apply(Math,t);if(!this.dynamicSize&&n>=this.maxSize)throw Error("Max index must be < array size ("+n+"  vs. "+this.maxSize+")");this.writeMany(t,(0,a.K$i)(e,0))},t.prototype.split=function(t,e){var n=this;if(e.dtype!==this.dtype)throw Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+e.dtype);var r=0,i=t.map(function(t){return r+=t});if(r!==e.shape[0])throw Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        "+r+", and tensor's shape is: "+e.shape);if(!this.dynamicSize&&t.length!==this.maxSize)throw Error("TensorArray's size is not equal to the size of lengths ("+this.maxSize+" vs. "+t.length+"), and the TensorArray is not marked as dynamically resizeable");var o=0===r?0:e.size/r,s=[];(0,a.DZQ)(function(){e=e.reshape([1,r,o]);for(var u=0;u<t.length;++u){var c=[0,0===u?0:i[u-1],0],p=[1,t[u],o];s[u]=(0,a.dik)(e,c,p).reshape(n.elementShape)}return s});for(var u=[],c=0;c<t.length;c++)u[c]=c;this.writeMany(u,s)},t.prototype.assertShapesMatchAllowUndefinedSize=function(t,e,n){void 0===n&&(n=""),a.ZSL.assert(this.shapesEqualAllowUndefinedSize(t,e),function(){return n+" Shapes "+t+" and "+e+" must match"})},t.prototype.shapesEqualAllowUndefinedSize=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(-1!==t[n]&&-1!==e[n]&&t[n]!==e[n])return!1;return!0},t.nextId=0,t}(),Y=void 0,J=function(t,e,n){switch(t.op){case"Conv1D":var r=h("stride",t,e,n),i=h("pad",t,e,n),o=h("dataFormat",t,e,n).toUpperCase(),s=h("dilation",t,e,n);return[(0,a.kA9)(h("x",t,e,n),h("filter",t,e,n),r,i,o,s)];case"Conv2D":r=h("strides",t,e,n),i=h("pad",t,e,n),o=h("dataFormat",t,e,n).toUpperCase();var u=h("dilations",t,e,n);return[(0,a.Xtf)(h("x",t,e,n),h("filter",t,e,n),[r[1],r[2]],i,o,[u[1],u[2]])];case"_FusedConv2D":case"FusedDepthwiseConv2dNative":var c=h("fusedOps",t,e,n),p=c[0],l=c[1],f="prelu"===l,d=h("numArgs",t,e,n);if("biasadd"===p){if(f&&2!==d)throw Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!f&&1!==d)throw Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if("fusedbatchnorm"===p)throw Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported.");r=h("strides",t,e,n),i=h("pad",t,e,n),o=h("dataFormat",t,e,n).toUpperCase(),u=h("dilations",t,e,n);var m=h("args",t,e,n),y=m[0],v=m[1];return[("_FusedConv2D"===t.op?a.cZk.conv2d:a.cZk.depthwiseConv2d)({x:h("x",t,e,n),filter:h("filter",t,e,n),strides:[r[1],r[2]],pad:i,dataFormat:o,dilations:[u[1],u[2]],bias:y,activation:l,preluActivationWeights:v})];case"Conv2DBackpropInput":case"Conv2dTranspose":var g=h("outputShape",t,e,n);return r=h("strides",t,e,n),i=h("pad",t,e,n),[(0,a.wX9)(h("x",t,e,n),h("filter",t,e,n),g,[r[1],r[2]],i)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":return r=h("strides",t,e,n),i=h("pad",t,e,n),u=h("dilations",t,e,n),o=h("dataFormat",t,e,n).toUpperCase(),[(0,a.Gl3)(h("input",t,e,n),h("filter",t,e,n),[r[1],r[2]],i,o,[u[1],u[2]])];case"Conv3D":return r=h("strides",t,e,n),i=h("pad",t,e,n),o=h("dataFormat",t,e,n).toUpperCase(),u=h("dilations",t,e,n),[(0,a.IPL)(h("x",t,e,n),h("filter",t,e,n),[r[1],r[2],r[3]],i,o,[u[1],u[2],u[3]])];case"AvgPool":r=h("strides",t,e,n),i=h("pad",t,e,n);var b=h("kernelSize",t,e,n);return[(0,a.$jT)(h("x",t,e,n),[b[1],b[2]],[r[1],r[2]],i)];case"MaxPool":return r=h("strides",t,e,n),i=h("pad",t,e,n),b=h("kernelSize",t,e,n),[(0,a.jgi)(h("x",t,e,n),[b[1],b[2]],[r[1],r[2]],i)];case"MaxPoolWithArgmax":r=h("strides",t,e,n),i=h("pad",t,e,n),b=h("kernelSize",t,e,n);var x=h("includeBatchInIndex",t,e,n),w=(0,a.RO)(h("x",t,e,n),[b[1],b[2]],[r[1],r[2]],i,x);return[w.result,w.indexes];case"AvgPool3D":return r=h("strides",t,e,n),i=h("pad",t,e,n),b=h("kernelSize",t,e,n),[(0,a.sub)(h("x",t,e,n),[b[1],b[2],b[3]],[r[1],r[2],r[3]],i)];case"MaxPool3D":return r=h("strides",t,e,n),i=h("pad",t,e,n),b=h("kernelSize",t,e,n),[(0,a.NYV)(h("x",t,e,n),[b[1],b[2],b[3]],[r[1],r[2],r[3]],i)];default:throw TypeError("Node type "+t.op+" is not implemented")}},tt=function(t,e,n){switch(t.op){case"Fill":var r=h("shape",t,e,n),i=h("dtype",t,e,n),o=h("value",t,e,n);return[(0,a.GSj)(r,o,i)];case"LinSpace":var s=h("start",t,e,n),u=h("stop",t,e,n),c=h("num",t,e,n);return[(0,a.mT8)(s,u,c)];case"Multinomial":var p=h("logits",t,e,n),l=h("numSamples",t,e,n),f=h("seed",t,e,n);return[(0,a.OjQ)(p,l,f)];case"OneHot":var d=h("indices",t,e,n),m=h("depth",t,e,n),y=h("onValue",t,e,n),v=h("offValue",t,e,n);return[(0,a.Mw0)(d,m,y,v)];case"Ones":return[(0,a.SaS)(h("shape",t,e,n),h("dtype",t,e,n))];case"OnesLike":return[(0,a.P61)(h("x",t,e,n))];case"RandomUniform":return[(0,a.YeY)(h("shape",t,e,n),h("minval",t,e,n),h("maxval",t,e,n),h("dtype",t,e,n))];case"Range":s=h("start",t,e,n);var g=h("stop",t,e,n),b=h("step",t,e,n);return[(0,a.y17)(s,g,b,h("dtype",t,e,n))];case"TruncatedNormal":r=h("shape",t,e,n);var x=h("mean",t,e,n),w=h("stdDev",t,e,n);return f=h("seed",t,e,n),[(0,a.efE)(r,x,w,h("dtype",t,e,n),f)];case"Zeros":return[(0,a.Ul9)(h("shape",t,e,n),h("dtype",t,e,n))];case"ZerosLike":return[(0,a.POl)(h("x",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},te=void 0,tn=function(t,e,n){if("TopKV2"===t.op){var r=h("x",t,e,n),i=h("k",t,e,n),o=h("sorted",t,e,n),s=(0,a.rfw)(r,i,o);return[s.values,s.indices]}throw TypeError("Node type "+t.op+" is not implemented")},tr=function(t,e,n){switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":var r=h("default",t,e,n);return[f(t.name,e,n)||r];case"Placeholder":return[f(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[h("x",t,e,n).clone()];case"IdentityN":return h("x",t,e,n).map(function(t){return t.clone()});case"Shape":return[(0,a.tGX)(h("x",t,e,n).shape,"int32")];case"ShapeN":return h("x",t,e,n).map(function(t){return(0,a.tGX)(t.shape)});case"Size":return[(0,a.d_2)(h("x",t,e,n).size,"int32")];case"Rank":return[(0,a.d_2)(h("x",t,e,n).rank,"int32")];case"NoOp":return[(0,a.d_2)(1)];case"Print":var i=h("x",t,e,n),o=h("data",t,e,n),s=h("message",t,e,n),u=h("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(s);for(var c=0;c<o.length;c++)console.log(Array.prototype.slice.call(o[c].dataSync()).slice(0,u));return[i];default:throw TypeError("Node type "+t.op+" is not implemented")}},ti=function(t,e,n){switch(t.op){case"ResizeBilinear":var r=h("images",t,e,n),i=h("size",t,e,n),o=h("alignCorners",t,e,n);return[a.Slp.resizeBilinear(r,[i[0],i[1]],o)];case"ResizeNearestNeighbor":return r=h("images",t,e,n),i=h("size",t,e,n),o=h("alignCorners",t,e,n),[a.Slp.resizeNearestNeighbor(r,[i[0],i[1]],o)];case"CropAndResize":var s=h("image",t,e,n),u=h("boxes",t,e,n),c=h("boxInd",t,e,n),p=h("cropSize",t,e,n),l=h("method",t,e,n),f=h("extrapolationValue",t,e,n);return[a.Slp.cropAndResize(s,u,c,p,l,f)];default:throw TypeError("Node type "+t.op+" is not implemented")}},ta=function(t,e,n){switch(t.op){case"Equal":return[(0,a.LCg)(h("a",t,e,n),h("b",t,e,n))];case"NotEqual":return[(0,a.Ec)(h("a",t,e,n),h("b",t,e,n))];case"Greater":return[(0,a.rhj)(h("a",t,e,n),h("b",t,e,n))];case"GreaterEqual":return[(0,a.DQN)(h("a",t,e,n),h("b",t,e,n))];case"Less":return[(0,a.M7h)(h("a",t,e,n),h("b",t,e,n))];case"LessEqual":return[(0,a.InN)(h("a",t,e,n),h("b",t,e,n))];case"LogicalAnd":return[(0,a.n76)(h("a",t,e,n),h("b",t,e,n))];case"LogicalNot":return[(0,a.NSZ)(h("a",t,e,n))];case"LogicalOr":return[(0,a.ztW)(h("a",t,e,n),h("b",t,e,n))];case"Select":case"SelectV2":return[(0,a._M9)(h("condition",t,e,n),h("a",t,e,n),h("b",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},to=function(t,e,n){switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[(0,a.NoW)(h("a",t,e,n),h("b",t,e,n),h("transposeA",t,e,n),h("transposeB",t,e,n))];case"Transpose":return[(0,a.mgz)(h("x",t,e,n),h("perm",t,e,n))];case"_FusedMatMul":var r=h("fusedOps",t,e,n),i=r[0],o=r[1],s="prelu"===o,u=h("numArgs",t,e,n);if("biasadd"===i){if(s&&2!==u)throw Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&1!==u)throw Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var c=h("args",t,e,n),p=c[0],l=c[1];return[a.cZk.matMul({a:h("a",t,e,n),b:h("b",t,e,n),transposeA:h("transposeA",t,e,n),transposeB:h("transposeB",t,e,n),bias:p,activation:o,preluActivationWeights:l})];default:throw TypeError("Node type "+t.op+" is not implemented")}},ts=function(t,e,n){switch(t.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[(0,a.$v7)(h("x",t,e,n),h("mean",t,e,n),h("variance",t,e,n),h("offset",t,e,n),h("scale",t,e,n),h("epsilon",t,e,n))];case"LRN":return[(0,a.Kgs)(h("x",t,e,n),h("radius",t,e,n),h("bias",t,e,n),h("alpha",t,e,n),h("beta",t,e,n))];case"Softmax":return[(0,a.Vs9)(h("x",t,e,n))];case"LogSoftmax":return[(0,a.HPB)(h("x",t,e,n))];case"SparseToDense":return[(0,a.Zhr)(h("sparseIndices",t,e,n),h("outputShape",t,e,n),h("sparseValues",t,e,n),h("defaultValue",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},tu=function(t,e,n){switch(t.op){case"Max":var r=h("axis",t,e,n),i=h("keepDims",t,e,n);return[(0,a.T9B)(h("x",t,e,n),r,i)];case"Mean":return r=h("axis",t,e,n),i=h("keepDims",t,e,n),[(0,a.i2o)(h("x",t,e,n),r,i)];case"Min":return r=h("axis",t,e,n),i=h("keepDims",t,e,n),[(0,a.jkA)(h("x",t,e,n),r,i)];case"Sum":return r=h("axis",t,e,n),i=h("keepDims",t,e,n),[(0,a.czq)(h("x",t,e,n),r,i)];case"All":return r=h("axis",t,e,n),i=h("keepDims",t,e,n),[(0,a.Q7R)(h("x",t,e,n),r,i)];case"Any":return r=h("axis",t,e,n),i=h("keepDims",t,e,n),[(0,a.bzn)(h("x",t,e,n),r,i)];case"ArgMax":return r=h("axis",t,e,n),[(0,a.FLi)(h("x",t,e,n),r)];case"ArgMin":return r=h("axis",t,e,n),[(0,a.XRg)(h("x",t,e,n),r)];case"Prod":return r=h("axis",t,e,n),i=h("keepDims",t,e,n),[(0,a._eU)(h("x",t,e,n),r,i)];default:throw TypeError("Node type "+t.op+" is not implemented")}},tc=function(t,e,n){switch(t.op){case"ConcatV2":case"Concat":var r=h("n",t,e,n),i=h("axis",t,e,n),o=h("tensors",t,e,n);return o=o.slice(0,r),[(0,a.xWs)(o,i)];case"GatherV2":case"Gather":i=h("axis",t,e,n);var s=h("x",t,e,n),u=h("indices",t,e,n);return[(0,a.kgh)(s,u.asType("int32"),i)];case"ReverseV2":case"Reverse":return i=h("axis",t,e,n),s=h("x",t,e,n),[(0,a.BEg)(s,i)];case"Slice":var c=h("begin",t,e,n),p=h("size",t,e,n);return[(0,a.dik)(h("x",t,e,n),c,p)];case"StridedSlice":c=h("begin",t,e,n);var l=h("end",t,e,n),f=h("strides",t,e,n),d=h("beginMask",t,e,n),m=h("endMask",t,e,n),y=h("ellipsisMask",t,e,n),v=h("newAxisMask",t,e,n),g=h("shrinkAxisMask",t,e,n),b=h("x",t,e,n);if(1===c.length&&b.shape.length>1)for(var x=1;x<b.shape.length;x++)c.push(0),l.push(b.shape[x]),f.push(f[0]);return[(0,a.Ym9)(b,c,l,f,d,m,y,v,g)];case"Pack":return(0,a.DZQ)(function(){var r=h("axis",t,e,n),i=h("tensors",t,e,n),o=i[0].shape,s=i[0].squeeze().shape,u=i.map(function(t){var e=a.ZSL.arraysEqual(t.shape,o);if(!e&&!a.ZSL.arraysEqual(t.squeeze().shape,s))throw Error("the input tensors shape does not match");return e?t:t.reshape(o)});return[(0,a.t$z)(u,r)]});case"Unpack":return(0,a.DZQ)(function(){var r=h("axis",t,e,n),i=h("tensor",t,e,n);return(0,a.K$i)(i,r)});case"Tile":var w=h("reps",t,e,n);return[(0,a.Vsq)(h("x",t,e,n),w)];case"Split":case"SplitV":i=h("axis",t,e,n);var _=h("numOrSizeSplits",t,e,n);return(0,a.lDo)(h("x",t,e,n),_,i);case"ScatterNd":u=h("indices",t,e,n);var S=h("values",t,e,n),T=h("shape",t,e,n);return[(0,a.NFr)(u,S,T)];case"GatherNd":var N=h("x",t,e,n);return u=h("indices",t,e,n),[(0,a.SY9)(N,u)];case"SparseToDense":u=h("sparseIndices",t,e,n),T=h("outputShape",t,e,n);var E=h("sparseValues",t,e,n),P=h("defaultValue",t,e,n);return[(0,a.Zhr)(u,E,T,E.dtype===P.dtype?P:P.asType(E.dtype))];default:throw TypeError("Node type "+t.op+" is not implemented")}},tp=function(t,e,n){switch(t.op){case"FFT":return[(0,a.hVP)(h("x",t,e,n))];case"IFFT":return[(0,a.KGM)(h("x",t,e,n))];case"RFFT":return[(0,a.z8$)(h("x",t,e,n))];case"IRFFT":return[(0,a.ggX)(h("x",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},tl=function(t,e,n){switch(t.op){case"Cast":return[(0,a.wgE)(h("x",t,e,n),h("dtype",t,e,n))];case"ExpandDims":var r=h("axis",t,e,n);return[(0,a.UG6)(h("x",t,e,n),r)];case"Squeeze":return r=h("axis",t,e,n),[(0,a.r2V)(h("x",t,e,n),r)];case"Reshape":return[(0,a.tQQ)(h("x",t,e,n),h("shape",t,e,n))];case"PadV2":case"Pad":return[(0,a.eVF)(h("x",t,e,n),v(h("padding",t,e,n),2),h("constantValue",t,e,n))];case"SpaceToBatchND":var i=h("blockShape",t,e,n),o=v(h("paddings",t,e,n),2);return[(0,a.eDJ)(h("x",t,e,n),i,o)];case"BatchToSpaceND":i=h("blockShape",t,e,n);var s=v(h("crops",t,e,n),2);return[(0,a.GTe)(h("x",t,e,n),i,s)];case"DepthToSpace":var u=h("blockSize",t,e,n),c=h("dataFormat",t,e,n).toUpperCase();return[(0,a.Rj8)(h("x",t,e,n),u,c)];default:throw TypeError("Node type "+t.op+" is not implemented")}};function th(t,e,n){var r=function(t,e,n){switch(t.category){case"arithmetic":return(0,a.DZQ)(function(){return $(t,e,n)});case"basic_math":return(0,a.DZQ)(function(){return K(t,e,n)});case"control":return c(Y,void 0,void 0,function(){var r,i,o,s,u,c,l,d,m,y,v,g,b,x,w,_,S,T,N,E,P,A,M,O,D,C,k,F,I,V,R,j,L,z;return p(this,function(p){switch(p.label){case 0:switch(t.op){case"LoopCond":return[3,1];case"Switch":return[3,2];case"Merge":return[3,4];case"Enter":return[3,5];case"Exit":return[3,6];case"NextIteration":return[3,7];case"TensorArrayV3":return[3,8];case"TensorArrayWriteV3":return[3,9];case"TensorArrayReadV3":return[3,10];case"TensorArrayGatherV3":return[3,11];case"TensorArrayScatterV3":return[3,12];case"TensorArrayConcatV3":return[3,13];case"TensorArraySplitV3":return[3,14];case"TensorArraySizeV3":return[3,15];case"TensorArrayCloseV3":return[3,16]}return[3,17];case 1:return[2,[h("pred",t,e,n).clone()]];case 2:return r=h("pred",t,e,n),i=h("data",t,e,n),[4,r.data()];case 3:return[2,p.sent()[0]?[void 0,i.clone()]:[i.clone(),void 0]];case 4:return[2,(o=t.inputNames.find(function(t){return void 0!==f(t,e,n)}))?[f(o,e,n).clone()]:void 0];case 5:return s=h("frameName",t,e,n),u=h("tensor",t,e,n),n.enterFrame(s),[2,[u.clone()]];case 6:return c=h("tensor",t,e,n),n.exitFrame(),[2,[c.clone()]];case 7:return l=h("tensor",t,e,n),n.nextIteration(),[2,[l.clone()]];case 8:return d=h("size",t,e,n),m=h("dtype",t,e,n),y=h("elementShape",t,e,n),v=h("dynamicSize",t,e,n),g=h("clearAfterRead",t,e,n),b=h("identicalElementShapes",t,e,n),x=new X(h("name",t,e,n),m,d,y,b,v,g),n.addTensorArray(x),[2,[(0,a.d_2)(x.id),(0,a.d_2)(1)]];case 9:return w=h("tensorArrayId",t,e,n),_=h("index",t,e,n),S=h("tensor",t,e,n),n.getTensorArray(w).write(_,S),[2,[(0,a.d_2)(1)]];case 10:return T=h("tensorArrayId",t,e,n),N=h("index",t,e,n),[2,[n.getTensorArray(T).read(N)]];case 11:return E=h("tensorArrayId",t,e,n),P=h("indices",t,e,n),A=h("dtype",t,e,n),[2,[n.getTensorArray(E).gather(P,A)]];case 12:return M=h("tensorArrayId",t,e,n),O=h("indices",t,e,n),D=h("tensor",t,e,n),n.getTensorArray(M).scatter(O,D),[2,[(0,a.d_2)(1)]];case 13:return C=h("tensorArrayId",t,e,n),k=n.getTensorArray(C),F=h("dtype",t,e,n),[2,[k.concat(F)]];case 14:return I=h("tensorArrayId",t,e,n),V=h("tensor",t,e,n),R=h("lengths",t,e,n),n.getTensorArray(I).split(R,V),[2,[(0,a.d_2)(1)]];case 15:return j=h("tensorArrayId",t,e,n),L=n.getTensorArray(j),[2,[(0,a.d_2)(L.size(),"int32")]];case 16:return z=h("tensorArrayId",t,e,n),n.getTensorArray(z).clearAndClose(),[2,[(0,a.d_2)(0)]];case 17:throw TypeError("Node type "+t.op+" is not implemented")}})});case"convolution":return(0,a.DZQ)(function(){return J(t,e,n)});case"creation":return(0,a.DZQ)(function(){return tt(t,e,n)});case"dynamic":return c(te,void 0,void 0,function(){var r,i,o,s,u,c,l,f;return p(this,function(p){switch(p.label){case 0:switch(t.op){case"NonMaxSuppressionV5":case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":return[3,1];case"Where":return[3,5];case"ListDiff":return[3,7]}return[3,8];case 1:return r=h("boxes",t,e,n),i=h("scores",t,e,n),o=h("maxOutputSize",t,e,n),s=h("iouThreshold",t,e,n),u=h("scoreThreshold",t,e,n),"NonMaxSuppressionV5"!==t.op?[3,3]:(c=h("softNmsSigma",t,e,n),[4,a.Slp.nonMaxSuppressionWithScoreAsync(r,i,o,s,u,c)]);case 2:return[2,[(f=p.sent()).selectedIndices,f.selectedScores]];case 3:return[4,a.Slp.nonMaxSuppressionAsync(r,i,o,s,u)];case 4:return[2,[p.sent()]];case 5:return l=h("condition",t,e,n).asType("bool"),[4,(0,a.YJN)(l)];case 6:return f=[p.sent()],l.dispose(),[2,f];case 7:return[2,(0,a.F12)(h("x",t,e,n),h("y",t,e,n))];case 8:throw TypeError("Node type "+t.op+" is not implemented")}})});case"evaluation":return(0,a.DZQ)(function(){return tn(t,e,n)});case"image":return(0,a.DZQ)(function(){return ti(t,e,n)});case"graph":return(0,a.DZQ)(function(){return tr(t,e,n)});case"logical":return(0,a.DZQ)(function(){return ta(t,e,n)});case"matrices":return(0,a.DZQ)(function(){return to(t,e,n)});case"normalization":return(0,a.DZQ)(function(){return ts(t,e,n)});case"reduction":return(0,a.DZQ)(function(){return tu(t,e,n)});case"slice_join":return(0,a.DZQ)(function(){return tc(t,e,n)});case"spectral":return(0,a.DZQ)(function(){return tp(t,e,n)});case"transformation":return(0,a.DZQ)(function(){return tl(t,e,n)});case"custom":var r=l[t.op];if(r&&r.customExecutor)return r.customExecutor(new G(t,e,n));throw TypeError("Custom op "+t.op+" is not registered.");default:throw TypeError("Unknown op '"+t.op+"'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(t,e,n);return r instanceof Promise?r.then(function(t){return[].concat(t)}):[].concat(r)}var tf=function(){function t(t,e){this.weightMap=t,this.tensorArrayMap=e,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return t.prototype.newFrame=function(t,e){return{id:t,frameName:e,iterationId:0}},Object.defineProperty(t.prototype,"currentContext",{get:function(){return this.contexts},set:function(t){this.contexts!==t&&(this.contexts=t,this.generateCurrentContextIds())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentContextId",{get:function(){return this._currentContextIds[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentContextIds",{get:function(){return this._currentContextIds},enumerable:!0,configurable:!0}),t.prototype.generateCurrentContextIds=function(){for(var t=[],e=0;e<this.contexts.length-1;e++){var n=this.contexts.slice(0,this.contexts.length-e);t.push(this.contextIdforContexts(n))}t.push(""),this._currentContextIds=t},t.prototype.contextIdforContexts=function(t){return t?t.map(function(t){return 0===t.id&&0===t.iterationId?"":t.frameName+"-"+t.iterationId}).join("/"):""},t.prototype.enterFrame=function(t){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,t)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))},t.prototype.exitFrame=function(){if(!(this.contexts&&this.contexts.length>1))throw Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()},t.prototype.nextIteration=function(){if(!(this.contexts&&this.contexts.length>0))throw Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var t=Object.assign({},this.contexts[this.contexts.length-1]);t.iterationId+=1,t.id=this.lastId,this.contexts.splice(-1,1,t),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))},t.prototype.getWeight=function(t){return this.weightMap[t]},t.prototype.addTensorArray=function(t){this.tensorArrayMap[t.id]=t},t.prototype.getTensorArray=function(t){return this.tensorArrayMap[t]},t}();function td(t,e,n){for(var r=new Set,i=[],a=null,o=null,s=new Set,u=Object.keys(t).map(function(t){return y(t)[0]}),c=e.slice();c.length>0;){var p=c.pop();(tv(p)||ty.indexOf(p.op)>=0)&&null==a&&(o=(a=p).children.map(function(t){return t.name}).filter(function(t){return r.has(t)})),r.add(p.name),null==n[p.name]&&-1===u.indexOf(p.name)&&(0!==p.inputs.length?p.inputs.forEach(function(t){s.has(t.name)||(s.add(t.name),c.push(t))}):i.push(p.name))}return{inputs:t,outputs:e,usedNodes:r,missingInputs:i,dynamicNode:a,syncInputs:o}}var tm=["Switch","Merge","Enter","Exit","NextIteration"],ty=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"];function tv(t){return tm.indexOf(t.op)>=0}var tg=function(){function t(t){this.graph=t,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._outputs=t.outputs,this._inputs=t.inputs,this._signature=t.signature}return Object.defineProperty(t.prototype,"weightMap",{get:function(){return this._weightMap},set:function(t){var e=Object.keys(t).map(function(e){return t[e].map(function(t){return t.id})});this.weightIds=[].concat.apply([],e),this._weightMap=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputs",{get:function(){return this._inputs.map(function(t){return{name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){return this._outputs.map(function(t){return{name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputNodes",{get:function(){return this._inputs.map(function(t){return t.signatureKey||t.name})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputNodes",{get:function(){return this._outputs.map(function(t){return t.signatureKey||t.name})},enumerable:!0,configurable:!0}),t.prototype.getCompilationKey=function(t,e){var n=t.map(function(t){return t.name}).sort(),r=e.map(function(t){return t.name}).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)},t.prototype.compile=function(t,e){var n=td(t,e,this.weightMap),r=n.missingInputs,i=n.dynamicNode,a=n.syncInputs;if(null!=i)throw Error("This execution contains the node '"+i.name+"', which has the dynamic op '"+i.op+"'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs ["+a+"]");if(r.length>0)throw Error("Cannot compute the outputs ["+e.map(function(t){return t.name})+"] from the provided inputs ["+Object.keys(t)+"]. Missing the following inputs: ["+r+"]");return function(t,e,n){var r=n.usedNodes,i=n.inputs,a=[];Object.keys(i).map(function(t){return y(t)[0]}).map(function(e){return t.nodes[e]}).forEach(function(t){r.has(t.name)&&a.push(t)}),t.weights.forEach(function(t){r.has(t.name)&&a.push(t)});for(var o=new Set,s=[];a.length>0;){var u=a.pop();o.add(u.name),e[u.name]||s.push(u),u.children.forEach(function(t){!o.has(t.name)&&r.has(t.name)&&t.inputs.every(function(t){return o.has(t.name)})&&a.push(t)})}return s}(this.graph,this.weightMap,n)},t.prototype.execute=function(t,e){var n=this,r=Object.keys(t=this.mapInputs(t)).sort();this.checkInputs(t),this.checkInputShapeAndType(t),e=this.mapOutputs(e),this.checkOutputs(e);var i=r.map(function(t){return n.graph.nodes[y(t)[0]]}),o=e.map(function(t){return n.graph.nodes[y(t)[0]]}),s=this.getCompilationKey(i,o),c=this.compiledMap.get(s);null==c&&(c=this.compile(t,o),this.compiledMap.set(s,c));var p={};return(0,a.DZQ)(function(){var r=new tf(n._weightMap,p),i=u({},n.weightMap);Object.keys(t).forEach(function(e){var n=y(e),r=n[0],a=[];a[n[1]]=t[e],i[r]=a});for(var a=n.getFrozenTensorIds(i),o={},s=0;s<c.length;s++){var l=c[s];if(!i[l.name]){var h=th(l,i,r);if(h instanceof Promise)throw Error("The execution of the op '"+l.op+"' returned a promise. Please use model.executeAsync() instead.");i[l.name]=h,n.checkTensorForDisposal(l.name,l,i,r,a,e,o)}}return e.map(function(t){return f(t,i,r)})})},t.prototype.getFrozenTensorIds=function(t){return new Set([].concat.apply([],Object.keys(t).map(function(e){return t[e]}).map(function(t){return t.map(function(t){return t.id})})))},t.prototype.checkTensorForDisposal=function(t,e,n,r,i,a,o){"control"!==e.category&&-1===a.indexOf(t)&&(n[t].forEach(function(t){null!=t&&(o[t.id]=(o[t.id]||0)+e.children.length)}),e.inputs.forEach(function(t){if("control"!==t.category){var e=n[m(t.name,r.currentContextId)];null!=e&&e.forEach(function(t){if(t&&!i.has(t.id)){var e=o[t.id];1===e?(t.dispose(),delete o[t.id]):null!=e&&o[t.id]--}})}}))},t.prototype.executeAsync=function(t,e){return c(this,void 0,void 0,function(){var n,r,i,a,o,s,u=this;return p(this,function(c){switch(c.label){case 0:return t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),e=this.mapOutputs(e),this.checkOutputs(e),n={},r=new tf(this._weightMap,n),[4,this.executeWithControlFlow(t,r,e)];case 1:return i=c.sent(),o=new Set((a=e.map(function(t){return f(t,i,r)})).map(function(t){return t.id})),s=new Set(Object.keys(t).map(function(e){return t[e].id})),Object.keys(i).forEach(function(t){i[t].forEach(function(t){!t||t.isDisposed||o.has(t.id)||s.has(t.id)||-1!==u.weightIds.indexOf(t.id)||t.dispose()})}),[2,a]}})})},t.prototype.executeWithControlFlow=function(t,e,n){return c(this,void 0,void 0,function(){var r,i,a,o,s,c,l,h,d,m,v,g,b,x,w,_=this;return p(this,function(p){switch(p.label){case 0:i=(r=Object.keys(t)).map(function(t){return _.graph.nodes[y(t)[0]]}),s=(o=td(t,a=n.map(function(t){return _.graph.nodes[y(t)[0]]}),this.weightMap)).usedNodes,c=o.missingInputs,l=o.dynamicNode,h=o.syncInputs,d=i.concat(this.graph.weights).map(function(t){return{node:t,contexts:e.currentContext}}),m=u({},this.weightMap),Object.keys(t).forEach(function(e){var n=y(e),r=n[0],i=[];i[n[1]]=t[e],m[r]=i}),v={},g=this.getFrozenTensorIds(m),b={},p.label=1;case 1:return d.length>0?[4,Promise.all(this.processStack(i,d,e,m,b,g,n,v,s))]:[3,3];case 2:return p.sent(),[3,1];case 3:if(null==l&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),(x=a.filter(function(t){return!tv(t)&&!f(t.name,m,e)}).map(function(t){return t.name})).length>0)throw w="",null!=l&&(w="Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs ["+h+"]"),Error("Cannot compute the outputs ["+x+"] from the provided inputs ["+r+"]. Consider providing the following inputs: ["+c+"]. "+w);return[2,m]}})})},t.prototype.processStack=function(t,e,n,r,i,a,o,s,u){for(var c=this,p=[],l=this;e.length>0;)!function(){var f=e.pop();n.currentContext=f.contexts;var m="";if("Enter"===f.node.op&&h("isConstant",f.node,r,n)&&(m=d(f.node.name,n)[0]),-1===t.indexOf(f.node)){var y=th(f.node,r,n);m||(m=d(f.node.name,n)[0]);var v=n.currentContext;y instanceof Promise?p.push(y.then(function(t){return r[m]=t,n.currentContext=v,c.checkTensorForDisposal(m,f.node,r,n,a,o,s),c.processChildNodes(f.node,e,n,r,i,u),t})):(r[m]=y,l.checkTensorForDisposal(m,f.node,r,n,a,o,s),l.processChildNodes(f.node,e,n,r,i,u))}else l.processChildNodes(f.node,e,n,r,i,u)}();return p},t.prototype.processChildNodes=function(t,e,n,r,i,a){t.children.forEach(function(t){var o=d(t.name,n)[0];!i[o]&&a.has(t.name)&&("Merge"===t.op?t.inputNames.some(function(t){return!!f(t,r,n)})&&(i[o]=!0,e.push({contexts:n.currentContext,node:t})):t.inputNames.every(function(t){return!!f(t,r,n)})&&(i[o]=!0,e.push({contexts:n.currentContext,node:t})))})},t.prototype.dispose=function(){var t=this;Object.keys(this.weightMap).forEach(function(e){return t.weightMap[e].forEach(function(t){return t.dispose()})})},t.prototype.checkInputShapeAndType=function(t){var e=this;Object.keys(t).forEach(function(n){var r=t[n],i=y(n)[0],o=e.graph.nodes[i];if(o.attrParams.shape&&o.attrParams.shape.value){var s=o.attrParams.shape.value,u=s.length===r.shape.length&&r.shape.every(function(t,e){return -1===s[e]||s[e]===t});a.ZSL.assert(u,function(){return"The shape of dict['"+o.name+"'] provided in model.execute(dict) must be ["+s+"], but was ["+r.shape+"]"})}o.attrParams.dtype&&o.attrParams.dtype.value&&a.ZSL.assert(r.dtype===o.attrParams.dtype.value,function(){return"The dtype of dict['"+o.name+"'] provided in model.execute(dict) must be "+o.attrParams.dtype.value+", but was "+r.dtype})})},t.prototype.mapInputs=function(t){var e={};for(var n in t)null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n]?e[this._signature.inputs[n].name]=t[n]:e[n]=t[n];return e},t.prototype.checkInputs=function(t){var e=this,n=Object.keys(t).filter(function(t){var n=y(t)[0];return null==e.graph.nodes[n]});if(n.length>0)throw Error("The dict provided in model.execute(dict) has keys: ["+n+"] that are not part of graph")},t.prototype.mapOutputs=function(t){var e=this;return t.map(function(t){return null!=e._signature&&null!=e._signature.outputs&&null!=e._signature.outputs[t]?e._signature.outputs[t].name:t},{})},t.prototype.checkOutputs=function(t){var e=this;t.forEach(function(t){var n=y(t)[0];if(!e.graph.nodes[n])throw Error("The output '"+t+"' is not found in the graph")})},t}(),tb=(function(){function t(t,e){void 0===e&&(e={}),this.modelUrl=t,this.loadOptions=e,this.version="n/a",null==e&&(this.loadOptions={})}Object.defineProperty(t.prototype,"modelVersion",{get:function(){return this.version},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputNodes",{get:function(){return this.executor.inputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputNodes",{get:function(){return this.executor.outputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputs",{get:function(){return this.executor.inputs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){return this.executor.outputs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weights",{get:function(){return this.executor.weightMap},enumerable:!0,configurable:!0}),t.prototype.findIOHandler=function(){var t=this.modelUrl;if(null!=t.load)this.handler=t;else if(null!=this.loadOptions.requestInit)this.handler=a.io.browserHTTPRequest(t,this.loadOptions);else{var e=a.io.getLoadHandlers(t,this.loadOptions.onProgress);if(0===e.length)e.push(a.io.browserHTTPRequest(t,this.loadOptions));else if(e.length>1)throw Error("Found more than one ("+e.length+") load handlers for URL '"+[t]+"'");this.handler=e[0]}},t.prototype.load=function(){return c(this,void 0,void 0,function(){var t,e,n,r;return p(this,function(i){switch(i.label){case 0:if(this.findIOHandler(),null==this.handler.load)throw Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return t=this,[4,this.handler.load()];case 1:return t.artifacts=i.sent(),e=this.artifacts.modelTopology,n={},null!=this.artifacts.userDefinedMetadata&&(n=this.artifacts.userDefinedMetadata.signature),this.version=e.versions.producer+"."+e.versions.minConsumer,r=a.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs),this.executor=new tg(F.Instance.transformGraph(e,n)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),[2,!0]}})})},t.prototype.save=function(t,e){return c(this,void 0,void 0,function(){var e;return p(this,function(n){if("string"==typeof t){if(0===(e=a.io.getSaveHandlers(t)).length)throw Error("Cannot find any save handlers for URL '"+t+"'");if(e.length>1)throw Error("Found more than one ("+e.length+") save handlers for URL '"+t+"'");t=e[0]}if(null==t.save)throw Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return[2,t.save(this.artifacts)]})})},t.prototype.predict=function(t,e){return this.execute(t,this.outputNodes)},t.prototype.normalizeInputs=function(t){if(!(t instanceof a.qYS||Array.isArray(t)))return t;if((t=Array.isArray(t)?t:[t]).length!==this.inputNodes.length)throw Error("Input tensor count mismatch,the graph model has "+this.inputNodes.length+" placeholders, while there are "+t.length+" input tensors.");return this.inputNodes.reduce(function(e,n,r){return e[n]=t[r],e},{})},t.prototype.normalizeOutputs=function(t){return Array.isArray(t=t||this.outputNodes)?t:[t]},t.prototype.execute=function(t,e){t=this.normalizeInputs(t),e=this.normalizeOutputs(e);var n=this.executor.execute(t,e);return n.length>1?n:n[0]},t.prototype.executeAsync=function(t,e){return c(this,void 0,void 0,function(){var n;return p(this,function(r){switch(r.label){case 0:return t=this.normalizeInputs(t),e=this.normalizeOutputs(e),[4,this.executor.executeAsync(t,e)];case 1:return[2,(n=r.sent()).length>1?n:n[0]]}})})},t.prototype.convertTensorMapToTensorsMap=function(t){return Object.keys(t).reduce(function(e,n){return e[n]=[t[n]],e},{})},t.prototype.dispose=function(){this.executor.dispose()}}(),n(9641).Buffer),tx=function(t,e){return(tx=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function tw(t,e){function n(){this.constructor=t}tx(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function t_(t,e,n,r){return new(n||(n=Promise))(function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(o,s)}u((r=r.apply(t,e||[])).next())})}function tS(t,e){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){var u=[a,s];if(n)throw TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}function tT(t,e){return t(e={exports:{}},e.exports),e.exports}"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self&&self;var tN=tT(function(t){!function(t,e,n){function r(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function i(t,e){var n=new function(t){var e,n=this,r=(e=0xefc8249d,function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=0x100000000*(r-=e)}return 23283064365386963e-26*(e>>>0)});n.next=function(){var t=2091639*n.s0+23283064365386963e-26*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(t),n.s0<0&&(n.s0+=1),n.s1-=r(t),n.s1<0&&(n.s1+=1),n.s2-=r(t),n.s2<0&&(n.s2+=1),r=null}(t),i=e&&e.state,a=n.next;return a.int32=function(){return 0x100000000*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,i&&("object"==typeof i&&r(i,n),a.state=function(){return r(n,{})}),a}e&&e.exports?e.exports=i:n&&n.amd?n(function(){return i}):this.alea=i}(0,t,!1)}),tE=tT(function(t){!function(t,e,n){function r(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function i(t,e){var n=new function(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=n.charCodeAt(r),e.next()}(t),i=e&&e.state,a=function(){return(n.next()>>>0)/0x100000000};return a.double=function(){do var t=((n.next()>>>11)+(n.next()>>>0)/0x100000000)/2097152;while(0===t);return t},a.int32=n.next,a.quick=a,i&&("object"==typeof i&&r(i,n),a.state=function(){return r(n,{})}),a}e&&e.exports?e.exports=i:n&&n.amd?n(function(){return i}):this.xor128=i}(0,t,!1)}),tP=tT(function(t){!function(t,e,n){function r(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function i(t,e){var n=new function(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}(t),i=e&&e.state,a=function(){return(n.next()>>>0)/0x100000000};return a.double=function(){do var t=((n.next()>>>11)+(n.next()>>>0)/0x100000000)/2097152;while(0===t);return t},a.int32=n.next,a.quick=a,i&&("object"==typeof i&&r(i,n),a.state=function(){return r(n,{})}),a}e&&e.exports?e.exports=i:n&&n.amd?n(function(){return i}):this.xorwow=i}(0,t,!1)}),tA=tT(function(t){!function(t,e,n){function r(t,e){return e.x=t.x.slice(),e.i=t.i,e}function i(t,e){null==t&&(t=+new Date);var n=new function(t){var e=this;e.next=function(){var t,n,r=e.x,i=e.i;return t=r[i],n=(t^=t>>>7)^t<<24^((t=r[i+1&7])^t>>>10)^((t=r[i+3&7])^t>>>3)^((t=r[i+4&7])^t<<7),t=r[i+7&7],n^=(t^=t<<13)^t<<9,r[i]=n,e.i=i+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}(t),i=e&&e.state,a=function(){return(n.next()>>>0)/0x100000000};return a.double=function(){do var t=((n.next()>>>11)+(n.next()>>>0)/0x100000000)/2097152;while(0===t);return t},a.int32=n.next,a.quick=a,i&&(i.x&&r(i,n),a.state=function(){return r(n,{})}),a}e&&e.exports?e.exports=i:n&&n.amd?n(function(){return i}):this.xorshift7=i}(0,t,!1)}),tM=tT(function(t){!function(t,e,n){function r(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function i(t,e){null==t&&(t=+new Date);var n=new function(t){var e=this;e.next=function(){var t,n,r=e.w,i=e.X,a=e.i;return e.w=r=r+0x61c88647|0,n=i[a+34&127],t=i[a=a+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=i[a]=n^t,e.i=a,n+(r^r>>>16)|0},function(t,e){var n,r,i,a,o,s=[],u=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,u=Math.max(u,e.length)),i=0,a=-32;a<u;++a)e&&(r^=e.charCodeAt((a+32)%e.length)),0===a&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(o=o+0x61c88647|0,i=0==(n=s[127&a]^=r+o)?i+1:0);for(i>=128&&(s[127&(e&&e.length||0)]=-1),i=127,a=512;a>0;--a)r=s[i+34&127],n=s[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[i]=r^n;t.w=o,t.X=s,t.i=i}(e,t)}(t),i=e&&e.state,a=function(){return(n.next()>>>0)/0x100000000};return a.double=function(){do var t=((n.next()>>>11)+(n.next()>>>0)/0x100000000)/2097152;while(0===t);return t},a.int32=n.next,a.quick=a,i&&(i.X&&r(i,n),a.state=function(){return r(n,{})}),a}e&&e.exports?e.exports=i:n&&n.amd?n(function(){return i}):this.xor4096=i}(0,t,!1)}),tO=tT(function(t){!function(t,e,n){function r(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function i(t,e){var n=new function(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,i=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^i,e.a=i-t|0},e.a=0,e.b=0,e.c=-0x61c88647,e.d=0x517cc1b7,t===Math.floor(t)?(e.a=t/0x100000000|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=n.charCodeAt(r),e.next()}(t),i=e&&e.state,a=function(){return(n.next()>>>0)/0x100000000};return a.double=function(){do var t=((n.next()>>>11)+(n.next()>>>0)/0x100000000)/2097152;while(0===t);return t},a.int32=n.next,a.quick=a,i&&("object"==typeof i&&r(i,n),a.state=function(){return r(n,{})}),a}e&&e.exports?e.exports=i:n&&n.amd?n(function(){return i}):this.tychei=i}(0,t,!1)}),tD=tT(function(t){!function(e,r){var i,a=this,o="random",s=r.pow(256,6),u=r.pow(2,52),c=2*u;function p(t,n,p){var d=[],m=h(function t(e,n){var r,i=[],a=typeof e;if(n&&"object"==a)for(r in e)try{i.push(t(e[r],n-1))}catch(t){}return i.length?i:"string"==a?e:e+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[t,f(e)]:null==t?function(){try{var t;return i&&(t=i.randomBytes)?t=t(256):(t=new Uint8Array(256),(a.crypto||a.msCrypto).getRandomValues(t)),f(t)}catch(t){var n=a.navigator,r=n&&n.plugins;return[+new Date,a,r,a.screen,f(e)]}}():t,3),d),y=new function(t){var e,n=t.length,r=this,i=0,a=r.i=r.j=0,o=r.S=[];for(n||(t=[n++]);i<256;)o[i]=i++;for(i=0;i<256;i++)o[i]=o[a=255&a+t[i%n]+(e=o[i])],o[a]=e;(r.g=function(t){for(var e,n=0,i=r.i,a=r.j,o=r.S;t--;)e=o[i=255&i+1],n=256*n+o[255&(o[i]=o[a=255&a+e])+(o[a]=e)];return r.i=i,r.j=a,n})(256)}(d),v=function(){for(var t=y.g(6),e=s,n=0;t<u;)t=(t+n)*256,e*=256,n=y.g(1);for(;t>=c;)t/=2,e/=2,n>>>=1;return(t+n)/e};return v.int32=function(){return 0|y.g(4)},v.quick=function(){return y.g(4)/0x100000000},v.double=v,h(f(y.S),e),(n.pass||p||function(t,e,n,i){return i&&(i.S&&l(i,y),t.state=function(){return l(y,{})}),n?(r[o]=t,e):t})(v,m,"global"in n?n.global:this==r,n.state)}function l(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function h(t,e){for(var n,r=t+"",i=0;i<r.length;)e[255&i]=255&(n^=19*e[255&i])+r.charCodeAt(i++);return f(e)}function f(t){return String.fromCharCode.apply(0,t)}if(r["seed"+o]=p,h(r.random(),e),t.exports){t.exports=p;try{i=n(4132)}catch(t){}}}([],Math)});tD.alea=tN,tD.xor128=tE,tD.xorwow=tP,tD.xorshift7=tA,tD.xor4096=tM,tD.tychei=tO;var tC=tD.alea;function tk(t,e,n,r){if(void 0===n&&(n=new Map),void 0===r&&(r=new Set),null==t)return null;if(r.has(t))throw Error("Circular references are not supported.");if(n.has(t))return n.get(t);var i=e(t);if(i.recurse&&null!==i.value)throw Error("A deep map function may not return both a value and recurse=true.");if(i.recurse){if(tI(t)){var a=Array.isArray(t)?[]:{};for(var o in r.add(t),t){var s=tk(t[o],e,n,r);a[o]=s}return r.delete(t),a}throw Error("Can't recurse into non-iterable type: "+t)}return n.set(t,i.value),i.value}function tF(t){return null===t?null:tI(t[0])?{value:null,recurse:!0}:{value:t,recurse:!1}}function tI(t){return null!=t&&!ArrayBuffer.isView(t)&&(Array.isArray(t)||"object"==typeof t&&!(t instanceof a.qYS))}function tV(t){return t instanceof a.qYS?{value:t.clone(),recurse:!1}:tI(t)?{value:null,recurse:!0}:{value:t,recurse:!1}}var tR=function(){function t(t){if(this.capacity=t,this.begin=0,this.end=0,null==t)throw RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw RangeError("Can't create ring buffer of capacity < 1.");this.data=Array(t),this.doubledCapacity=2*t}return t.prototype.wrap=function(t){for(;t<0;)t+=this.doubledCapacity;return t%this.doubledCapacity},t.prototype.get=function(t){if(t<0)throw RangeError("Can't get item at a negative index.");return this.data[t%this.capacity]},t.prototype.set=function(t,e){if(t<0)throw RangeError("Can't set item at a negative index.");this.data[t%this.capacity]=e},t.prototype.length=function(){var t=this.end-this.begin;return t<0&&(t=this.doubledCapacity+t),t},t.prototype.isFull=function(){return this.length()===this.capacity},t.prototype.isEmpty=function(){return 0===this.length()},t.prototype.push=function(t){if(this.isFull())throw RangeError("Ring buffer is full.");this.set(this.end,t),this.end=this.wrap(this.end+1)},t.prototype.pushAll=function(t){for(var e=0;e<t.length;e++){var n=t[e];this.push(n)}},t.prototype.pop=function(){if(this.isEmpty())throw RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var t=this.get(this.end);return this.set(this.end,void 0),t},t.prototype.unshift=function(t){if(this.isFull())throw RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,t)},t.prototype.shift=function(){if(this.isEmpty())throw RangeError("Ring buffer is empty.");var t=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),t},t.prototype.shuffleExcise=function(t){if(this.isEmpty())throw RangeError("Ring buffer is empty.");var e=this.wrap(this.begin+t),n=this.get(e);return this.set(e,this.pop()),n},t}(),tj=function(t){function e(){return t.call(this,e.INITIAL_CAPACITY)||this}return tw(e,t),e.prototype.isFull=function(){return!1},e.prototype.push=function(e){t.prototype.isFull.call(this)&&this.expand(),t.prototype.push.call(this,e)},e.prototype.unshift=function(e){t.prototype.isFull.call(this)&&this.expand(),t.prototype.unshift.call(this,e)},e.prototype.expand=function(){for(var t=2*this.capacity,e=Array(t),n=this.length(),r=0;r<n;r++)e[r]=this.get(this.wrap(this.begin+r));this.data=e,this.capacity=t,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n},e.INITIAL_CAPACITY=32,e}(tR),tL,tz=function(){function t(){}return t.prototype.toArray=function(){return t_(this,void 0,void 0,function(){var t,e;return tS(this,function(n){switch(n.label){case 0:return t=[],[4,this.next()];case 1:e=n.sent(),n.label=2;case 2:return e.done?[3,4]:(t.push(e.value),[4,this.next()]);case 3:return e=n.sent(),[3,2];case 4:return[2,t]}})})},t.prototype.toArrayForTest=function(){return t_(this,void 0,void 0,function(){var t,e,n;return tS(this,function(r){switch(r.label){case 0:return t=this.prefetch(100),e=[],[4,t.next()];case 1:n=r.sent(),r.label=2;case 2:return n.done?[3,4]:(e.push(n.value),[4,t.next()]);case 3:return n=r.sent(),[3,2];case 4:return[2,e]}})})},t.prototype.resolveFully=function(){return t_(this,void 0,void 0,function(){var t;return tS(this,function(e){switch(e.label){case 0:return[4,this.next()];case 1:t=e.sent(),e.label=2;case 2:return t.done?[3,4]:[4,this.next()];case 3:return t=e.sent(),[3,2];case 4:return[2]}})})},t.prototype.resolveWhile=function(t){return t_(this,void 0,void 0,function(){var e,n;return tS(this,function(r){switch(r.label){case 0:return[4,this.next()];case 1:n=t((e=r.sent()).value),r.label=2;case 2:return e.done||!n?[3,4]:[4,this.next()];case 3:return n=t((e=r.sent()).value),[3,2];case 4:return[2]}})})},t.prototype.handleErrors=function(t){return new t$(this,t)},t.prototype.filter=function(t){return new tZ(this,t)},t.prototype.map=function(t){return new tG(this,t)},t.prototype.mapAsync=function(t){return new tK(this,t)},t.prototype.serialMapAsync=function(t){return new tK(this,t).serial()},t.prototype.flatmap=function(t){return new tY(this,t)},t.prototype.forEachAsync=function(t){return t_(this,void 0,void 0,function(){return tS(this,function(e){return[2,this.map(t).resolveFully()]})})},t.prototype.serialForEach=function(t){return t_(this,void 0,void 0,function(){return tS(this,function(e){return[2,this.serialMapAsync(t).resolveWhile(function(t){return!0===t})]})})},t.prototype.rowMajorBatch=function(t,e){return void 0===e&&(e=!0),new tH(this,t,e)},t.prototype.columnMajorBatch=function(t,e,n){return void 0===e&&(e=!0),void 0===n&&(n=tF),this.rowMajorBatch(t,e).map(function(t){var e;return void 0===(e=n)&&(e=tF),function t(e,n,r){void 0===r&&(r=new Set);var i=e[0];if(r.has(i))throw Error("Circular references are not supported.");var a=n(e);if(a.recurse&&null!==a.value)throw Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(tI(i)){var o=Array.isArray(i)?[]:{};r.add(i);var s=function(i){var a=t(e.map(function(t){return t[i]}),n,r);o[i]=a};for(var u in i)s(u);return r.delete(i),o}throw Error("Can't recurse into non-iterable type: "+i)}return a.value}(t,e)})},t.prototype.concatenate=function(t,e){return new tJ(new tB([this,t]),e)},t.prototype.take=function(t){return t<0||null==t?this:new tq(this,t)},t.prototype.skip=function(t){return t<0||null==t?this:new tQ(this,t)},t.prototype.prefetch=function(t){return new t0(this,t)},t.prototype.shuffle=function(t,e){return new t1(this,t,e)},t.prototype.serial=function(){return new tU(this)},t}(),tB=function(t){function e(e){var n=t.call(this)||this;return n.items=e,n.trav=0,n}return tw(e,t),e.prototype.summary=function(){return"Array of "+this.items.length+" items"},e.prototype.next=function(){return t_(this,void 0,void 0,function(){var t;return tS(this,function(e){return this.trav>=this.items.length?[2,{value:null,done:!0}]:(t=this.items[this.trav],this.trav++,[2,{value:tk(t,tV),done:!1}])})})},e}(tz),tW=function(t){function e(e){var n=t.call(this)||this;return n.nextFn=e,n}return tw(e,t),e.prototype.summary=function(){return"Function call"},e.prototype.next=function(){return t_(this,void 0,void 0,function(){return tS(this,function(t){try{return[2,this.nextFn()]}catch(t){throw t.message="Error thrown while iterating through a dataset: "+t.message,t}})})},e}(tz),tU=function(t){function e(e){var n=t.call(this)||this;return n.upstream=e,n.lastRead=Promise.resolve({value:null,done:!1}),n}return tw(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> Serial"},e.prototype.next=function(){return t_(this,void 0,void 0,function(){var t=this;return tS(this,function(e){return this.lastRead=this.lastRead.then(function(){return t.serialNext()}),[2,this.lastRead]})})},e.prototype.serialNext=function(){return t_(this,void 0,void 0,function(){return tS(this,function(t){return[2,this.upstream.next()]})})},e}(tz),tQ=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.maxCount=n,r.count=0,r.lastRead=Promise.resolve({value:null,done:!1}),r}return tw(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> Skip"},e.prototype.next=function(){return t_(this,void 0,void 0,function(){var t=this;return tS(this,function(e){return this.lastRead=this.lastRead.then(function(){return t.serialNext()}),[2,this.lastRead]})})},e.prototype.serialNext=function(){return t_(this,void 0,void 0,function(){var t;return tS(this,function(e){switch(e.label){case 0:return this.count++<this.maxCount?[4,this.upstream.next()]:[3,2];case 1:return(t=e.sent()).done?[2,t]:((0,a.ASo)(t.value),[3,0]);case 2:return[2,this.upstream.next()]}})})},e}(tz),tq=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.maxCount=n,r.count=0,r}return tw(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> Take"},e.prototype.next=function(){return t_(this,void 0,void 0,function(){return tS(this,function(t){return this.count++>=this.maxCount?[2,{value:null,done:!0}]:[2,this.upstream.next()]})})},e}(tz),tH=function(t){function e(e,n,r){void 0===r&&(r=!0);var i=t.call(this)||this;return i.upstream=e,i.batchSize=n,i.enableSmallLastBatch=r,i.lastRead=Promise.resolve({value:null,done:!1}),i}return tw(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> RowMajorBatch"},e.prototype.next=function(){return t_(this,void 0,void 0,function(){var t=this;return tS(this,function(e){return this.lastRead=this.lastRead.then(function(){return t.serialNext()}),[2,this.lastRead]})})},e.prototype.serialNext=function(){return t_(this,void 0,void 0,function(){var t,e;return tS(this,function(n){switch(n.label){case 0:t=[],n.label=1;case 1:return t.length<this.batchSize?[4,this.upstream.next()]:[3,3];case 2:return(e=n.sent()).done?this.enableSmallLastBatch&&t.length>0?[2,{value:t,done:!1}]:[2,{value:null,done:!0}]:(t.push(e.value),[3,1]);case 3:return[2,{value:t,done:!1}]}})})},e}(tz),tZ=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.predicate=n,r.lastRead=Promise.resolve({value:null,done:!1}),r}return tw(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> Filter"},e.prototype.next=function(){return t_(this,void 0,void 0,function(){var t=this;return tS(this,function(e){return this.lastRead=this.lastRead.then(function(){return t.serialNext()}),[2,this.lastRead]})})},e.prototype.serialNext=function(){return t_(this,void 0,void 0,function(){var t;return tS(this,function(e){switch(e.label){case 0:return[4,this.upstream.next()];case 1:return(t=e.sent()).done||this.predicate(t.value)?[2,t]:((0,a.ASo)(t.value),[3,0]);case 2:return[2]}})})},e}(tz),tG=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.transform=n,r}return tw(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> Map"},e.prototype.next=function(){return t_(this,void 0,void 0,function(){var t,e,n,r,i,o,s;return tS(this,function(u){switch(u.label){case 0:return[4,this.upstream.next()];case 1:if((t=u.sent()).done)return[2,{value:null,done:!0}];for(e=a.d_S.getTensorsInContainer(t.value),n=this.transform(t.value),r=a.d_S.getTensorsInContainer(n),i=0,o=e;i<o.length;i++)s=o[i],a.d_S.isTensorInList(s,r)||s.dispose();return[2,{value:n,done:!1}]}})})},e}(tz),t$=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.handler=n,r.count=0,r.lastRead=Promise.resolve({value:null,done:!1}),r}return tw(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> handleErrors"},e.prototype.next=function(){return t_(this,void 0,void 0,function(){var t=this;return tS(this,function(e){return this.lastRead=this.lastRead.then(function(){return t.serialNext()}),[2,this.lastRead]})})},e.prototype.serialNext=function(){return t_(this,void 0,void 0,function(){var t;return tS(this,function(e){switch(e.label){case 0:e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.upstream.next()];case 2:return[2,e.sent()];case 3:return t=e.sent(),this.handler(t)?[3,4]:[2,{value:null,done:!0}];case 4:return[3,0];case 5:return[2]}})})},e}(tz),tK=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.transform=n,r}return tw(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> AsyncMap"},e.prototype.next=function(){return t_(this,void 0,void 0,function(){var t,e,n,r,i,o,s;return tS(this,function(u){switch(u.label){case 0:return[4,this.upstream.next()];case 1:return(t=u.sent()).done?[2,{value:null,done:!0}]:(e=a.d_S.getTensorsInContainer(t.value),[4,this.transform(t.value)]);case 2:for(n=u.sent(),r=a.d_S.getTensorsInContainer(n),i=0,o=e;i<o.length;i++)s=o[i],a.d_S.isTensorInList(s,r)||s.dispose();return[2,{value:n,done:!1}]}})})},e}(tz),tX=function(t){function e(){var e=t.call(this)||this;return e.outputQueue=new tj,e.lastRead=Promise.resolve({value:null,done:!1}),e}return tw(e,t),e.prototype.next=function(){return t_(this,void 0,void 0,function(){var t=this;return tS(this,function(e){return this.lastRead=this.lastRead.then(function(){return t.serialNext()}),[2,this.lastRead]})})},e.prototype.serialNext=function(){return t_(this,void 0,void 0,function(){return tS(this,function(t){switch(t.label){case 0:return 0!==this.outputQueue.length()?[3,2]:[4,this.pump()];case 1:return t.sent()?[3,0]:[2,{value:null,done:!0}];case 2:return[2,{value:this.outputQueue.shift(),done:!1}]}})})},e}(tz),tY=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.transform=n,r}return tw(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> Flatmap"},e.prototype.pump=function(){return t_(this,void 0,void 0,function(){var t,e,n,r,i,o,s;return tS(this,function(u){switch(u.label){case 0:return[4,this.upstream.next()];case 1:if((t=u.sent()).done)return[2,!1];for(e=a.d_S.getTensorsInContainer(t.value),n=this.transform(t.value),r=a.d_S.getTensorsInContainer(n),this.outputQueue.pushAll(n),i=0,o=e;i<o.length;i++)s=o[i],a.d_S.isTensorInList(s,r)||s.dispose();return[2,!0]}})})},e}(tX),tJ=function(t){function e(e,n){var r=t.call(this)||this;return r.baseErrorHandler=n,r.lastRead=null,r.iterator=null,r.moreIterators=e,r}return tw(e,t),e.prototype.summary=function(){return"TODO: fill in upstream of chained summaries -> Chained"},e.prototype.next=function(){return t_(this,void 0,void 0,function(){return tS(this,function(t){return this.lastRead=this.readFromChain(this.lastRead),[2,this.lastRead]})})},e.prototype.readFromChain=function(t){return t_(this,void 0,void 0,function(){var e,n;return tS(this,function(r){switch(r.label){case 0:return[4,t];case 1:return r.sent(),null!=this.iterator?[3,3]:[4,this.moreIterators.next()];case 2:if((e=r.sent()).done)return[2,{value:null,done:!0}];this.iterator=e.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler)),r.label=3;case 3:return[4,this.iterator.next()];case 4:return(n=r.sent()).done?(this.iterator=null,[2,this.readFromChain(t)]):[2,n]}})})},e}(tz);!function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"}(tL||(tL={})),function(t){function e(e,n){void 0===n&&(n=tL.FAIL);var r=t.call(this)||this;return r.iterators=e,r.mismatchMode=n,r.count=0,r.currentPromise=null,r}tw(e,t),e.prototype.summary=function(){return"{TODO: fill in upstream of zip summaries} -> Zip"},e.prototype.nextState=function(t){return t_(this,void 0,void 0,function(){var e,n,r;function i(t){return t instanceof tz?{value:t.next().then(function(t){return e++,t.done&&n++,t.value}),recurse:!1}:{value:null,recurse:!0}}return tS(this,function(a){switch(a.label){case 0:return[4,t];case 1:return a.sent(),e=0,n=0,[4,function(t,e){return t_(this,void 0,void 0,function(){var n,r,i,a,o,s;return tS(this,function(u){switch(u.label){case 0:tk(t,e,n=new Map),r=0,i=Array.from(n.keys()),u.label=1;case 1:return r<i.length?(a=i[r],(o=n.get(a))instanceof Promise?[4,o]:[3,3]):[3,4];case 2:s=u.sent(),n.set(a,s),u.label=3;case 3:return r++,[3,1];case 4:return[2,tk(t,e,n)]}})})}(this.iterators,i)];case 2:if(r=a.sent(),e===n)return[2,{value:null,done:!0}];if(n>0)switch(this.mismatchMode){case tL.FAIL:throw Error("Zipped streams should have the same length. Mismatched at element "+this.count+".");case tL.SHORTEST:return[2,{value:null,done:!0}];case tL.LONGEST:}return this.count++,[2,{value:r,done:!1}]}})})},e.prototype.next=function(){return t_(this,void 0,void 0,function(){return tS(this,function(t){return this.currentPromise=this.nextState(this.currentPromise),[2,this.currentPromise]})})}}(tz);var t0=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.bufferSize=n,r.buffer=new tR(n),r}return tw(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> Prefetch"},e.prototype.refill=function(){for(;!this.buffer.isFull();){var t=this.upstream.next();this.buffer.push(t)}},e.prototype.next=function(){return this.refill(),this.buffer.shift()},e}(tz),t1=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.upstream=e,i.windowSize=n,i.upstreamExhausted=!1,i.random=tC(r||a.ZSL.now().toString()),i.lastRead=Promise.resolve({value:null,done:!1}),i}return tw(e,t),e.prototype.next=function(){return t_(this,void 0,void 0,function(){var t=this;return tS(this,function(e){return this.lastRead=this.lastRead.then(function(){return t.serialNext()}),[2,this.lastRead]})})},e.prototype.randomInt=function(t){return Math.floor(this.random()*t)},e.prototype.chooseIndex=function(){return this.randomInt(this.buffer.length())},e.prototype.serialNext=function(){return t_(this,void 0,void 0,function(){var t,e;return tS(this,function(n){switch(n.label){case 0:this.upstreamExhausted||this.refill(),n.label=1;case 1:return this.buffer.isEmpty()?[3,3]:(t=this.chooseIndex(),[4,this.buffer.shuffleExcise(t)]);case 2:return(e=n.sent()).done?(this.upstreamExhausted=!0,[3,1]):(this.refill(),[2,e]);case 3:return[2,{value:null,done:!0}]}})})},e}(t0),t2=function(){function t(){this.size=null}return t.prototype.batch=function(t,e){var n=this;void 0===e&&(e=!0);var r=this;return a.ZSL.assert(t>0,function(){return"batchSize needs to be positive, but it is\n      "+t}),t3(function(){return t_(n,void 0,void 0,function(){return tS(this,function(n){switch(n.label){case 0:return[4,r.iterator()];case 1:return[2,n.sent().columnMajorBatch(t,e,t4)]}})})},this.size===1/0||null==this.size?this.size:e?Math.ceil(this.size/t):Math.floor(this.size/t))},t.prototype.concatenate=function(t){var e=this,n=this;return t3(function(){return t_(e,void 0,void 0,function(){var e,r;return tS(this,function(i){switch(i.label){case 0:return[4,n.iterator()];case 1:return r=(e=i.sent()).concatenate,[4,t.iterator()];case 2:return[2,r.apply(e,[i.sent()])]}})})},this.size===1/0||t.size===1/0?1/0:null!=this.size&&null!=t.size?this.size+t.size:null)},t.prototype.filter=function(t){var e=this,n=this;return t3(function(){return t_(e,void 0,void 0,function(){return tS(this,function(e){switch(e.label){case 0:return[4,n.iterator()];case 1:return[2,e.sent().filter(function(e){return(0,a.DZQ)(function(){return t(e)})})]}})})},this.size===1/0?1/0:null)},t.prototype.forEachAsync=function(t){return t_(this,void 0,void 0,function(){return tS(this,function(e){switch(e.label){case 0:return[4,this.iterator()];case 1:return[2,e.sent().forEachAsync(t)]}})})},t.prototype.forEach=function(t){return t_(this,void 0,void 0,function(){return tS(this,function(e){return(0,a.fLc)("dataset.forEach() is deprecated and will be removed. Please use dataset.forEachAsync() instead"),[2,this.forEachAsync(t)]})})},t.prototype.map=function(t){var e=this,n=this;return t3(function(){return t_(e,void 0,void 0,function(){return tS(this,function(e){switch(e.label){case 0:return[4,n.iterator()];case 1:return[2,e.sent().map(function(e){return(0,a.DZQ)(function(){return t(e)})})]}})})},this.size)},t.prototype.mapAsync=function(t){var e=this,n=this;return t3(function(){return t_(e,void 0,void 0,function(){return tS(this,function(e){switch(e.label){case 0:return[4,n.iterator()];case 1:return[2,e.sent().mapAsync(t)]}})})},this.size)},t.prototype.prefetch=function(t){var e=this;if(null==t)throw RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var n=this;return t3(function(){return t_(e,void 0,void 0,function(){return tS(this,function(e){switch(e.label){case 0:return[4,n.iterator()];case 1:return[2,e.sent().prefetch(t)]}})})},this.size)},t.prototype.repeat=function(t){var e=this,n=this;return t3(function(){return t_(e,void 0,void 0,function(){var e=this;return tS(this,function(r){return[2,new tJ(new tW(function(){return t_(e,void 0,void 0,function(){var t;return tS(this,function(e){switch(e.label){case 0:return t={},[4,n.iterator()];case 1:return[2,(t.value=e.sent(),t.done=!1,t)]}})})}).take(t),void 0)]})})},null!=this.size&&t>0?this.size*t:0===t?0:null!=this.size&&(void 0===t||t<0)?1/0:null)},t.prototype.skip=function(t){var e=this,n=this;return t3(function(){return t_(e,void 0,void 0,function(){return tS(this,function(e){switch(e.label){case 0:return[4,n.iterator()];case 1:return[2,e.sent().skip(t)]}})})},null!=this.size&&t>=0&&this.size>=t?this.size-t:null!=this.size&&(this.size<t||void 0===t||t<0)?0:null)},t.prototype.shuffle=function(t,e,n){var r=this;if(void 0===n&&(n=!0),null==t||t<0)throw null==this.size?RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting bufferSize to the dataset size ("+this.size+" elements)");var i=this,o=tC(e||a.ZSL.now().toString());return t3(function(){return t_(r,void 0,void 0,function(){var e;return tS(this,function(r){switch(r.label){case 0:return e=o.int32(),n&&(e+=o.int32()),[4,i.iterator()];case 1:return[2,r.sent().shuffle(t,e.toString())]}})})},this.size)},t.prototype.take=function(t){var e=this,n=this;return t3(function(){return t_(e,void 0,void 0,function(){return tS(this,function(e){switch(e.label){case 0:return[4,n.iterator()];case 1:return[2,e.sent().take(t)]}})})},null!=this.size&&this.size>t?t:null!=this.size&&this.size<=t?this.size:null)},t.prototype.toArray=function(){return t_(this,void 0,void 0,function(){return tS(this,function(t){switch(t.label){case 0:if(this.size===1/0)throw Error("Can not convert infinite data stream to array.");return[4,this.iterator()];case 1:return[2,t.sent().toArray()]}})})},t.prototype.toArrayForTest=function(){return t_(this,void 0,void 0,function(){return tS(this,function(t){switch(t.label){case 0:if(this.size===1/0)throw Error("Can not convert infinite data stream to array.");return[4,this.iterator()];case 1:return[2,t.sent().toArrayForTest()]}})})},t.MAX_BUFFER_SIZE=1e4,t}();function t3(t,e){return void 0===e&&(e=null),new(function(n){function r(){var t=null!==n&&n.apply(this,arguments)||this;return t.size=e,t}return tw(r,n),r.prototype.iterator=function(){return t_(this,void 0,void 0,function(){return tS(this,function(e){return[2,t()]})})},r}(t2))}function t4(t){var e,n;return null===t?null:null==(e=t[0])||null===(n=e)||"object"!=typeof n&&"function"!=typeof n||Array.isArray(e)||"object"==typeof e&&e instanceof a.qYS||a.ZSL.isTypedArray(e)?{value:function(t){if(0===t.length)throw Error("Can't make a batch of zero elements.");return t[0]instanceof a.qYS?(0,a.t$z)(t):(0,a.OEK)(t)}(t),recurse:!1}:{value:null,recurse:!0}}var t5=function(t){function e(e){var n=t.call(this)||this;return n.input=e,n}return tw(e,t),e.prototype.iterator=function(){return t_(this,void 0,void 0,function(){return tS(this,function(t){switch(t.label){case 0:return[4,this.input.iterator()];case 1:return[2,t.sent().decodeUTF8().split("\n").map(function(t){return t.endsWith("\r")&&(t=t.slice(0,-1)),t})]}})})},e}(t2),t6=Symbol("out"),t8=Symbol("field"),t7=Symbol("quote"),t9=Symbol("quoteafterquote"),et=Symbol("quoteinquote"),ee=(function(t){function e(e,n){var r=t.call(this)||this;return r.input=e,r.hasHeader=!0,r.fullColumnNames=null,r.columnNamesValidated=!1,r.columnConfigs=null,r.configuredColumnsOnly=!1,r.delimiter=",",r.delimWhitespace=!1,r.base=new t5(e),n||(n={}),r.hasHeader=!1!==n.hasHeader,r.fullColumnNames=n.columnNames,r.columnConfigs=n.columnConfigs,r.configuredColumnsOnly=n.configuredColumnsOnly,n.delimWhitespace?(a.ZSL.assert(null==n.delimiter,function(){return"Delimiter should not be provided when delimWhitespace is true."}),r.delimWhitespace=!0,r.delimiter=" "):r.delimiter=n.delimiter?n.delimiter:",",r}tw(e,t),e.prototype.columnNames=function(){return t_(this,void 0,void 0,function(){return tS(this,function(t){switch(t.label){case 0:return this.columnNamesValidated?[3,2]:[4,this.setColumnNames()];case 1:t.sent(),t.label=2;case 2:return[2,this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames]}})})},e.prototype.setColumnNames=function(){return t_(this,void 0,void 0,function(){var t,e,n,r,i,o,s=this;return tS(this,function(u){switch(u.label){case 0:return[4,this.maybeReadHeaderLine()];case 1:if(t=u.sent(),!this.fullColumnNames&&!t)throw Error("Column names must be provided if there is no header line.");if(this.fullColumnNames&&t&&a.ZSL.assert(t.length===this.fullColumnNames.length,function(){return"The length of provided columnNames ("+s.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+t.length.toString()+")."}),this.fullColumnNames||(this.fullColumnNames=t),n=Object.keys(e=this.fullColumnNames.reduce(function(t,e){return t[e]=t[e]+1||1,t},{})).filter(function(t){return e[t]>1}),a.ZSL.assert(0===n.length,function(){return"Duplicate column names found: "+n.toString()}),this.columnConfigs){for(r=0,i=Object.keys(this.columnConfigs);r<i.length;r++)if(o=i[r],-1===this.fullColumnNames.indexOf(o))throw Error('The key "'+o+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").")}return this.columnNamesValidated=!0,[2]}})})},e.prototype.maybeReadHeaderLine=function(){return t_(this,void 0,void 0,function(){var t,e;return tS(this,function(n){switch(n.label){case 0:return this.hasHeader?[4,this.base.iterator()]:[3,3];case 1:return[4,n.sent().next()];case 2:if((t=n.sent()).done)throw Error("No data was found for CSV parsing.");return e=t.value,[2,this.parseRow(e,!1)];case 3:return[2,null]}})})},e.prototype.iterator=function(){return t_(this,void 0,void 0,function(){var t,e=this;return tS(this,function(n){switch(n.label){case 0:return this.columnNamesValidated?[3,2]:[4,this.setColumnNames()];case 1:n.sent(),n.label=2;case 2:return[4,this.base.iterator()];case 3:return t=n.sent(),this.hasHeader&&(t=t.skip(1)),[2,t.map(function(t){return e.makeDataElement(t)})]}})})},e.prototype.makeDataElement=function(t){for(var e=this.parseRow(t),n={},r={},i=0;i<this.fullColumnNames.length;i++){var a=this.fullColumnNames[i],o=this.columnConfigs?this.columnConfigs[a]:null;if(!this.configuredColumnsOnly||o){var s=e[i],u=null;if(""===s)if(o&&void 0!==o.default)u=o.default;else{if(o&&(o.required||o.isLabel))throw Error("Required column "+a+" is empty in this line: "+t);u=void 0}else{var c=Number(s);if(isNaN(c))u=o&&"bool"===o.dtype?this.getBoolean(s):s;else if(o&&o.dtype)switch(o.dtype){case"float32":default:u=c;break;case"int32":u=Math.floor(c);break;case"bool":u=this.getBoolean(s)}else u=c}o&&o.isLabel?r[a]=u:n[a]=u}}return 0===Object.keys(r).length?n:{xs:n,ys:r}},e.prototype.getBoolean=function(t){return+("1"===t||"true"===t.toLowerCase())},e.prototype.parseRow=function(t,e){void 0===e&&(e=!0);for(var n=[],r=0,i=t.length,a=t6,o=0;o<i;o++)switch(a){case t6:switch(t.charAt(o)){case'"':r=o+1,a=t7;break;case this.delimiter:if(r=o+1," "===this.delimiter&&this.delimWhitespace)break;n.push(""),a=t6;break;default:a=t8,r=o}break;case t8:t.charAt(o)===this.delimiter&&(n.push(t.substring(r,o)),a=t6,r=o+1);break;case t7:'"'===t.charAt(o)&&(a=t9);break;case t9:switch(t.charAt(o)){case this.delimiter:n.push(t.substring(r,o-1)),a=t6,r=o+1;break;case'"':a=t7;break;default:a=et}break;case et:'"'===t.charAt(o)&&(a=t7)}if(a===t9?n.push(t.substring(r,i-1)):n.push(t.substring(r)),e&&n.length!==this.fullColumnNames.length)throw Error("Invalid row in csv file. Should have "+this.fullColumnNames.length+" elements in a row, but got "+n);return n}}(t2),function(t){function e(e){var n=t.call(this)||this;n.microphoneConfig=e,n.isClosed=!1,n.fftSize=e.fftSize||1024;var r=Math.log2(n.fftSize);if(n.fftSize<0||r<4||r>14||!Number.isInteger(r))throw Error("Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got "+n.fftSize);if(n.numFrames=e.numFramesPerSpectrogram||43,n.sampleRateHz=e.sampleRateHz,n.columnTruncateLength=e.columnTruncateLength||n.fftSize,n.audioTrackConstraints=e.audioTrackConstraints,n.smoothingTimeConstant=e.smoothingTimeConstant||0,n.includeSpectrogram=!1!==e.includeSpectrogram,n.includeWaveform=!0===e.includeWaveform,!n.includeSpectrogram&&!n.includeWaveform)throw Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.");return n}tw(e,t),e.prototype.summary=function(){return"microphone"},e.create=function(t){return void 0===t&&(t={}),t_(this,void 0,void 0,function(){var n;return tS(this,function(r){switch(r.label){case 0:if((0,a._K2)().get("IS_NODE"))throw Error("microphone API is only supported in browser environment.");return[4,(n=new e(t)).start()];case 1:return r.sent(),[2,n]}})})},e.prototype.start=function(){return t_(this,void 0,void 0,function(){var t,e,n;return tS(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t=this,[4,navigator.mediaDevices.getUserMedia({audio:null==this.audioTrackConstraints||this.audioTrackConstraints,video:!1})];case 1:return t.stream=r.sent(),[3,3];case 2:throw Error("Error thrown while initializing video stream: "+r.sent().message);case 3:if(!this.stream)throw Error("Could not obtain audio from microphone.");if(e=window.AudioContext||window.webkitAudioContext,this.audioContext=new e,this.sampleRateHz){if(this.audioContext.sampleRate!==this.sampleRateHz)throw Error("Mismatch in sampling rate: Expected: "+this.sampleRateHz+"; Actual: "+this.audioContext.sampleRate)}else this.sampleRateHz=this.audioContext.sampleRate;return n=this.audioContext.createMediaStreamSource(this.stream),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,n.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize),[2]}})})},e.prototype.next=function(){return t_(this,void 0,void 0,function(){var t,e,n,r,i;return tS(this,function(a){switch(a.label){case 0:return this.isClosed?[2,{value:null,done:!0}]:[4,this.getAudioData()];case 1:return n=a.sent(),this.includeSpectrogram&&(r=this.flattenQueue(n.freqDataQueue),t=this.getTensorFromAudioDataArray(r,[this.numFrames,this.columnTruncateLength,1])),this.includeWaveform&&(i=this.flattenQueue(n.timeDataQueue),e=this.getTensorFromAudioDataArray(i,[this.numFrames*this.fftSize,1])),[2,{value:{spectrogram:t,waveform:e},done:!1}]}})})},e.prototype.capture=function(){return t_(this,void 0,void 0,function(){return tS(this,function(t){switch(t.label){case 0:return[4,this.next()];case 1:return[2,t.sent().value]}})})},e.prototype.getAudioData=function(){return t_(this,void 0,void 0,function(){var t,e,n,r=this;return tS(this,function(i){return t=[],e=[],n=0,[2,new Promise(function(i){var a=setInterval(function(){r.includeSpectrogram&&(r.analyser.getFloatFrequencyData(r.freqData),r.freqData[0]===-1/0&&i({freqDataQueue:t,timeDataQueue:e}),t.push(r.freqData.slice(0,r.columnTruncateLength))),r.includeWaveform&&(r.analyser.getFloatTimeDomainData(r.timeData),e.push(r.timeData.slice())),++n===r.numFrames&&(clearInterval(a),i({freqDataQueue:t,timeDataQueue:e}))},r.fftSize/r.sampleRateHz*1e3)})]})})},e.prototype.stop=function(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())},e.prototype.toArray=function(){throw Error("Can not convert infinite audio stream to array.")},e.prototype.getSampleRate=function(){return this.sampleRateHz},e.prototype.flattenQueue=function(t){var e=t[0].length,n=new Float32Array(t.length*e);return t.forEach(function(t,r){return n.set(t,r*e)}),n},e.prototype.getTensorFromAudioDataArray=function(t,e){var n=new Float32Array(a.ZSL.sizeFromShape(e));return n.set(t,n.length-t.length),(0,a.OEK)(n,e)}}(tz),function(t){function e(e,n){var r=t.call(this)||this;if(r.webcamVideoElement=e,r.webcamConfig=n,r.isClosed=!0,r.resize=!1,r.needToResize())if(r.resize=!0,r.cropSize=[r.webcamConfig.resizeHeight,r.webcamConfig.resizeWidth],r.cropBoxInd=(0,a.tGX)([0],"int32"),r.webcamConfig.centerCrop){var i=r.webcamConfig.resizeWidth/r.webcamVideoElement.width,o=r.webcamConfig.resizeHeight/r.webcamVideoElement.height,s=(1-i)/2,u=(1-o)/2;r.cropBox=(0,a.KtR)([u,s,o+u,s+i],[1,4])}else r.cropBox=(0,a.KtR)([0,0,1,1],[1,4]);return r}tw(e,t),e.prototype.summary=function(){return"webcam"},e.create=function(t,n){return void 0===n&&(n={}),t_(this,void 0,void 0,function(){var r;return tS(this,function(i){switch(i.label){case 0:if((0,a._K2)().get("IS_NODE"))throw Error("tf.data.webcam is only supported in browser environment.");if(!t){if(t=document.createElement("video"),!n.resizeWidth||!n.resizeHeight)throw Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");t.width=n.resizeWidth,t.height=n.resizeHeight}return[4,(r=new e(t,n)).start()];case 1:return i.sent(),[2,r]}})})},e.prototype.start=function(){return t_(this,void 0,void 0,function(){var t,e,n=this;return tS(this,function(r){switch(r.label){case 0:this.webcamConfig.facingMode&&a.ZSL.assert("user"===this.webcamConfig.facingMode||"environment"===this.webcamConfig.facingMode,function(){return"Invalid webcam facing mode: "+n.webcamConfig.facingMode+". Please provide 'user' or 'environment'"}),r.label=1;case 1:return r.trys.push([1,3,,4]),t=this,[4,navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})];case 2:return t.stream=r.sent(),[3,4];case 3:throw(e=r.sent()).message="Error thrown while initializing video stream: "+e.message,e;case 4:if(!this.stream)throw Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(t){console.log(t),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,[2,new Promise(function(t){n.webcamVideoElement.onloadedmetadata=function(){t()}})]}})})},e.prototype.next=function(){return t_(this,void 0,void 0,function(){var t;return tS(this,function(e){if(this.isClosed)return[2,{value:null,done:!0}];try{t=a.TaL.fromPixels(this.webcamVideoElement)}catch(t){throw Error("Error thrown converting video to pixels: "+JSON.stringify(t))}if(!this.resize)return[2,{value:t,done:!1}];try{return[2,{value:this.cropAndResizeFrame(t),done:!1}]}catch(t){throw Error("Error thrown cropping the video: "+t.message)}finally{t.dispose()}})})},e.prototype.needToResize=function(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)},e.prototype.cropAndResizeFrame=function(t){var e=this;return(0,a.DZQ)(function(){var n,r=t.toFloat().expandDims(0),i=(n=a.Slp.cropAndResize(r,e.cropBox,e.cropBoxInd,e.cropSize,"bilinear")).shape;return n.reshape(i.slice(1))})},e.prototype.capture=function(){return t_(this,void 0,void 0,function(){return tS(this,function(t){switch(t.label){case 0:return[4,this.next()];case 1:return[2,t.sent().value]}})})},e.prototype.stop=function(){this.stream.getTracks().forEach(function(t){return t.stop()});try{this.webcamVideoElement.srcObject=null}catch(t){console.log(t),this.webcamVideoElement.src=null}this.isClosed=!0},e.prototype.toArray=function(){throw Error("Can not convert infinite video stream to array.")}}(tz),function(){}),en=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tw(e,t),e.prototype.split=function(t){return new er(this,t)},e}(tz),er=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.impl=new ei(e,n),r}return tw(e,t),e.prototype.summary=function(){return this.impl.summary()},e.prototype.next=function(){return t_(this,void 0,void 0,function(){return tS(this,function(t){return[2,this.impl.next()]})})},e}(en),ei=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.separator=n,r.carryover="",r}return tw(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> Split('"+this.separator+"')"},e.prototype.pump=function(){return t_(this,void 0,void 0,function(){var t,e,n,r,i;return tS(this,function(a){switch(a.label){case 0:return[4,this.upstream.next()];case 1:if((t=a.sent()).done)return""===this.carryover?[2,!1]:(this.outputQueue.push(this.carryover),this.carryover="",[2,!0]);for((e=t.value.split(this.separator))[0]=this.carryover+e[0],n=0,r=e.slice(0,-1);n<r.length;n++)i=r[n],this.outputQueue.push(i);return this.carryover=e[e.length-1],[2,!0]}})})},e}(tX),ea=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tw(e,t),e.prototype.decodeUTF8=function(){return new eo(this)},e}(tz),eo=function(t){function e(e){var n=t.call(this)||this;return n.upstream=e,n.impl=new es(e),n}return tw(e,t),e.prototype.summary=function(){return this.impl.summary()},e.prototype.next=function(){return t_(this,void 0,void 0,function(){return tS(this,function(t){return[2,this.impl.next()]})})},e}(en),es=function(t){function e(e){var r=t.call(this)||this;return(r.upstream=e,(0,a._K2)().get("IS_BROWSER"))?r.decoder=new TextDecoder("utf-8"):r.decoder=new(n(9633)).StringDecoder("utf8"),r}return tw(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> Utf8"},e.prototype.pump=function(){return t_(this,void 0,void 0,function(){var t,e,n;return tS(this,function(r){switch(r.label){case 0:return[4,this.upstream.next()];case 1:return(t=r.sent()).done?[2,!1]:(e=t.value,n=(0,a._K2)().get("IS_BROWSER")?this.decoder.decode(e,{stream:!0}):this.decoder.write(tb.from(e.buffer)),this.outputQueue.push(n),[2,!0])}})})},e}(tX),eu=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this)||this;return r.file=e,r.options=n,a.ZSL.assert(e instanceof Uint8Array||!!(0,a._K2)().get("IS_BROWSER")&&(e instanceof File||e instanceof Blob),function(){return"FileChunkIterator only supports File, Blob and Uint8Array right now."}),r.offset=n.offset||0,r.chunkSize=n.chunkSize||1048576,r}return tw(e,t),e.prototype.summary=function(){return"FileChunks "+this.file},e.prototype.next=function(){return t_(this,void 0,void 0,function(){var t,e,n=this;return tS(this,function(r){switch(r.label){case 0:return this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size)?[2,{value:null,done:!0}]:(t=new Promise(function(t,e){var r=n.offset+n.chunkSize;if(n.file instanceof Uint8Array)t(new Uint8Array(n.file.slice(n.offset,r)));else{var i=new FileReader;i.onload=function(n){var r=i.result;if(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),!(r instanceof Uint8Array))return e(TypeError("FileReader returned unknown type."));t(r)},i.onabort=function(t){return e(Error("Aborted"))},i.onerror=function(t){return e(Error(t.type))};var a=n.file.slice(n.offset,r);i.readAsArrayBuffer(a)}n.offset=r}),e={},[4,t]);case 1:return[2,(e.value=r.sent(),e.done=!1,e)]}})})},e}(ea);function ec(t){return"string"==typeof t&&"file://"===t.substr(0,7)}var ep=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this)||this;return r.input=e,r.options=n,r}return tw(e,t),e.prototype.iterator=function(){return t_(this,void 0,void 0,function(){var t;return tS(this,function(e){return ec(this.input)&&(0,a._K2)().get("IS_NODE")&&(t=n(9430),this.input=t.readFileSync(this.input.substr(7))),[2,new eu(this.input,this.options)]})})},e}(ee);(function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this)||this;return r.url=e,r.fileOptions=n,r}tw(e,t),e.prototype.iterator=function(){return t_(this,void 0,void 0,function(){return tS(this,function(t){return ec(this.url)?[2,new ep(this.url,this.fileOptions).iterator()]:[2,function(t,e){return void 0===e&&(e={}),t_(this,void 0,void 0,function(){var n,r,i,o;return tS(this,function(s){switch(s.label){case 0:var u;return"string"==typeof t?n=t:(n=t.url,r={method:(u=t).method,headers:u.headers,body:u.body,mode:u.mode,credentials:u.credentials,cache:u.cache,redirect:u.redirect,referrer:u.referrer,integrity:u.integrity}),[4,a.ZSL.fetch(n,r)];case 1:return(i=s.sent()).ok?(o=Uint8Array.bind,[4,i.arrayBuffer()]):[3,3];case 2:return[2,new eu(new(o.apply(Uint8Array,[void 0,s.sent()])),e)];case 3:throw Error(i.statusText)}})})}(this.url,this.fileOptions)]})})}})(ee),a.bgA,o.u$},7494:(t,e,n)=>{"use strict";n.d(e,{E:()=>i});var r=n(2115);let i=n(8972).B?r.useLayoutEffect:r.useEffect},7869:(t,e,n)=>{"use strict";let r;function i(t){return null!==t&&"object"==typeof t&&"function"==typeof t.start}function a(t){let e=[{},{}];return t?.values.forEach((t,n)=>{e[0][n]=t.get(),e[1][n]=t.getVelocity()}),e}function o(t,e,n,r){if("function"==typeof e){let[i,o]=a(r);e=e(void 0!==n?n:t.custom,i,o)}if("string"==typeof e&&(e=t.variants&&t.variants[e]),"function"==typeof e){let[i,o]=a(r);e=e(void 0!==n?n:t.custom,i,o)}return e}function s(t,e,n){let r=t.getProps();return o(r,e,void 0!==n?n:r.custom,t)}function u(t,e){return t?.[e]??t?.default??t}n.d(e,{P:()=>aT});let c=t=>t,p={},l=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],h={value:null,addProjectionMetrics:null};function f(t,e){let n=!1,r=!0,i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=l.reduce((t,n)=>(t[n]=function(t,e){let n=new Set,r=new Set,i=!1,a=!1,o=new WeakSet,s={delta:0,timestamp:0,isProcessing:!1},u=0;function c(e){o.has(e)&&(p.schedule(e),t()),u++,e(s)}let p={schedule:(t,e=!1,a=!1)=>{let s=a&&i?n:r;return e&&o.add(t),s.has(t)||s.add(t),t},cancel:t=>{r.delete(t),o.delete(t)},process:t=>{if(s=t,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),e&&h.value&&h.value.frameloop[e].push(u),u=0,n.clear(),i=!1,a&&(a=!1,p.process(t))}};return p}(a,e?n:void 0),t),{}),{setup:s,read:u,resolveKeyframes:c,preUpdate:f,update:d,preRender:m,render:y,postRender:v}=o,g=()=>{let a=p.useManualTiming?i.timestamp:performance.now();n=!1,p.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(a-i.timestamp,40),1)),i.timestamp=a,i.isProcessing=!0,s.process(i),u.process(i),c.process(i),f.process(i),d.process(i),m.process(i),y.process(i),v.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(g))},b=()=>{n=!0,r=!0,i.isProcessing||t(g)};return{schedule:l.reduce((t,e)=>{let r=o[e];return t[e]=(t,e=!1,i=!1)=>(n||b(),r.schedule(t,e,i)),t},{}),cancel:t=>{for(let e=0;e<l.length;e++)o[l[e]].cancel(t)},state:i,steps:o}}let{schedule:d,cancel:m,state:y,steps:v}=f("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:c,!0),g=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],b=new Set(g),x=new Set(["width","height","top","left","right","bottom",...g]);function w(t,e){-1===t.indexOf(e)&&t.push(e)}function _(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}class S{constructor(){this.subscriptions=[]}add(t){return w(this.subscriptions,t),()=>_(this.subscriptions,t)}notify(t,e,n){let r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](t,e,n);else for(let i=0;i<r;i++){let r=this.subscriptions[i];r&&r(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function T(){r=void 0}let N={now:()=>(void 0===r&&N.set(y.isProcessing||p.useManualTiming?y.timestamp:performance.now()),r),set:t=>{r=t,queueMicrotask(T)}},E=t=>!isNaN(parseFloat(t)),P={current:void 0};class A{constructor(t,e={}){this.version="__VERSION__",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(t,e=!0)=>{let n=N.now();if(this.updatedAt!==n&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(t),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(let t of this.dependents)t.dirty();e&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=N.now(),null===this.canTrackVelocity&&void 0!==t&&(this.canTrackVelocity=E(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new S);let n=this.events[t].add(e);return"change"===t?()=>{n(),d.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(let t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t,e=!0){e&&this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t,e)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return P.current&&P.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){var t;let e=N.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;let n=Math.min(this.updatedAt-this.prevUpdatedAt,30);return t=parseFloat(this.current)-parseFloat(this.prevFrameValue),n?1e3/n*t:0}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function M(t,e){return new A(t,e)}let O=t=>Array.isArray(t),D=t=>!!(t&&t.getVelocity);function C(t,e){let n=t.getValue("willChange");if(D(n)&&n.add)return n.add(e);if(!n&&p.WillChange){let n=new p.WillChange("auto");t.addValue("willChange",n),n.add(e)}}let k=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),F="data-"+k("framerAppearId"),I=(t,e)=>n=>e(t(n)),V=(...t)=>t.reduce(I),R=(t,e,n)=>n>e?e:n<t?t:n,j=t=>1e3*t,L=t=>t/1e3,z={layout:0,mainThread:0,waapi:0},B=()=>{},W=()=>{},U=t=>e=>"string"==typeof e&&e.startsWith(t),Q=U("--"),q=U("var(--"),H=t=>!!q(t)&&Z.test(t.split("/*")[0].trim()),Z=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,G={test:t=>"number"==typeof t,parse:parseFloat,transform:t=>t},$={...G,transform:t=>R(0,1,t)},K={...G,default:1},X=t=>Math.round(1e5*t)/1e5,Y=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,J=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,tt=(t,e)=>n=>!!("string"==typeof n&&J.test(n)&&n.startsWith(t)||e&&null!=n&&Object.prototype.hasOwnProperty.call(n,e)),te=(t,e,n)=>r=>{if("string"!=typeof r)return r;let[i,a,o,s]=r.match(Y);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(o),alpha:void 0!==s?parseFloat(s):1}},tn=t=>R(0,255,t),tr={...G,transform:t=>Math.round(tn(t))},ti={test:tt("rgb","red"),parse:te("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+tr.transform(t)+", "+tr.transform(e)+", "+tr.transform(n)+", "+X($.transform(r))+")"},ta={test:tt("#"),parse:function(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:ti.transform},to=t=>({test:e=>"string"==typeof e&&e.endsWith(t)&&1===e.split(" ").length,parse:parseFloat,transform:e=>`${e}${t}`}),ts=to("deg"),tu=to("%"),tc=to("px"),tp=to("vh"),tl=to("vw"),th={...tu,parse:t=>tu.parse(t)/100,transform:t=>tu.transform(100*t)},tf={test:tt("hsl","hue"),parse:te("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+tu.transform(X(e))+", "+tu.transform(X(n))+", "+X($.transform(r))+")"},td={test:t=>ti.test(t)||ta.test(t)||tf.test(t),parse:t=>ti.test(t)?ti.parse(t):tf.test(t)?tf.parse(t):ta.parse(t),transform:t=>"string"==typeof t?t:t.hasOwnProperty("red")?ti.transform(t):tf.transform(t)},tm=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,ty="number",tv="color",tg=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function tb(t){let e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[],a=0,o=e.replace(tg,t=>(td.test(t)?(r.color.push(a),i.push(tv),n.push(td.parse(t))):t.startsWith("var(")?(r.var.push(a),i.push("var"),n.push(t)):(r.number.push(a),i.push(ty),n.push(parseFloat(t))),++a,"${}")).split("${}");return{values:n,split:o,indexes:r,types:i}}function tx(t){return tb(t).values}function tw(t){let{split:e,types:n}=tb(t),r=e.length;return t=>{let i="";for(let a=0;a<r;a++)if(i+=e[a],void 0!==t[a]){let e=n[a];e===ty?i+=X(t[a]):e===tv?i+=td.transform(t[a]):i+=t[a]}return i}}let t_=t=>"number"==typeof t?0:t,tS={test:function(t){return isNaN(t)&&"string"==typeof t&&(t.match(Y)?.length||0)+(t.match(tm)?.length||0)>0},parse:tx,createTransformer:tw,getAnimatableNone:function(t){let e=tx(t);return tw(t)(e.map(t_))}};function tT(t,e,n){return(n<0&&(n+=1),n>1&&(n-=1),n<1/6)?t+(e-t)*6*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function tN(t,e){return n=>n>0?e:t}let tE=(t,e,n)=>t+(e-t)*n,tP=(t,e,n)=>{let r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},tA=[ta,ti,tf],tM=t=>tA.find(e=>e.test(t));function tO(t){let e=tM(t);if(B(!!e,`'${t}' is not an animatable color. Use the equivalent color code instead.`),!e)return!1;let n=e.parse(t);return e===tf&&(n=function({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,n/=100;let i=0,a=0,o=0;if(e/=100){let r=n<.5?n*(1+e):n+e-n*e,s=2*n-r;i=tT(s,r,t+1/3),a=tT(s,r,t),o=tT(s,r,t-1/3)}else i=a=o=n;return{red:Math.round(255*i),green:Math.round(255*a),blue:Math.round(255*o),alpha:r}}(n)),n}let tD=(t,e)=>{let n=tO(t),r=tO(e);if(!n||!r)return tN(t,e);let i={...n};return t=>(i.red=tP(n.red,r.red,t),i.green=tP(n.green,r.green,t),i.blue=tP(n.blue,r.blue,t),i.alpha=tE(n.alpha,r.alpha,t),ti.transform(i))},tC=new Set(["none","hidden"]);function tk(t,e){return n=>tE(t,e,n)}function tF(t){return"number"==typeof t?tk:"string"==typeof t?H(t)?tN:td.test(t)?tD:tR:Array.isArray(t)?tI:"object"==typeof t?td.test(t)?tD:tV:tN}function tI(t,e){let n=[...t],r=n.length,i=t.map((t,n)=>tF(t)(t,e[n]));return t=>{for(let e=0;e<r;e++)n[e]=i[e](t);return n}}function tV(t,e){let n={...t,...e},r={};for(let i in n)void 0!==t[i]&&void 0!==e[i]&&(r[i]=tF(t[i])(t[i],e[i]));return t=>{for(let e in r)n[e]=r[e](t);return n}}let tR=(t,e)=>{let n=tS.createTransformer(e),r=tb(t),i=tb(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?tC.has(t)&&!i.values.length||tC.has(e)&&!r.values.length?function(t,e){return tC.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}(t,e):V(tI(function(t,e){let n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){let a=e.types[i],o=t.indexes[a][r[a]],s=t.values[o]??0;n[i]=s,r[a]++}return n}(r,i),i.values),n):(B(!0,`Complex values '${t}' and '${e}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),tN(t,e))};function tj(t,e,n){return"number"==typeof t&&"number"==typeof e&&"number"==typeof n?tE(t,e,n):tF(t)(t,e)}let tL=t=>{let e=({timestamp:e})=>t(e);return{start:(t=!0)=>d.update(e,t),stop:()=>m(e),now:()=>y.isProcessing?y.timestamp:N.now()}},tz=(t,e,n=10)=>{let r="",i=Math.max(Math.round(e/n),2);for(let e=0;e<i;e++)r+=t(e/(i-1))+", ";return`linear(${r.substring(0,r.length-2)})`};function tB(t){let e=0,n=t.next(e);for(;!n.done&&e<2e4;)e+=50,n=t.next(e);return e>=2e4?1/0:e}function tW(t,e,n){var r,i;let a=Math.max(e-5,0);return r=n-t(a),(i=e-a)?1e3/i*r:0}let tU={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1};function tQ(t,e){return t*Math.sqrt(1-e*e)}let tq=["duration","bounce"],tH=["stiffness","damping","mass"];function tZ(t,e){return e.some(e=>void 0!==t[e])}function tG(t=tU.visualDuration,e=tU.bounce){let n,r="object"!=typeof t?{visualDuration:t,keyframes:[0,1],bounce:e}:t,{restSpeed:i,restDelta:a}=r,o=r.keyframes[0],s=r.keyframes[r.keyframes.length-1],u={done:!1,value:o},{stiffness:c,damping:p,mass:l,duration:h,velocity:f,isResolvedFromDuration:d}=function(t){let e={velocity:tU.velocity,stiffness:tU.stiffness,damping:tU.damping,mass:tU.mass,isResolvedFromDuration:!1,...t};if(!tZ(t,tH)&&tZ(t,tq))if(t.visualDuration){let n=2*Math.PI/(1.2*t.visualDuration),r=n*n,i=2*R(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:tU.mass,stiffness:r,damping:i}}else{let n=function({duration:t=tU.duration,bounce:e=tU.bounce,velocity:n=tU.velocity,mass:r=tU.mass}){let i,a;B(t<=j(tU.maxDuration),"Spring duration must be 10 seconds or less");let o=1-e;o=R(tU.minDamping,tU.maxDamping,o),t=R(tU.minDuration,tU.maxDuration,L(t)),o<1?(i=e=>{let r=e*o,i=r*t;return .001-(r-n)/tQ(e,o)*Math.exp(-i)},a=e=>{let r=e*o*t,a=Math.pow(o,2)*Math.pow(e,2)*t,s=Math.exp(-r),u=tQ(Math.pow(e,2),o);return(r*n+n-a)*s*(-i(e)+.001>0?-1:1)/u}):(i=e=>-.001+Math.exp(-e*t)*((e-n)*t+1),a=e=>t*t*(n-e)*Math.exp(-e*t));let s=function(t,e,n){let r=n;for(let n=1;n<12;n++)r-=t(r)/e(r);return r}(i,a,5/t);if(t=j(t),isNaN(s))return{stiffness:tU.stiffness,damping:tU.damping,duration:t};{let e=Math.pow(s,2)*r;return{stiffness:e,damping:2*o*Math.sqrt(r*e),duration:t}}}(t);(e={...e,...n,mass:tU.mass}).isResolvedFromDuration=!0}return e}({...r,velocity:-L(r.velocity||0)}),m=f||0,y=p/(2*Math.sqrt(c*l)),v=s-o,g=L(Math.sqrt(c/l)),b=5>Math.abs(v);if(i||(i=b?tU.restSpeed.granular:tU.restSpeed.default),a||(a=b?tU.restDelta.granular:tU.restDelta.default),y<1){let t=tQ(g,y);n=e=>s-Math.exp(-y*g*e)*((m+y*g*v)/t*Math.sin(t*e)+v*Math.cos(t*e))}else if(1===y)n=t=>s-Math.exp(-g*t)*(v+(m+g*v)*t);else{let t=g*Math.sqrt(y*y-1);n=e=>{let n=Math.exp(-y*g*e),r=Math.min(t*e,300);return s-n*((m+y*g*v)*Math.sinh(r)+t*v*Math.cosh(r))/t}}let x={calculatedDuration:d&&h||null,next:t=>{let e=n(t);if(d)u.done=t>=h;else{let r=0===t?m:0;y<1&&(r=0===t?j(m):tW(n,t,e));let o=Math.abs(s-e)<=a;u.done=Math.abs(r)<=i&&o}return u.value=u.done?s:e,u},toString:()=>{let t=Math.min(tB(x),2e4),e=tz(e=>x.next(t*e).value,t,30);return t+"ms "+e},toTransition:()=>{}};return x}function t$({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:s,max:u,restDelta:c=.5,restSpeed:p}){let l,h,f=t[0],d={done:!1,value:f},m=t=>void 0!==s&&t<s||void 0!==u&&t>u,y=t=>void 0===s?u:void 0===u||Math.abs(s-t)<Math.abs(u-t)?s:u,v=n*e,g=f+v,b=void 0===o?g:o(g);b!==g&&(v=b-f);let x=t=>-v*Math.exp(-t/r),w=t=>b+x(t),_=t=>{let e=x(t),n=w(t);d.done=Math.abs(e)<=c,d.value=d.done?b:n},S=t=>{m(d.value)&&(l=t,h=tG({keyframes:[d.value,y(d.value)],velocity:tW(w,t,d.value),damping:i,stiffness:a,restDelta:c,restSpeed:p}))};return S(0),{calculatedDuration:null,next:t=>{let e=!1;return(h||void 0!==l||(e=!0,_(t),S(t)),void 0!==l&&t>=l)?h.next(t-l):(e||_(t),d)}}}tG.applyToOptions=t=>{let e=function(t,e=100,n){let r=n({...t,keyframes:[0,e]}),i=Math.min(tB(r),2e4);return{type:"keyframes",ease:t=>r.next(i*t).value/e,duration:L(i)}}(t,100,tG);return t.ease=e.ease,t.duration=j(e.duration),t.type="keyframes",t};let tK=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t;function tX(t,e,n,r){if(t===e&&n===r)return c;let i=e=>(function(t,e,n,r,i){let a,o,s=0;do(a=tK(o=e+(n-e)/2,r,i)-t)>0?n=o:e=o;while(Math.abs(a)>1e-7&&++s<12);return o})(e,0,1,t,n);return t=>0===t||1===t?t:tK(i(t),e,r)}let tY=tX(.42,0,1,1),tJ=tX(0,0,.58,1),t0=tX(.42,0,.58,1),t1=t=>Array.isArray(t)&&"number"!=typeof t[0],t2=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,t3=t=>e=>1-t(1-e),t4=tX(.33,1.53,.69,.99),t5=t3(t4),t6=t2(t5),t8=t=>(t*=2)<1?.5*t5(t):.5*(2-Math.pow(2,-10*(t-1))),t7=t=>1-Math.sin(Math.acos(t)),t9=t3(t7),et=t2(t7),ee=t=>Array.isArray(t)&&"number"==typeof t[0],en={linear:c,easeIn:tY,easeInOut:t0,easeOut:tJ,circIn:t7,circInOut:et,circOut:t9,backIn:t5,backInOut:t6,backOut:t4,anticipate:t8},er=t=>"string"==typeof t,ei=t=>{if(ee(t)){W(4===t.length,"Cubic bezier arrays must contain four numerical values.");let[e,n,r,i]=t;return tX(e,n,r,i)}return er(t)?(W(void 0!==en[t],`Invalid easing type '${t}'`),en[t]):t},ea=(t,e,n)=>{let r=e-t;return 0===r?1:(n-t)/r};function eo({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){var i;let a=t1(r)?r.map(ei):ei(r),o={done:!1,value:e[0]},s=function(t,e,{clamp:n=!0,ease:r,mixer:i}={}){let a=t.length;if(W(a===e.length,"Both input and output ranges must be the same length"),1===a)return()=>e[0];if(2===a&&e[0]===e[1])return()=>e[1];let o=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());let s=function(t,e,n){let r=[],i=n||p.mix||tj,a=t.length-1;for(let n=0;n<a;n++){let a=i(t[n],t[n+1]);e&&(a=V(Array.isArray(e)?e[n]||c:e,a)),r.push(a)}return r}(e,r,i),u=s.length,l=n=>{if(o&&n<t[0])return e[0];let r=0;if(u>1)for(;r<t.length-2&&!(n<t[r+1]);r++);let i=ea(t[r],t[r+1],n);return s[r](i)};return n?e=>l(R(t[0],t[a-1],e)):l}((i=n&&n.length===e.length?n:function(t){let e=[0];return!function(t,e){let n=t[t.length-1];for(let r=1;r<=e;r++){let i=ea(0,e,r);t.push(tE(n,1,i))}}(e,t.length-1),e}(e),i.map(e=>e*t)),e,{ease:Array.isArray(a)?a:e.map(()=>a||t0).splice(0,e.length-1)});return{calculatedDuration:t,next:e=>(o.value=s(e),o.done=e>=t,o)}}let es=t=>null!==t;function eu(t,{repeat:e,repeatType:n="loop"},r,i=1){let a=t.filter(es),o=i<0||e&&"loop"!==n&&e%2==1?0:a.length-1;return o&&void 0!==r?r:a[o]}let ec={decay:t$,inertia:t$,tween:eo,keyframes:eo,spring:tG};function ep(t){"string"==typeof t.type&&(t.type=ec[t.type])}class el{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}let eh=t=>t/100;class ef extends el{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=(t=!0)=>{if(t){let{motionValue:t}=this.options;t&&t.updatedAt!==N.now()&&this.tick(N.now())}this.isStopped=!0,"idle"!==this.state&&(this.teardown(),this.options.onStop?.())},z.mainThread++,this.options=t,this.initAnimation(),this.play(),!1===t.autoplay&&this.pause()}initAnimation(){let{options:t}=this;ep(t);let{type:e=eo,repeat:n=0,repeatDelay:r=0,repeatType:i,velocity:a=0}=t,{keyframes:o}=t,s=e||eo;s!==eo&&"number"!=typeof o[0]&&(this.mixKeyframes=V(eh,tj(o[0],o[1])),o=[0,100]);let u=s({...t,keyframes:o});"mirror"===i&&(this.mirroredGenerator=s({...t,keyframes:[...o].reverse(),velocity:-a})),null===u.calculatedDuration&&(u.calculatedDuration=tB(u));let{calculatedDuration:c}=u;this.calculatedDuration=c,this.resolvedDuration=c+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=u}updateTime(t){let e=Math.round(t-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){let{generator:n,totalDuration:r,mixKeyframes:i,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:s}=this;if(null===this.startTime)return n.next(0);let{delay:u=0,keyframes:c,repeat:p,repeatType:l,repeatDelay:h,type:f,onUpdate:d,finalKeyframe:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-r/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);let y=this.currentTime-u*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?y<0:y>r;this.currentTime=Math.max(y,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=r);let g=this.currentTime,b=n;if(p){let t=Math.min(this.currentTime,r)/o,e=Math.floor(t),n=t%1;!n&&t>=1&&(n=1),1===n&&e--,(e=Math.min(e,p+1))%2&&("reverse"===l?(n=1-n,h&&(n-=h/o)):"mirror"===l&&(b=a)),g=R(0,1,n)*o}let x=v?{done:!1,value:c[0]}:b.next(g);i&&(x.value=i(x.value));let{done:w}=x;v||null===s||(w=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);let _=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return _&&f!==t$&&(x.value=eu(c,this.options,m,this.speed)),d&&d(x.value),_&&this.finish(),x}then(t,e){return this.finished.then(t,e)}get duration(){return L(this.calculatedDuration)}get time(){return L(this.currentTime)}set time(t){t=j(t),this.currentTime=t,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(N.now());let e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=L(this.currentTime))}play(){if(this.isStopped)return;let{driver:t=tL,startTime:e}=this.options;this.driver||(this.driver=t(t=>this.tick(t))),this.options.onPlay?.();let n=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=n):null!==this.holdTime?this.startTime=n-this.holdTime:this.startTime||(this.startTime=e??n),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(N.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,z.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}let ed=t=>180*t/Math.PI,em=t=>ev(ed(Math.atan2(t[1],t[0]))),ey={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:em,rotateZ:em,skewX:t=>ed(Math.atan(t[1])),skewY:t=>ed(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},ev=t=>((t%=360)<0&&(t+=360),t),eg=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),eb=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),ex={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:eg,scaleY:eb,scale:t=>(eg(t)+eb(t))/2,rotateX:t=>ev(ed(Math.atan2(t[6],t[5]))),rotateY:t=>ev(ed(Math.atan2(-t[2],t[0]))),rotateZ:em,rotate:em,skewX:t=>ed(Math.atan(t[4])),skewY:t=>ed(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function ew(t){return+!!t.includes("scale")}function e_(t,e){let n,r;if(!t||"none"===t)return ew(e);let i=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);if(i)n=ex,r=i;else{let e=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=ey,r=e}if(!r)return ew(e);let a=n[e],o=r[1].split(",").map(eT);return"function"==typeof a?a(o):o[a]}let eS=(t,e)=>{let{transform:n="none"}=getComputedStyle(t);return e_(n,e)};function eT(t){return parseFloat(t.trim())}let eN=t=>t===G||t===tc,eE=new Set(["x","y","z"]),eP=g.filter(t=>!eE.has(t)),eA={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>e_(e,"x"),y:(t,{transform:e})=>e_(e,"y")};eA.translateX=eA.x,eA.translateY=eA.y;let eM=new Set,eO=!1,eD=!1,eC=!1;function ek(){if(eD){let t=Array.from(eM).filter(t=>t.needsMeasurement),e=new Set(t.map(t=>t.element)),n=new Map;e.forEach(t=>{let e=function(t){let e=[];return eP.forEach(n=>{let r=t.getValue(n);void 0!==r&&(e.push([n,r.get()]),r.set(+!!n.startsWith("scale")))}),e}(t);e.length&&(n.set(t,e),t.render())}),t.forEach(t=>t.measureInitialState()),e.forEach(t=>{t.render();let e=n.get(t);e&&e.forEach(([e,n])=>{t.getValue(e)?.set(n)})}),t.forEach(t=>t.measureEndState()),t.forEach(t=>{void 0!==t.suspendedScrollY&&window.scrollTo(0,t.suspendedScrollY)})}eD=!1,eO=!1,eM.forEach(t=>t.complete(eC)),eM.clear()}function eF(){eM.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(eD=!0)})}class eI{constructor(t,e,n,r,i,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=r,this.element=i,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(eM.add(this),eO||(eO=!0,d.read(eF),d.resolveKeyframes(ek))):(this.readKeyframes(),this.complete())}readKeyframes(){let{unresolvedKeyframes:t,name:e,element:n,motionValue:r}=this;if(null===t[0]){let i=r?.get(),a=t[t.length-1];if(void 0!==i)t[0]=i;else if(n&&e){let r=n.readValue(e,a);null!=r&&(t[0]=r)}void 0===t[0]&&(t[0]=a),r&&void 0===i&&r.set(t[0])}for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),eM.delete(this)}cancel(){"scheduled"===this.state&&(eM.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}let eV=t=>t.startsWith("--");function eR(t){let e;return()=>(void 0===e&&(e=t()),e)}let ej=eR(()=>void 0!==window.ScrollTimeline),eL={},ez=function(t,e){let n=eR(t);return()=>eL[e]??n()}(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(t){return!1}return!0},"linearEasing"),eB=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,eW={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:eB([0,.65,.55,1]),circOut:eB([.55,0,1,.45]),backIn:eB([.31,.01,.66,-.59]),backOut:eB([.33,1.53,.69,.99])};function eU(t){return"function"==typeof t&&"applyToOptions"in t}class eQ extends el{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;let{element:e,name:n,keyframes:r,pseudoElement:i,allowFlatten:a=!1,finalKeyframe:o,onComplete:s}=t;this.isPseudoElement=!!i,this.allowFlatten=a,this.options=t,W("string"!=typeof t.type,'animateMini doesn\'t support "type" as a string. Did you mean to import { spring } from "motion"?');let u=function({type:t,...e}){return eU(t)&&ez()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}(t);this.animation=function(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:s="easeOut",times:u}={},c){let p={[e]:n};u&&(p.offset=u);let l=function t(e,n){if(e)return"function"==typeof e?ez()?tz(e,n):"ease-out":ee(e)?eB(e):Array.isArray(e)?e.map(e=>t(e,n)||eW.easeOut):eW[e]}(s,i);Array.isArray(l)&&(p.easing=l),h.value&&z.waapi++;let f={delay:r,duration:i,easing:Array.isArray(l)?"linear":l,fill:"both",iterations:a+1,direction:"reverse"===o?"alternate":"normal"};c&&(f.pseudoElement=c);let d=t.animate(p,f);return h.value&&d.finished.finally(()=>{z.waapi--}),d}(e,n,r,u,i),!1===u.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){let t=eu(r,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(t):function(t,e,n){eV(e)?t.style.setProperty(e,n):t.style[e]=n}(e,n,t),this.animation.cancel()}s?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch(t){}}stop(){if(this.isStopped)return;this.isStopped=!0;let{state:t}=this;"idle"!==t&&"finished"!==t&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){return L(Number(this.animation.effect?.getComputedTiming?.().duration||0))}get time(){return L(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=j(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){return(this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&ej())?(this.animation.timeline=t,c):e(this)}}let eq={anticipate:t8,backInOut:t6,circInOut:et};class eH extends eQ{constructor(t){!function(t){"string"==typeof t.ease&&t.ease in eq&&(t.ease=eq[t.ease])}(t),ep(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){let{motionValue:e,onUpdate:n,onComplete:r,element:i,...a}=this.options;if(!e)return;if(void 0!==t)return void e.set(t);let o=new ef({...a,autoplay:!1}),s=j(this.finishedTime??this.time);e.setWithVelocity(o.sample(s-10).value,o.sample(s).value,10),o.stop()}}let eZ=(t,e)=>"zIndex"!==e&&!!("number"==typeof t||Array.isArray(t)||"string"==typeof t&&(tS.test(t)||"0"===t)&&!t.startsWith("url(")),eG=new Set(["opacity","clipPath","filter","transform"]),e$=eR(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class eK extends el{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a="loop",keyframes:o,name:s,motionValue:u,element:c,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=N.now();let l={autoplay:t,delay:e,type:n,repeat:r,repeatDelay:i,repeatType:a,name:s,motionValue:u,element:c,...p},h=c?.KeyframeResolver||eI;this.keyframeResolver=new h(o,(t,e,n)=>this.onKeyframesResolved(t,e,l,!n),s,u,c),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,e,n,r){this.keyframeResolver=void 0;let{name:i,type:a,velocity:o,delay:s,isHandoff:u,onUpdate:l}=n;this.resolvedAt=N.now(),!function(t,e,n,r){let i=t[0];if(null===i)return!1;if("display"===e||"visibility"===e)return!0;let a=t[t.length-1],o=eZ(i,e),s=eZ(a,e);return B(o===s,`You are trying to animate ${e} from "${i}" to "${a}". ${i} is not an animatable value - to enable this animation set ${i} to a value animatable to ${a} via the \`style\` property.`),!!o&&!!s&&(function(t){let e=t[0];if(1===t.length)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}(t)||("spring"===n||eU(n))&&r)}(t,i,a,o)&&((p.instantAnimations||!s)&&l?.(eu(t,n,e)),t[0]=t[t.length-1],n.duration=0,n.repeat=0);let h={startTime:r?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:e,...n,keyframes:t},f=!u&&function(t){let{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:o}=t;if(!e||!e.owner||!(e.owner.current instanceof HTMLElement))return!1;let{onUpdate:s,transformTemplate:u}=e.owner.getProps();return e$()&&n&&eG.has(n)&&("transform"!==n||!u)&&!s&&!r&&"mirror"!==i&&0!==a&&"inertia"!==o}(h)?new eH({...h,element:h.motionValue.owner.current}):new ef(h);f.finished.then(()=>this.notifyFinished()).catch(c),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),eC=!0,eF(),ek(),eC=!1),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}let eX=t=>null!==t,eY={type:"spring",stiffness:500,damping:25,restSpeed:10},eJ=t=>({type:"spring",stiffness:550,damping:0===t?2*Math.sqrt(550):30,restSpeed:10}),e0={type:"keyframes",duration:.8},e1={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},e2=(t,{keyframes:e})=>e.length>2?e0:b.has(t)?t.startsWith("scale")?eJ(e[1]):eY:e1,e3=(t,e,n,r={},i,a)=>o=>{let s=u(r,t)||{},c=s.delay||r.delay||0,{elapsed:l=0}=r;l-=j(c);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...s,delay:-l,onUpdate:t=>{e.set(t),s.onUpdate&&s.onUpdate(t)},onComplete:()=>{o(),s.onComplete&&s.onComplete()},name:t,motionValue:e,element:a?void 0:i};!function({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:s,from:u,elapsed:c,...p}){return!!Object.keys(p).length}(s)&&Object.assign(h,e2(t,h)),h.duration&&(h.duration=j(h.duration)),h.repeatDelay&&(h.repeatDelay=j(h.repeatDelay)),void 0!==h.from&&(h.keyframes[0]=h.from);let f=!1;if(!1!==h.type&&(0!==h.duration||h.repeatDelay)||(h.duration=0,0===h.delay&&(f=!0)),(p.instantAnimations||p.skipAnimations)&&(f=!0,h.duration=0,h.delay=0),h.allowFlatten=!s.type&&!s.ease,f&&!a&&void 0!==e.get()){let t=function(t,{repeat:e,repeatType:n="loop"},r){let i=t.filter(eX),a=e&&"loop"!==n&&e%2==1?0:i.length-1;return i[a]}(h.keyframes,s);if(void 0!==t)return void d.update(()=>{h.onUpdate(t),h.onComplete()})}return s.isSync?new ef(h):new eK(h)};function e4(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:o,...c}=e;r&&(a=r);let p=[],l=i&&t.animationState&&t.animationState.getState()[i];for(let e in c){let r=t.getValue(e,t.latestValues[e]??null),i=c[e];if(void 0===i||l&&function({protectedKeys:t,needsAnimating:e},n){let r=t.hasOwnProperty(n)&&!0!==e[n];return e[n]=!1,r}(l,e))continue;let o={delay:n,...u(a||{},e)},s=r.get();if(void 0!==s&&!r.isAnimating&&!Array.isArray(i)&&i===s&&!o.velocity)continue;let h=!1;if(window.MotionHandoffAnimation){let n=t.props[F];if(n){let t=window.MotionHandoffAnimation(n,e,d);null!==t&&(o.startTime=t,h=!0)}}C(t,e),r.start(e3(e,r,i,t.shouldReduceMotion&&x.has(e)?{type:!1}:o,t,h));let f=r.animation;f&&p.push(f)}return o&&Promise.all(p).then(()=>{d.update(()=>{o&&function(t,e){let{transitionEnd:n={},transition:r={},...i}=s(t,e)||{};for(let e in i={...i,...n}){var a;let n=O(a=i[e])?a[a.length-1]||0:a;t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,M(n))}}(t,o)})}),p}function e5(t,e,n={}){let r=s(t,e,"exit"===n.type?t.presenceContext?.custom:void 0),{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);let a=r?()=>Promise.all(e4(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(r=0)=>{let{delayChildren:a=0,staggerChildren:o,staggerDirection:s}=i;return function(t,e,n=0,r=0,i=1,a){let o=[],s=(t.variantChildren.size-1)*r,u=1===i?(t=0)=>t*r:(t=0)=>s-t*r;return Array.from(t.variantChildren).sort(e6).forEach((t,r)=>{t.notify("AnimationStart",e),o.push(e5(t,e,{...a,delay:n+u(r)}).then(()=>t.notify("AnimationComplete",e)))}),Promise.all(o)}(t,e,a+r,o,s,n)}:()=>Promise.resolve(),{when:u}=i;if(!u)return Promise.all([a(),o(n.delay)]);{let[t,e]="beforeChildren"===u?[a,o]:[o,a];return t().then(()=>e())}}function e6(t,e){return t.sortNodePosition(e)}function e8(t,e){if(!Array.isArray(e))return!1;let n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function e7(t){return"string"==typeof t||Array.isArray(t)}let e9=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],nt=["initial",...e9],ne=nt.length,nn=[...e9].reverse(),nr=e9.length;function ni(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function na(){return{animate:ni(!0),whileInView:ni(),whileHover:ni(),whileTap:ni(),whileDrag:ni(),whileFocus:ni(),exit:ni()}}class no{constructor(t){this.isMounted=!1,this.node=t}update(){}}class ns extends no{constructor(t){super(t),t.animationState||(t.animationState=function(t){let e=e=>Promise.all(e.map(({animation:e,options:n})=>(function(t,e,n={}){let r;if(t.notify("AnimationStart",e),Array.isArray(e))r=Promise.all(e.map(e=>e5(t,e,n)));else if("string"==typeof e)r=e5(t,e,n);else{let i="function"==typeof e?s(t,e,n.custom):e;r=Promise.all(e4(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})})(t,e,n))),n=na(),r=!0,a=e=>(n,r)=>{let i=s(t,r,"exit"===e?t.presenceContext?.custom:void 0);if(i){let{transition:t,transitionEnd:e,...r}=i;n={...n,...r,...e}}return n};function o(o){let{props:u}=t,c=function t(e){if(!e)return;if(!e.isControllingVariants){let n=e.parent&&t(e.parent)||{};return void 0!==e.props.initial&&(n.initial=e.props.initial),n}let n={};for(let t=0;t<ne;t++){let r=nt[t],i=e.props[r];(e7(i)||!1===i)&&(n[r]=i)}return n}(t.parent)||{},p=[],l=new Set,h={},f=1/0;for(let e=0;e<nr;e++){var d,m;let s=nn[e],y=n[s],v=void 0!==u[s]?u[s]:c[s],g=e7(v),b=s===o?y.isActive:null;!1===b&&(f=e);let x=v===c[s]&&v!==u[s]&&g;if(x&&r&&t.manuallyAnimateOnMount&&(x=!1),y.protectedKeys={...h},!y.isActive&&null===b||!v&&!y.prevProp||i(v)||"boolean"==typeof v)continue;let w=(d=y.prevProp,"string"==typeof(m=v)?m!==d:!!Array.isArray(m)&&!e8(m,d)),_=w||s===o&&y.isActive&&!x&&g||e>f&&g,S=!1,T=Array.isArray(v)?v:[v],N=T.reduce(a(s),{});!1===b&&(N={});let{prevResolvedValues:E={}}=y,P={...E,...N},A=e=>{_=!0,l.has(e)&&(S=!0,l.delete(e)),y.needsAnimating[e]=!0;let n=t.getValue(e);n&&(n.liveStyle=!1)};for(let t in P){let e=N[t],n=E[t];if(h.hasOwnProperty(t))continue;let r=!1;(O(e)&&O(n)?e8(e,n):e===n)?void 0!==e&&l.has(t)?A(t):y.protectedKeys[t]=!0:null!=e?A(t):l.add(t)}y.prevProp=v,y.prevResolvedValues=N,y.isActive&&(h={...h,...N}),r&&t.blockInitialAnimation&&(_=!1);let M=!(x&&w)||S;_&&M&&p.push(...T.map(t=>({animation:t,options:{type:s}})))}if(l.size){let e={};if("boolean"!=typeof u.initial){let n=s(t,Array.isArray(u.initial)?u.initial[0]:u.initial);n&&n.transition&&(e.transition=n.transition)}l.forEach(n=>{let r=t.getBaseTarget(n),i=t.getValue(n);i&&(i.liveStyle=!0),e[n]=r??null}),p.push({animation:e})}let y=!!p.length;return r&&(!1===u.initial||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(y=!1),r=!1,y?e(p):Promise.resolve()}return{animateChanges:o,setActive:function(e,r){if(n[e].isActive===r)return Promise.resolve();t.variantChildren?.forEach(t=>t.animationState?.setActive(e,r)),n[e].isActive=r;let i=o(e);for(let t in n)n[t].protectedKeys={};return i},setAnimateFunction:function(n){e=n(t)},getState:()=>n,reset:()=>{n=na(),r=!0}}}(t))}updateAnimationControlsSubscription(){let{animate:t}=this.node.getProps();i(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let nu=0;class nc extends no{constructor(){super(...arguments),this.id=nu++}update(){if(!this.node.presenceContext)return;let{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;let r=this.node.animationState.setActive("exit",!t);e&&!t&&r.then(()=>{e(this.id)})}mount(){let{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}let np={x:!1,y:!1};function nl(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}let nh=t=>"mouse"===t.pointerType?"number"!=typeof t.button||t.button<=0:!1!==t.isPrimary;function nf(t){return{point:{x:t.pageX,y:t.pageY}}}let nd=t=>e=>nh(e)&&t(e,nf(e));function nm(t,e,n,r){return nl(t,e,nd(n),r)}function ny({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function nv(t){return t.max-t.min}function ng(t,e,n,r=.5){t.origin=r,t.originPoint=tE(e.min,e.max,t.origin),t.scale=nv(n)/nv(e),t.translate=tE(n.min,n.max,t.origin)-t.originPoint,(t.scale>=.9999&&t.scale<=1.0001||isNaN(t.scale))&&(t.scale=1),(t.translate>=-.01&&t.translate<=.01||isNaN(t.translate))&&(t.translate=0)}function nb(t,e,n,r){ng(t.x,e.x,n.x,r?r.originX:void 0),ng(t.y,e.y,n.y,r?r.originY:void 0)}function nx(t,e,n){t.min=n.min+e.min,t.max=t.min+nv(e)}function nw(t,e,n){t.min=e.min-n.min,t.max=t.min+nv(e)}function n_(t,e,n){nw(t.x,e.x,n.x),nw(t.y,e.y,n.y)}let nS=()=>({translate:0,scale:1,origin:0,originPoint:0}),nT=()=>({x:nS(),y:nS()}),nN=()=>({min:0,max:0}),nE=()=>({x:nN(),y:nN()});function nP(t){return[t("x"),t("y")]}function nA(t){return void 0===t||1===t}function nM({scale:t,scaleX:e,scaleY:n}){return!nA(t)||!nA(e)||!nA(n)}function nO(t){return nM(t)||nD(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function nD(t){var e,n;return(e=t.x)&&"0%"!==e||(n=t.y)&&"0%"!==n}function nC(t,e,n,r,i){return void 0!==i&&(t=r+i*(t-r)),r+n*(t-r)+e}function nk(t,e=0,n=1,r,i){t.min=nC(t.min,e,n,r,i),t.max=nC(t.max,e,n,r,i)}function nF(t,{x:e,y:n}){nk(t.x,e.translate,e.scale,e.originPoint),nk(t.y,n.translate,n.scale,n.originPoint)}function nI(t,e){t.min=t.min+e,t.max=t.max+e}function nV(t,e,n,r,i=.5){let a=tE(t.min,t.max,i);nk(t,e,n,a,r)}function nR(t,e){nV(t.x,e.x,e.scaleX,e.scale,e.originX),nV(t.y,e.y,e.scaleY,e.scale,e.originY)}function nj(t,e){return ny(function(t,e){if(!e)return t;let n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(t.getBoundingClientRect(),e))}let nL=({current:t})=>t?t.ownerDocument.defaultView:null;function nz(t){return t&&"object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"current")}let nB=(t,e)=>Math.abs(t-e);class nW{constructor(t,e,{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let t=nq(this.lastMoveEventInfo,this.history),e=null!==this.startEvent,n=function(t,e){return Math.sqrt(nB(t.x,e.x)**2+nB(t.y,e.y)**2)}(t.offset,{x:0,y:0})>=3;if(!e&&!n)return;let{point:r}=t,{timestamp:i}=y;this.history.push({...r,timestamp:i});let{onStart:a,onMove:o}=this.handlers;e||(a&&a(this.lastMoveEvent,t),this.startEvent=this.lastMoveEvent),o&&o(this.lastMoveEvent,t)},this.handlePointerMove=(t,e)=>{this.lastMoveEvent=t,this.lastMoveEventInfo=nU(e,this.transformPagePoint),d.update(this.updatePoint,!0)},this.handlePointerUp=(t,e)=>{this.end();let{onEnd:n,onSessionEnd:r,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let a=nq("pointercancel"===t.type?this.lastMoveEventInfo:nU(e,this.transformPagePoint),this.history);this.startEvent&&n&&n(t,a),r&&r(t,a)},!nh(t))return;this.dragSnapToOrigin=i,this.handlers=e,this.transformPagePoint=n,this.contextWindow=r||window;let a=nU(nf(t),this.transformPagePoint),{point:o}=a,{timestamp:s}=y;this.history=[{...o,timestamp:s}];let{onSessionStart:u}=e;u&&u(t,nq(a,this.history)),this.removeListeners=V(nm(this.contextWindow,"pointermove",this.handlePointerMove),nm(this.contextWindow,"pointerup",this.handlePointerUp),nm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),m(this.updatePoint)}}function nU(t,e){return e?{point:e(t.point)}:t}function nQ(t,e){return{x:t.x-e.x,y:t.y-e.y}}function nq({point:t},e){return{point:t,delta:nQ(t,nH(e)),offset:nQ(t,e[0]),velocity:function(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null,i=nH(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>j(.1)));)n--;if(!r)return{x:0,y:0};let a=L(i.timestamp-r.timestamp);if(0===a)return{x:0,y:0};let o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}(e,.1)}}function nH(t){return t[t.length-1]}function nZ(t,e,n){return{min:void 0!==e?t.min+e:void 0,max:void 0!==n?t.max+n-(t.max-t.min):void 0}}function nG(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function n$(t,e,n){return{min:nK(t,e),max:nK(t,n)}}function nK(t,e){return"number"==typeof t?t:t[e]||0}let nX=new WeakMap;class nY{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=nE(),this.visualElement=t}start(t,{snapToCursor:e=!1}={}){let{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;let{dragSnapToOrigin:r}=this.getProps();this.panSession=new nW(t,{onSessionStart:t=>{let{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(nf(t).point)},onStart:(t,e)=>{let{drag:n,dragPropagation:r,onDragStart:i}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock=function(t){if("x"===t||"y"===t)if(np[t])return null;else return np[t]=!0,()=>{np[t]=!1};return np.x||np.y?null:(np.x=np.y=!0,()=>{np.x=np.y=!1})}(n),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),nP(t=>{let e=this.getAxisMotionValue(t).get()||0;if(tu.test(e)){let{projection:n}=this.visualElement;if(n&&n.layout){let r=n.layout.layoutBox[t];r&&(e=nv(r)*(parseFloat(e)/100))}}this.originPoint[t]=e}),i&&d.postRender(()=>i(t,e)),C(this.visualElement,"transform");let{animationState:a}=this.visualElement;a&&a.setActive("whileDrag",!0)},onMove:(t,e)=>{let{dragPropagation:n,dragDirectionLock:r,onDirectionLock:i,onDrag:a}=this.getProps();if(!n&&!this.openDragLock)return;let{offset:o}=e;if(r&&null===this.currentDirection){this.currentDirection=function(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}(o),null!==this.currentDirection&&i&&i(this.currentDirection);return}this.updateAxis("x",e.point,o),this.updateAxis("y",e.point,o),this.visualElement.render(),a&&a(t,e)},onSessionEnd:(t,e)=>this.stop(t,e),resumeAnimation:()=>nP(t=>"paused"===this.getAnimationState(t)&&this.getAxisMotionValue(t).animation?.play())},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,contextWindow:nL(this.visualElement)})}stop(t,e){let n=this.isDragging;if(this.cancel(),!n)return;let{velocity:r}=e;this.startAnimation(r);let{onDragEnd:i}=this.getProps();i&&d.postRender(()=>i(t,e))}cancel(){this.isDragging=!1;let{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;let{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,n){let{drag:r}=this.getProps();if(!n||!nJ(t,r,this.currentDirection))return;let i=this.getAxisMotionValue(t),a=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(a=function(t,{min:e,max:n},r){return void 0!==e&&t<e?t=r?tE(e,t,r.min):Math.max(t,e):void 0!==n&&t>n&&(t=r?tE(n,t,r.max):Math.min(t,n)),t}(a,this.constraints[t],this.elastic[t])),i.set(a)}resolveConstraints(){let{dragConstraints:t,dragElastic:e}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;t&&nz(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=function(t,{top:e,left:n,bottom:r,right:i}){return{x:nZ(t.x,n,i),y:nZ(t.y,e,r)}}(n.layoutBox,t):this.constraints=!1,this.elastic=function(t=.35){return!1===t?t=0:!0===t&&(t=.35),{x:n$(t,"left","right"),y:n$(t,"top","bottom")}}(e),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&nP(t=>{!1!==this.constraints&&this.getAxisMotionValue(t)&&(this.constraints[t]=function(t,e){let n={};return void 0!==e.min&&(n.min=e.min-t.min),void 0!==e.max&&(n.max=e.max-t.min),n}(n.layoutBox[t],this.constraints[t]))})}resolveRefConstraints(){var t;let{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!nz(e))return!1;let r=e.current;W(null!==r,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");let{projection:i}=this.visualElement;if(!i||!i.layout)return!1;let a=function(t,e,n){let r=nj(t,n),{scroll:i}=e;return i&&(nI(r.x,i.offset.x),nI(r.y,i.offset.y)),r}(r,i.root,this.visualElement.getTransformPagePoint()),o=(t=i.layout.layoutBox,{x:nG(t.x,a.x),y:nG(t.y,a.y)});if(n){let t=n(function({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}(o));this.hasMutatedConstraints=!!t,t&&(o=ny(t))}return o}startAnimation(t){let{drag:e,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),s=this.constraints||{};return Promise.all(nP(o=>{if(!nJ(o,e,this.currentDirection))return;let u=s&&s[o]||{};a&&(u={min:0,max:0});let c={type:"inertia",velocity:n?t[o]:0,bounceStiffness:r?200:1e6,bounceDamping:r?40:1e7,timeConstant:750,restDelta:1,restSpeed:10,...i,...u};return this.startAxisValueAnimation(o,c)})).then(o)}startAxisValueAnimation(t,e){let n=this.getAxisMotionValue(t);return C(this.visualElement,t),n.start(e3(t,n,0,e,this.visualElement,!1))}stopAnimation(){nP(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){nP(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){let e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps();return n[e]||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){nP(e=>{let{drag:n}=this.getProps();if(!nJ(e,n,this.currentDirection))return;let{projection:r}=this.visualElement,i=this.getAxisMotionValue(e);if(r&&r.layout){let{min:n,max:a}=r.layout.layoutBox[e];i.set(t[e]-tE(n,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!nz(e)||!n||!this.constraints)return;this.stopAnimation();let r={x:0,y:0};nP(t=>{let e=this.getAxisMotionValue(t);if(e&&!1!==this.constraints){let n=e.get();r[t]=function(t,e){let n=.5,r=nv(t),i=nv(e);return i>r?n=ea(e.min,e.max-r,t.min):r>i&&(n=ea(t.min,t.max-i,e.min)),R(0,1,n)}({min:n,max:n},this.constraints[t])}});let{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),nP(e=>{if(!nJ(e,t,null))return;let n=this.getAxisMotionValue(e),{min:i,max:a}=this.constraints[e];n.set(tE(i,a,r[e]))})}addListeners(){if(!this.visualElement.current)return;nX.set(this.visualElement,this);let t=nm(this.visualElement.current,"pointerdown",t=>{let{drag:e,dragListener:n=!0}=this.getProps();e&&n&&this.start(t)}),e=()=>{let{dragConstraints:t}=this.getProps();nz(t)&&t.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",e);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),d.read(e);let i=nl(window,"resize",()=>this.scalePositionWithinConstraints()),a=n.addEventListener("didUpdate",({delta:t,hasLayoutChanged:e})=>{this.isDragging&&e&&(nP(e=>{let n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))}),this.visualElement.render())});return()=>{i(),t(),r(),a&&a()}}getProps(){let t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:a=.35,dragMomentum:o=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:a,dragMomentum:o}}}function nJ(t,e,n){return(!0===e||e===t)&&(null===n||n===t)}class n0 extends no{constructor(t){super(t),this.removeGroupControls=c,this.removeListeners=c,this.controls=new nY(t)}mount(){let{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||c}unmount(){this.removeGroupControls(),this.removeListeners()}}let n1=t=>(e,n)=>{t&&d.postRender(()=>t(e,n))};class n2 extends no{constructor(){super(...arguments),this.removePointerDownListener=c}onPointerDown(t){this.session=new nW(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:nL(this.node)})}createPanHandlers(){let{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:n1(t),onStart:n1(e),onMove:n,onEnd:(t,e)=>{delete this.session,r&&d.postRender(()=>r(t,e))}}}mount(){this.removePointerDownListener=nm(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}var n3,n4,n5=n(5155);let{schedule:n6}=f(queueMicrotask,!1);var n8=n(2115),n7=n(2082),n9=n(869);let rt=(0,n8.createContext)({}),re={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function rn(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}let rr={correct:(t,e)=>{if(!e.target)return t;if("string"==typeof t)if(!tc.test(t))return t;else t=parseFloat(t);let n=rn(t,e.target.x),r=rn(t,e.target.y);return`${n}% ${r}%`}},ri={};class ra extends n8.Component{componentDidMount(){let{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=t;for(let t in rs)ri[t]=rs[t],Q(t)&&(ri[t].isCSSVariable=!0);i&&(e.group&&e.group.add(i),n&&n.register&&r&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),re.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){let{layoutDependency:e,visualElement:n,drag:r,isPresent:i}=this.props,{projection:a}=n;return a&&(a.isPresent=i,r||t.layoutDependency!==e||void 0===e||t.isPresent!==i?a.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?a.promote():a.relegate()||d.postRender(()=>{let t=a.getStack();t&&t.members.length||this.safeToRemove()}))),null}componentDidUpdate(){let{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),n6.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:r}=t;r&&(r.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){let{safeToRemove:t}=this.props;t&&t()}render(){return null}}function ro(t){let[e,n]=(0,n7.xQ)(),r=(0,n8.useContext)(n9.L);return(0,n5.jsx)(ra,{...t,layoutGroup:r,switchLayoutGroup:(0,n8.useContext)(rt),isPresent:e,safeToRemove:n})}let rs={borderRadius:{...rr,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:rr,borderTopRightRadius:rr,borderBottomLeftRadius:rr,borderBottomRightRadius:rr,boxShadow:{correct:(t,{treeScale:e,projectionDelta:n})=>{let r=tS.parse(t);if(r.length>5)return t;let i=tS.createTransformer(t),a=+("number"!=typeof r[0]),o=n.x.scale*e.x,s=n.y.scale*e.y;r[0+a]/=o,r[1+a]/=s;let u=tE(o,s,.5);return"number"==typeof r[2+a]&&(r[2+a]/=u),"number"==typeof r[3+a]&&(r[3+a]/=u),i(r)}}},ru=(t,e)=>t.depth-e.depth;class rc{constructor(){this.children=[],this.isDirty=!1}add(t){w(this.children,t),this.isDirty=!0}remove(t){_(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(ru),this.isDirty=!1,this.children.forEach(t)}}function rp(t){return D(t)?t.get():t}let rl=["TopLeft","TopRight","BottomLeft","BottomRight"],rh=rl.length,rf=t=>"string"==typeof t?parseFloat(t):t,rd=t=>"number"==typeof t||tc.test(t);function rm(t,e){return void 0!==t[e]?t[e]:t.borderRadius}let ry=rg(0,.5,t9),rv=rg(.5,.95,c);function rg(t,e,n){return r=>r<t?0:r>e?1:n(ea(t,e,r))}function rb(t,e){t.min=e.min,t.max=e.max}function rx(t,e){rb(t.x,e.x),rb(t.y,e.y)}function rw(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function r_(t,e,n,r,i){return t-=e,t=r+1/n*(t-r),void 0!==i&&(t=r+1/i*(t-r)),t}function rS(t,e,[n,r,i],a,o){!function(t,e=0,n=1,r=.5,i,a=t,o=t){if(tu.test(e)&&(e=parseFloat(e),e=tE(o.min,o.max,e/100)-o.min),"number"!=typeof e)return;let s=tE(a.min,a.max,r);t===a&&(s-=e),t.min=r_(t.min,e,n,s,i),t.max=r_(t.max,e,n,s,i)}(t,e[n],e[r],e[i],e.scale,a,o)}let rT=["x","scaleX","originX"],rN=["y","scaleY","originY"];function rE(t,e,n,r){rS(t.x,e,rT,n?n.x:void 0,r?r.x:void 0),rS(t.y,e,rN,n?n.y:void 0,r?r.y:void 0)}function rP(t){return 0===t.translate&&1===t.scale}function rA(t){return rP(t.x)&&rP(t.y)}function rM(t,e){return t.min===e.min&&t.max===e.max}function rO(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function rD(t,e){return rO(t.x,e.x)&&rO(t.y,e.y)}function rC(t){return nv(t.x)/nv(t.y)}function rk(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class rF{constructor(){this.members=[]}add(t){w(this.members,t),t.scheduleRender()}remove(t){if(_(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){let t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(t){let e,n=this.members.findIndex(e=>t===e);if(0===n)return!1;for(let t=n;t>=0;t--){let n=this.members[t];if(!1!==n.isPresent){e=n;break}}return!!e&&(this.promote(e),!0)}promote(t,e){let n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);let{crossfade:r}=t.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{let{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}let rI={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},rV=["","X","Y","Z"],rR={visibility:"hidden"},rj=0;function rL(t,e,n,r){let{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function rz({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(t={},n=e?.()){this.id=rj++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,h.value&&(rI.nodes=rI.calculatedTargetDeltas=rI.calculatedProjections=0),this.nodes.forEach(rU),this.nodes.forEach(rK),this.nodes.forEach(rX),this.nodes.forEach(rQ),h.addProjectionMetrics&&h.addProjectionMetrics(rI)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=t,this.root=n?n.root||n:this,this.path=n?[...n.path,n]:[],this.parent=n,this.depth=n?n.depth+1:0;for(let t=0;t<this.path.length;t++)this.path[t].shouldResetTransform=!0;this.root===this&&(this.nodes=new rc)}addEventListener(t,e){return this.eventHandlers.has(t)||this.eventHandlers.set(t,new S),this.eventHandlers.get(t).add(e)}notifyListeners(t,...e){let n=this.eventHandlers.get(t);n&&n.notify(...e)}hasListeners(t){return this.eventHandlers.has(t)}mount(e){if(this.instance)return;this.isSVG=e instanceof SVGElement&&"svg"!==e.tagName,this.instance=e;let{layoutId:n,layout:r,visualElement:i}=this.options;if(i&&!i.current&&i.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(r||n)&&(this.isLayoutDirty=!0),t){let n,r=()=>this.root.updateBlockedByResize=!1;t(e,()=>{this.root.updateBlockedByResize=!0,n&&n(),n=function(t,e){let n=N.now(),r=({timestamp:i})=>{let a=i-n;a>=250&&(m(r),t(a-e))};return d.setup(r,!0),()=>m(r)}(r,250),re.hasAnimatedSinceResize&&(re.hasAnimatedSinceResize=!1,this.nodes.forEach(r$))})}n&&this.root.registerSharedNode(n,this),!1!==this.options.animate&&i&&(n||r)&&this.addEventListener("didUpdate",({delta:t,hasLayoutChanged:e,hasRelativeLayoutChanged:n,layout:r})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let a=this.options.transition||i.getDefaultTransition()||r3,{onLayoutAnimationStart:o,onLayoutAnimationComplete:s}=i.getProps(),c=!this.targetLayout||!rD(this.targetLayout,r),p=!e&&n;if(this.options.layoutRoot||this.resumeFrom||p||e&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,p);let e={...u(a,"layout"),onPlay:o,onComplete:s};(i.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else e||r$(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let t=this.getStack();t&&t.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),m(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){!this.isUpdateBlocked()&&(this.isUpdating=!0,this.nodes&&this.nodes.forEach(rY),this.animationId++)}getTransformTemplate(){let{visualElement:t}=this.options;return t&&t.getProps().transformTemplate}willUpdate(t=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&function t(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;let{visualElement:n}=e.options;if(!n)return;let r=n.props[F];if(window.MotionHasOptimisedAnimation(r,"transform")){let{layout:t,layoutId:n}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",d,!(t||n))}let{parent:i}=e;i&&!i.hasCheckedOptimisedAppear&&t(i)}(this),this.root.isUpdating||this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let t=0;t<this.path.length;t++){let e=this.path[t];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}let{layoutId:e,layout:n}=this.options;if(void 0===e&&!n)return;let r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),t&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(rH);return}this.isUpdating||this.nodes.forEach(rZ),this.isUpdating=!1,this.nodes.forEach(rG),this.nodes.forEach(rB),this.nodes.forEach(rW),this.clearAllSnapshots();let t=N.now();y.delta=R(0,1e3/60,t-y.timestamp),y.timestamp=t,y.isProcessing=!0,v.update.process(y),v.preRender.process(y),v.render.process(y),y.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,n6.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(rq),this.sharedNodes.forEach(rJ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,d.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){d.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||nv(this.snapshot.measuredBox.x)||nv(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let t=0;t<this.path.length;t++)this.path[t].updateScroll();let t=this.layout;this.layout=this.measure(!1),this.layoutCorrected=nE(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);let{visualElement:e}=this.options;e&&e.notify("LayoutMeasure",this.layout.layoutBox,t?t.layoutBox:void 0)}updateScroll(t="measure"){let e=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===t&&(e=!1),e&&this.instance){let e=r(this.instance);this.scroll={animationId:this.root.animationId,phase:t,isRoot:e,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:e}}}resetTransform(){if(!i)return;let t=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,e=this.projectionDelta&&!rA(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,a=r!==this.prevTransformTemplateValue;t&&this.instance&&(e||nO(this.latestValues)||a)&&(i(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(t=!0){var e;let n=this.measurePageBox(),r=this.removeElementScroll(n);return t&&(r=this.removeTransform(r)),r6((e=r).x),r6(e.y),{animationId:this.root.animationId,measuredBox:n,layoutBox:r,latestValues:{},source:this.id}}measurePageBox(){let{visualElement:t}=this.options;if(!t)return nE();let e=t.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(r7))){let{scroll:t}=this.root;t&&(nI(e.x,t.offset.x),nI(e.y,t.offset.y))}return e}removeElementScroll(t){let e=nE();if(rx(e,t),this.scroll?.wasRoot)return e;for(let n=0;n<this.path.length;n++){let r=this.path[n],{scroll:i,options:a}=r;r!==this.root&&i&&a.layoutScroll&&(i.wasRoot&&rx(e,t),nI(e.x,i.offset.x),nI(e.y,i.offset.y))}return e}applyTransform(t,e=!1){let n=nE();rx(n,t);for(let t=0;t<this.path.length;t++){let r=this.path[t];!e&&r.options.layoutScroll&&r.scroll&&r!==r.root&&nR(n,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),nO(r.latestValues)&&nR(n,r.latestValues)}return nO(this.latestValues)&&nR(n,this.latestValues),n}removeTransform(t){let e=nE();rx(e,t);for(let t=0;t<this.path.length;t++){let n=this.path[t];if(!n.instance||!nO(n.latestValues))continue;nM(n.latestValues)&&n.updateSnapshot();let r=nE();rx(r,n.measurePageBox()),rE(e,n.latestValues,n.snapshot?n.snapshot.layoutBox:void 0,r)}return nO(this.latestValues)&&rE(e,this.latestValues),e}setTargetDelta(t){this.targetDelta=t,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(t){this.options={...this.options,...t,crossfade:void 0===t.crossfade||t.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==y.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(t=!1){let e=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=e.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=e.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=e.isSharedProjectionDirty);let n=!!this.resumingFrom||this!==e;if(!(t||n&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;let{layout:r,layoutId:i}=this.options;if(this.layout&&(r||i)){if(this.resolvedRelativeTargetAt=y.timestamp,!this.targetDelta&&!this.relativeTarget){let t=this.getClosestProjectingParent();t&&t.layout&&1!==this.animationProgress?(this.relativeParent=t,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nE(),this.relativeTargetOrigin=nE(),n_(this.relativeTargetOrigin,this.layout.layoutBox,t.layout.layoutBox),rx(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){if(this.target||(this.target=nE(),this.targetWithTransforms=nE()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target){var a,o,s;this.forceRelativeParentToResolveTarget(),a=this.target,o=this.relativeTarget,s=this.relativeParent.target,nx(a.x,o.x,s.x),nx(a.y,o.y,s.y)}else this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):rx(this.target,this.layout.layoutBox),nF(this.target,this.targetDelta)):rx(this.target,this.layout.layoutBox);if(this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;let t=this.getClosestProjectingParent();t&&!!t.resumingFrom==!!this.resumingFrom&&!t.options.layoutScroll&&t.target&&1!==this.animationProgress?(this.relativeParent=t,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nE(),this.relativeTargetOrigin=nE(),n_(this.relativeTargetOrigin,this.target,t.target),rx(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}h.value&&rI.calculatedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||nM(this.parent.latestValues)||nD(this.parent.latestValues)))if(this.parent.isProjecting())return this.parent;else return this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){let t=this.getLead(),e=!!this.resumingFrom||this!==t,n=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(n=!1),e&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===y.timestamp&&(n=!1),n)return;let{layout:r,layoutId:i}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(r||i))return;rx(this.layoutCorrected,this.layout.layoutBox);let a=this.treeScale.x,o=this.treeScale.y;!function(t,e,n,r=!1){let i,a,o=n.length;if(o){e.x=e.y=1;for(let s=0;s<o;s++){a=(i=n[s]).projectionDelta;let{visualElement:o}=i.options;(!o||!o.props.style||"contents"!==o.props.style.display)&&(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&nR(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,nF(t,a)),r&&nO(i.latestValues)&&nR(t,i.latestValues))}e.x<1.0000000000001&&e.x>.999999999999&&(e.x=1),e.y<1.0000000000001&&e.y>.999999999999&&(e.y=1)}}(this.layoutCorrected,this.treeScale,this.path,e),t.layout&&!t.target&&(1!==this.treeScale.x||1!==this.treeScale.y)&&(t.target=t.layout.layoutBox,t.targetWithTransforms=nE());let{target:s}=t;if(!s){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}this.projectionDelta&&this.prevProjectionDelta?(rw(this.prevProjectionDelta.x,this.projectionDelta.x),rw(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),nb(this.projectionDelta,this.layoutCorrected,s,this.latestValues),this.treeScale.x===a&&this.treeScale.y===o&&rk(this.projectionDelta.x,this.prevProjectionDelta.x)&&rk(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",s)),h.value&&rI.calculatedProjections++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(t=!0){if(this.options.visualElement?.scheduleRender(),t){let t=this.getStack();t&&t.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=nT(),this.projectionDelta=nT(),this.projectionDeltaWithTransform=nT()}setAnimationOrigin(t,e=!1){let n,r=this.snapshot,i=r?r.latestValues:{},a={...this.latestValues},o=nT();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!e;let s=nE(),u=(r?r.source:void 0)!==(this.layout?this.layout.source:void 0),c=this.getStack(),p=!c||c.members.length<=1,l=!!(u&&!p&&!0===this.options.crossfade&&!this.path.some(r2));this.animationProgress=0,this.mixTargetDelta=e=>{let r=e/1e3;if(r0(o.x,t.x,r),r0(o.y,t.y,r),this.setTargetDelta(o),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout){var c,h,f,d,m,y;n_(s,this.layout.layoutBox,this.relativeParent.layout.layoutBox),f=this.relativeTarget,d=this.relativeTargetOrigin,m=s,y=r,r1(f.x,d.x,m.x,y),r1(f.y,d.y,m.y,y),n&&(c=this.relativeTarget,h=n,rM(c.x,h.x)&&rM(c.y,h.y))&&(this.isProjectionDirty=!1),n||(n=nE()),rx(n,this.relativeTarget)}u&&(this.animationValues=a,function(t,e,n,r,i,a){i?(t.opacity=tE(0,n.opacity??1,ry(r)),t.opacityExit=tE(e.opacity??1,0,rv(r))):a&&(t.opacity=tE(e.opacity??1,n.opacity??1,r));for(let i=0;i<rh;i++){let a=`border${rl[i]}Radius`,o=rm(e,a),s=rm(n,a);(void 0!==o||void 0!==s)&&(o||(o=0),s||(s=0),0===o||0===s||rd(o)===rd(s)?(t[a]=Math.max(tE(rf(o),rf(s),r),0),(tu.test(s)||tu.test(o))&&(t[a]+="%")):t[a]=s)}(e.rotate||n.rotate)&&(t.rotate=tE(e.rotate||0,n.rotate||0,r))}(a,i,this.latestValues,r,l,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=r},this.mixTargetDelta(1e3*!!this.options.layoutRoot)}startAnimation(t){this.notifyListeners("animationStart"),this.currentAnimation?.stop(!1),this.resumingFrom?.currentAnimation?.stop(!1),this.pendingAnimation&&(m(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=d.update(()=>{re.hasAnimatedSinceResize=!0,z.layout++,this.motionValue||(this.motionValue=M(0)),this.currentAnimation=function(t,e,n){let r=D(t)?t:M(t);return r.start(e3("",r,e,n)),r.animation}(this.motionValue,[0,1e3],{...t,isSync:!0,onUpdate:e=>{this.mixTargetDelta(e),t.onUpdate&&t.onUpdate(e)},onStop:()=>{z.layout--},onComplete:()=>{z.layout--,t.onComplete&&t.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let t=this.getStack();t&&t.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop(!1)),this.completeAnimation()}applyTransformsToTarget(){let t=this.getLead(),{targetWithTransforms:e,target:n,layout:r,latestValues:i}=t;if(e&&n&&r){if(this!==t&&this.layout&&r&&r8(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||nE();let e=nv(this.layout.layoutBox.x);n.x.min=t.target.x.min,n.x.max=n.x.min+e;let r=nv(this.layout.layoutBox.y);n.y.min=t.target.y.min,n.y.max=n.y.min+r}rx(e,n),nR(e,i),nb(this.projectionDeltaWithTransform,this.layoutCorrected,e,i)}}registerSharedNode(t,e){this.sharedNodes.has(t)||this.sharedNodes.set(t,new rF),this.sharedNodes.get(t).add(e);let n=e.options.initialPromotionConfig;e.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(e):void 0})}isLead(){let t=this.getStack();return!t||t.lead===this}getLead(){let{layoutId:t}=this.options;return t&&this.getStack()?.lead||this}getPrevLead(){let{layoutId:t}=this.options;return t?this.getStack()?.prevLead:void 0}getStack(){let{layoutId:t}=this.options;if(t)return this.root.sharedNodes.get(t)}promote({needsReset:t,transition:e,preserveFollowOpacity:n}={}){let r=this.getStack();r&&r.promote(this,n),t&&(this.projectionDelta=void 0,this.needsReset=!0),e&&this.setOptions({transition:e})}relegate(){let t=this.getStack();return!!t&&t.relegate(this)}resetSkewAndRotation(){let{visualElement:t}=this.options;if(!t)return;let e=!1,{latestValues:n}=t;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(e=!0),!e)return;let r={};n.z&&rL("z",t,r,this.animationValues);for(let e=0;e<rV.length;e++)rL(`rotate${rV[e]}`,t,r,this.animationValues),rL(`skew${rV[e]}`,t,r,this.animationValues);for(let e in t.render(),r)t.setStaticValue(e,r[e]),this.animationValues&&(this.animationValues[e]=r[e]);t.scheduleRender()}getProjectionStyles(t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return rR;let e={visibility:""},n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.opacity="",e.pointerEvents=rp(t?.pointerEvents)||"",e.transform=n?n(this.latestValues,""):"none",e;let r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target){let e={};return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=rp(t?.pointerEvents)||""),this.hasProjected&&!nO(this.latestValues)&&(e.transform=n?n({},""):"none",this.hasProjected=!1),e}let i=r.animationValues||r.latestValues;this.applyTransformsToTarget(),e.transform=function(t,e,n){let r="",i=t.x.translate/e.x,a=t.y.translate/e.y,o=n?.z||0;if((i||a||o)&&(r=`translate3d(${i}px, ${a}px, ${o}px) `),(1!==e.x||1!==e.y)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){let{transformPerspective:t,rotate:e,rotateX:i,rotateY:a,skewX:o,skewY:s}=n;t&&(r=`perspective(${t}px) ${r}`),e&&(r+=`rotate(${e}deg) `),i&&(r+=`rotateX(${i}deg) `),a&&(r+=`rotateY(${a}deg) `),o&&(r+=`skewX(${o}deg) `),s&&(r+=`skewY(${s}deg) `)}let s=t.x.scale*e.x,u=t.y.scale*e.y;return(1!==s||1!==u)&&(r+=`scale(${s}, ${u})`),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,i),n&&(e.transform=n(i,e.transform));let{x:a,y:o}=this.projectionDelta;for(let t in e.transformOrigin=`${100*a.origin}% ${100*o.origin}% 0`,r.animationValues?e.opacity=r===this?i.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:i.opacityExit:e.opacity=r===this?void 0!==i.opacity?i.opacity:"":void 0!==i.opacityExit?i.opacityExit:0,ri){if(void 0===i[t])continue;let{correct:n,applyTo:a,isCSSVariable:o}=ri[t],s="none"===e.transform?i[t]:n(i[t],r);if(a){let t=a.length;for(let n=0;n<t;n++)e[a[n]]=s}else o?this.options.visualElement.renderState.vars[t]=s:e[t]=s}return this.options.layoutId&&(e.pointerEvents=r===this?rp(t?.pointerEvents)||"":"none"),e}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(t=>t.currentAnimation?.stop(!1)),this.root.nodes.forEach(rH),this.root.sharedNodes.clear()}}}function rB(t){t.updateLayout()}function rW(t){let e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){let{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;"size"===i?nP(t=>{let r=a?e.measuredBox[t]:e.layoutBox[t],i=nv(r);r.min=n[t].min,r.max=r.min+i}):r8(i,e.layoutBox,n)&&nP(r=>{let i=a?e.measuredBox[r]:e.layoutBox[r],o=nv(n[r]);i.max=i.min+o,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[r].max=t.relativeTarget[r].min+o)});let o=nT();nb(o,n,e.layoutBox);let s=nT();a?nb(s,t.applyTransform(r,!0),e.measuredBox):nb(s,n,e.layoutBox);let u=!rA(o),c=!1;if(!t.resumeFrom){let r=t.getClosestProjectingParent();if(r&&!r.resumeFrom){let{snapshot:i,layout:a}=r;if(i&&a){let o=nE();n_(o,e.layoutBox,i.layoutBox);let s=nE();n_(s,n,a.layoutBox),rD(o,s)||(c=!0),r.options.layoutRoot&&(t.relativeTarget=s,t.relativeTargetOrigin=o,t.relativeParent=r)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:s,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(t.isLead()){let{onExitComplete:e}=t.options;e&&e()}t.options.transition=void 0}function rU(t){h.value&&rI.nodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function rQ(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function rq(t){t.clearSnapshot()}function rH(t){t.clearMeasurements()}function rZ(t){t.isLayoutDirty=!1}function rG(t){let{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function r$(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function rK(t){t.resolveTargetDelta()}function rX(t){t.calcProjection()}function rY(t){t.resetSkewAndRotation()}function rJ(t){t.removeLeadSnapshot()}function r0(t,e,n){t.translate=tE(e.translate,0,n),t.scale=tE(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function r1(t,e,n,r){t.min=tE(e.min,n.min,r),t.max=tE(e.max,n.max,r)}function r2(t){return t.animationValues&&void 0!==t.animationValues.opacityExit}let r3={duration:.45,ease:[.4,0,.1,1]},r4=t=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),r5=r4("applewebkit/")&&!r4("chrome/")?Math.round:c;function r6(t){t.min=r5(t.min),t.max=r5(t.max)}function r8(t,e,n){return"position"===t||"preserve-aspect"===t&&!(.2>=Math.abs(rC(e)-rC(n)))}function r7(t){return t!==t.root&&t.scroll?.wasRoot}let r9=rz({attachResizeListener:(t,e)=>nl(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),it={current:void 0},ie=rz({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!it.current){let t=new r9({});t.mount(window),t.setOptions({layoutScroll:!0}),it.current=t}return it.current},resetTransform:(t,e)=>{t.style.transform=void 0!==e?e:"none"},checkIsScrollRoot:t=>"fixed"===window.getComputedStyle(t).position});function ir(t,e){let n=function(t,e,n){if(t instanceof EventTarget)return[t];if("string"==typeof t){let e=document,n=(void 0)??e.querySelectorAll(t);return n?Array.from(n):[]}return Array.from(t)}(t),r=new AbortController;return[n,{passive:!0,...e,signal:r.signal},()=>r.abort()]}function ii(t){return!("touch"===t.pointerType||np.x||np.y)}function ia(t,e,n){let{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover","Start"===n);let i=r["onHover"+n];i&&d.postRender(()=>i(e,nf(e)))}class io extends no{mount(){let{current:t}=this.node;t&&(this.unmount=function(t,e,n={}){let[r,i,a]=ir(t,n),o=t=>{if(!ii(t))return;let{target:n}=t,r=e(n,t);if("function"!=typeof r||!n)return;let a=t=>{ii(t)&&(r(t),n.removeEventListener("pointerleave",a))};n.addEventListener("pointerleave",a,i)};return r.forEach(t=>{t.addEventListener("pointerenter",o,i)}),a}(t,(t,e)=>(ia(this.node,e,"Start"),t=>ia(this.node,t,"End"))))}unmount(){}}class is extends no{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch(e){t=!0}t&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=V(nl(this.node.current,"focus",()=>this.onFocus()),nl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}let iu=(t,e)=>!!e&&(t===e||iu(t,e.parentElement)),ic=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]),ip=new WeakSet;function il(t){return e=>{"Enter"===e.key&&t(e)}}function ih(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}let id=(t,e)=>{let n=t.currentTarget;if(!n)return;let r=il(()=>{if(ip.has(n))return;ih(n,"down");let t=il(()=>{ih(n,"up")});n.addEventListener("keyup",t,e),n.addEventListener("blur",()=>ih(n,"cancel"),e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function im(t){return nh(t)&&!(np.x||np.y)}function iy(t,e,n){let{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap","Start"===n);let i=r["onTap"+("End"===n?"":n)];i&&d.postRender(()=>i(e,nf(e)))}class iv extends no{mount(){let{current:t}=this.node;t&&(this.unmount=function(t,e,n={}){let[r,i,a]=ir(t,n),o=t=>{let r=t.currentTarget;if(!im(t))return;ip.add(r);let a=e(r,t),o=(t,e)=>{window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",u),ip.has(r)&&ip.delete(r),im(t)&&"function"==typeof a&&a(t,{success:e})},s=t=>{o(t,r===window||r===document||n.useGlobalTarget||iu(r,t.target))},u=t=>{o(t,!1)};window.addEventListener("pointerup",s,i),window.addEventListener("pointercancel",u,i)};return r.forEach(t=>{((n.useGlobalTarget?window:t).addEventListener("pointerdown",o,i),t instanceof HTMLElement)&&(t.addEventListener("focus",t=>id(t,i)),ic.has(t.tagName)||-1!==t.tabIndex||t.hasAttribute("tabindex")||(t.tabIndex=0))}),a}(t,(t,e)=>(iy(this.node,e,"Start"),(t,{success:e})=>iy(this.node,t,e?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}let ig=new WeakMap,ib=new WeakMap,ix=t=>{let e=ig.get(t.target);e&&e(t)},iw=t=>{t.forEach(ix)},i_={some:0,all:1};class iS extends no{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();let{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:r="some",once:i}=t,a={root:e?e.current:void 0,rootMargin:n,threshold:"number"==typeof r?r:i_[r]};return function(t,e,n){let r=function({root:t,...e}){let n=t||document;ib.has(n)||ib.set(n,{});let r=ib.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(iw,{root:t,...e})),r[i]}(e);return ig.set(t,n),r.observe(t),()=>{ig.delete(t),r.unobserve(t)}}(this.node.current,a,t=>{let{isIntersecting:e}=t;if(this.isInView===e||(this.isInView=e,i&&!e&&this.hasEnteredView))return;e&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",e);let{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),a=e?n:r;a&&a(t)})}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;let{props:t,prevProps:e}=this.node;["amount","margin","root"].some(function({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}(t,e))&&this.startObserver()}unmount(){}}let iT=(0,n8.createContext)({strict:!1});var iN=n(1508);let iE=(0,n8.createContext)({});function iP(t){return i(t.animate)||nt.some(e=>e7(t[e]))}function iA(t){return!!(iP(t)||t.variants)}function iM(t){return Array.isArray(t)?t.join(" "):t}var iO=n(8972);let iD={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},iC={};for(let t in iD)iC[t]={isEnabled:e=>iD[t].some(t=>!!e[t])};let ik=Symbol.for("motionComponentSymbol");var iF=n(845),iI=n(7494);function iV(t,{layout:e,layoutId:n}){return b.has(t)||t.startsWith("origin")||(e||void 0!==n)&&(!!ri[t]||"opacity"===t)}let iR=(t,e)=>e&&"number"==typeof t?e.transform(t):t,ij={...G,transform:Math.round},iL={borderWidth:tc,borderTopWidth:tc,borderRightWidth:tc,borderBottomWidth:tc,borderLeftWidth:tc,borderRadius:tc,radius:tc,borderTopLeftRadius:tc,borderTopRightRadius:tc,borderBottomRightRadius:tc,borderBottomLeftRadius:tc,width:tc,maxWidth:tc,height:tc,maxHeight:tc,top:tc,right:tc,bottom:tc,left:tc,padding:tc,paddingTop:tc,paddingRight:tc,paddingBottom:tc,paddingLeft:tc,margin:tc,marginTop:tc,marginRight:tc,marginBottom:tc,marginLeft:tc,backgroundPositionX:tc,backgroundPositionY:tc,rotate:ts,rotateX:ts,rotateY:ts,rotateZ:ts,scale:K,scaleX:K,scaleY:K,scaleZ:K,skew:ts,skewX:ts,skewY:ts,distance:tc,translateX:tc,translateY:tc,translateZ:tc,x:tc,y:tc,z:tc,perspective:tc,transformPerspective:tc,opacity:$,originX:th,originY:th,originZ:tc,zIndex:ij,fillOpacity:$,strokeOpacity:$,numOctaves:ij},iz={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},iB=g.length;function iW(t,e,n){let{style:r,vars:i,transformOrigin:a}=t,o=!1,s=!1;for(let t in e){let n=e[t];if(b.has(t)){o=!0;continue}if(Q(t)){i[t]=n;continue}{let e=iR(n,iL[t]);t.startsWith("origin")?(s=!0,a[t]=e):r[t]=e}}if(!e.transform&&(o||n?r.transform=function(t,e,n){let r="",i=!0;for(let a=0;a<iB;a++){let o=g[a],s=t[o];if(void 0===s)continue;let u=!0;if(!(u="number"==typeof s?s===+!!o.startsWith("scale"):0===parseFloat(s))||n){let t=iR(s,iL[o]);if(!u){i=!1;let e=iz[o]||o;r+=`${e}(${t}) `}n&&(e[o]=t)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}(e,t.transform,n):r.transform&&(r.transform="none")),s){let{originX:t="50%",originY:e="50%",originZ:n=0}=a;r.transformOrigin=`${t} ${e} ${n}`}}let iU=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function iQ(t,e,n){for(let r in e)D(e[r])||iV(r,n)||(t[r]=e[r])}let iq=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function iH(t){return t.startsWith("while")||t.startsWith("drag")&&"draggable"!==t||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||iq.has(t)}let iZ=t=>!iH(t);try{!function(t){t&&(iZ=e=>e.startsWith("on")?!iH(e):t(e))}(require("@emotion/is-prop-valid").default)}catch{}let iG=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function i$(t){if("string"!=typeof t||t.includes("-"));else if(iG.indexOf(t)>-1||/[A-Z]/u.test(t))return!0;return!1}let iK={offset:"stroke-dashoffset",array:"stroke-dasharray"},iX={offset:"strokeDashoffset",array:"strokeDasharray"};function iY(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:o=0,...s},u,c,p){if(iW(t,s,c),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};let{attrs:l,style:h}=t;l.transform&&(h.transform=l.transform,delete l.transform),(h.transform||l.transformOrigin)&&(h.transformOrigin=l.transformOrigin??"50% 50%",delete l.transformOrigin),h.transform&&(h.transformBox=p?.transformBox??"fill-box",delete l.transformBox),void 0!==e&&(l.x=e),void 0!==n&&(l.y=n),void 0!==r&&(l.scale=r),void 0!==i&&function(t,e,n=1,r=0,i=!0){t.pathLength=1;let a=i?iK:iX;t[a.offset]=tc.transform(-r);let o=tc.transform(e),s=tc.transform(n);t[a.array]=`${o} ${s}`}(l,i,a,o,!1)}let iJ=()=>({...iU(),attrs:{}}),i0=t=>"string"==typeof t&&"svg"===t.toLowerCase();var i1=n(2885);let i2=t=>(e,n)=>{let r=(0,n8.useContext)(iE),a=(0,n8.useContext)(iF.t),s=()=>(function({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,a){return{latestValues:function(t,e,n,r){let a={},s=r(t,{});for(let t in s)a[t]=rp(s[t]);let{initial:u,animate:c}=t,p=iP(t),l=iA(t);e&&l&&!p&&!1!==t.inherit&&(void 0===u&&(u=e.initial),void 0===c&&(c=e.animate));let h=!!n&&!1===n.initial,f=(h=h||!1===u)?c:u;if(f&&"boolean"!=typeof f&&!i(f)){let e=Array.isArray(f)?f:[f];for(let n=0;n<e.length;n++){let r=o(t,e[n]);if(r){let{transitionEnd:t,transition:e,...n}=r;for(let t in n){let e=n[t];if(Array.isArray(e)){let t=h?e.length-1:0;e=e[t]}null!==e&&(a[t]=e)}for(let e in t)a[e]=t[e]}}}return a}(n,r,a,t),renderState:e()}})(t,e,r,a);return n?s():(0,i1.M)(s)};function i3(t,e,n){let{style:r}=t,i={};for(let a in r)(D(r[a])||e.style&&D(e.style[a])||iV(a,t)||n?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}let i4={useVisualState:i2({scrapeMotionValuesFromProps:i3,createRenderState:iU})};function i5(t,e,n){let r=i3(t,e,n);for(let n in t)(D(t[n])||D(e[n]))&&(r[-1!==g.indexOf(n)?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n]=t[n]);return r}let i6={useVisualState:i2({scrapeMotionValuesFromProps:i5,createRenderState:iJ})},i8=t=>e=>e.test(t),i7=[G,tc,tu,ts,tl,tp,{test:t=>"auto"===t,parse:t=>t}],i9=t=>i7.find(i8(t)),at=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),ae=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u,an=t=>/^0[^.\s]+$/u.test(t),ar=new Set(["brightness","contrast","saturate","opacity"]);function ai(t){let[e,n]=t.slice(0,-1).split("(");if("drop-shadow"===e)return t;let[r]=n.match(Y)||[];if(!r)return t;let i=n.replace(r,""),a=+!!ar.has(e);return r!==n&&(a*=100),e+"("+a+i+")"}let aa=/\b([a-z-]*)\(.*?\)/gu,ao={...tS,getAnimatableNone:t=>{let e=t.match(aa);return e?e.map(ai).join(" "):t}},as={...iL,color:td,backgroundColor:td,outlineColor:td,fill:td,stroke:td,borderColor:td,borderTopColor:td,borderRightColor:td,borderBottomColor:td,borderLeftColor:td,filter:ao,WebkitFilter:ao},au=t=>as[t];function ac(t,e){let n=au(t);return n!==ao&&(n=tS),n.getAnimatableNone?n.getAnimatableNone(e):void 0}let ap=new Set(["auto","none","0"]);class al extends eI{constructor(t,e,n,r,i){super(t,e,n,r,i,!0)}readKeyframes(){let{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let n=0;n<t.length;n++){let r=t[n];if("string"==typeof r&&H(r=r.trim())){let i=function t(e,n,r=1){W(r<=4,`Max CSS variable fallback depth detected in property "${e}". This may indicate a circular fallback dependency.`);let[i,a]=function(t){let e=ae.exec(t);if(!e)return[,];let[,n,r,i]=e;return[`--${n??r}`,i]}(e);if(!i)return;let o=window.getComputedStyle(n).getPropertyValue(i);if(o){let t=o.trim();return at(t)?parseFloat(t):t}return H(a)?t(a,n,r+1):a}(r,e.current);void 0!==i&&(t[n]=i),n===t.length-1&&(this.finalKeyframe=r)}}if(this.resolveNoneKeyframes(),!x.has(n)||2!==t.length)return;let[r,i]=t,a=i9(r),o=i9(i);if(a!==o)if(eN(a)&&eN(o))for(let e=0;e<t.length;e++){let n=t[e];"string"==typeof n&&(t[e]=parseFloat(n))}else eA[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){let{unresolvedKeyframes:t,name:e}=this,n=[];for(let e=0;e<t.length;e++){var r;(null===t[e]||("number"==typeof(r=t[e])?0===r:null===r||"none"===r||"0"===r||an(r)))&&n.push(e)}n.length&&function(t,e,n){let r,i=0;for(;i<t.length&&!r;){let e=t[i];"string"==typeof e&&!ap.has(e)&&tb(e).values.length&&(r=t[i]),i++}if(r&&n)for(let i of e)t[i]=ac(n,r)}(t,n,e)}measureInitialState(){let{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=eA[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;let r=e[e.length-1];void 0!==r&&t.getValue(n,r).jump(r,!1)}measureEndState(){let{element:t,name:e,unresolvedKeyframes:n}=this;if(!t||!t.current)return;let r=t.getValue(e);r&&r.jump(this.measuredOrigin,!1);let i=n.length-1,a=n[i];n[i]=eA[e](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==a&&void 0===this.finalKeyframe&&(this.finalKeyframe=a),this.removedTransforms?.length&&this.removedTransforms.forEach(([e,n])=>{t.getValue(e).set(n)}),this.resolveNoneKeyframes()}}let ah=[...i7,td,tS],af=t=>ah.find(i8(t)),ad={current:null},am={current:!1},ay=new WeakMap,av=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ag{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:i,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=eI,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{let t=N.now();this.renderScheduledAt<t&&(this.renderScheduledAt=t,d.render(this.render,!1,!0))};let{latestValues:s,renderState:u}=a;this.latestValues=s,this.baseTarget={...s},this.initialValues=e.initial?{...s}:{},this.renderState=u,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.blockInitialAnimation=!!i,this.isControllingVariants=iP(e),this.isVariantNode=iA(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);let{willChange:c,...p}=this.scrapeMotionValuesFromProps(e,{},this);for(let t in p){let e=p[t];void 0!==s[t]&&D(e)&&e.set(s[t],!1)}}mount(t){this.current=t,ay.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,e)=>this.bindToMotionValue(e,t)),am.current||function(){if(am.current=!0,iO.B)if(window.matchMedia){let t=window.matchMedia("(prefers-reduced-motion)"),e=()=>ad.current=t.matches;t.addListener(e),e()}else ad.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||ad.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){for(let t in this.projection&&this.projection.unmount(),m(this.notifyUpdate),m(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this),this.events)this.events[t].clear();for(let t in this.features){let e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}bindToMotionValue(t,e){let n;this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();let r=b.has(t);r&&this.onBindTransform&&this.onBindTransform();let i=e.on("change",e=>{this.latestValues[t]=e,this.props.onUpdate&&d.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=e.on("renderRequest",this.scheduleRender);window.MotionCheckAppearSync&&(n=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{i(),a(),n&&n(),e.owner&&e.stop()})}sortNodePosition(t){return this.current&&this.sortInstanceNodePosition&&this.type===t.type?this.sortInstanceNodePosition(this.current,t.current):0}updateFeatures(){let t="animation";for(t in iC){let e=iC[t];if(!e)continue;let{isEnabled:n,Feature:r}=e;if(!this.features[t]&&r&&n(this.props)&&(this.features[t]=new r(this)),this.features[t]){let e=this.features[t];e.isMounted?e.update():(e.mount(),e.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):nE()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let e=0;e<av.length;e++){let n=av[e];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);let r=t["on"+n];r&&(this.propEventSubscriptions[n]=this.on(n,r))}this.prevMotionValues=function(t,e,n){for(let r in e){let i=e[r],a=n[r];if(D(i))t.addValue(r,i);else if(D(a))t.addValue(r,M(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){let e=t.getValue(r);!0===e.liveStyle?e.jump(i):e.hasAnimated||e.set(i)}else{let e=t.getStaticValue(r);t.addValue(r,M(void 0!==e?e:i,{owner:t}))}}for(let r in n)void 0===e[r]&&t.removeValue(r);return e}(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){let e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){let n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);let e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return void 0===n&&void 0!==e&&(n=M(null===e?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){let n=void 0===this.latestValues[t]&&this.current?this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options):this.latestValues[t];return null!=n&&("string"==typeof n&&(at(n)||an(n))?n=parseFloat(n):!af(n)&&tS.test(e)&&(n=ac(t,e)),this.setBaseTarget(t,D(n)?n.get():n)),D(n)?n.get():n}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){let e,{initial:n}=this.props;if("string"==typeof n||"object"==typeof n){let r=o(this.props,n,this.presenceContext?.custom);r&&(e=r[t])}if(n&&void 0!==e)return e;let r=this.getBaseTargetFromProps(this.props,t);return void 0===r||D(r)?void 0!==this.initialValues[t]&&void 0===e?void 0:this.baseTarget[t]:r}on(t,e){return this.events[t]||(this.events[t]=new S),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}}class ab extends ag{constructor(){super(...arguments),this.KeyframeResolver=al}sortInstanceNodePosition(t,e){return 2&t.compareDocumentPosition(e)?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:t}=this.props;D(t)&&(this.childSubscription=t.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function ax(t,{style:e,vars:n},r,i){for(let a in Object.assign(t.style,e,i&&i.getProjectionStyles(r)),n)t.style.setProperty(a,n[a])}class aw extends ab{constructor(){super(...arguments),this.type="html",this.renderInstance=ax}readValueFromInstance(t,e){if(b.has(e))return eS(t,e);{let n=window.getComputedStyle(t),r=(Q(e)?n.getPropertyValue(e):n[e])||0;return"string"==typeof r?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:e}){return nj(t,e)}build(t,e,n){iW(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return i3(t,e,n)}}let a_=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);class aS extends ab{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=nE}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(b.has(e)){let t=au(e);return t&&t.default||0}return e=a_.has(e)?e:k(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return i5(t,e,n)}build(t,e,n){iY(t,e,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,e,n,r){for(let n in ax(t,e,void 0,r),e.attrs)t.setAttribute(a_.has(n)?n:k(n),e.attrs[n])}mount(t){this.isSVGTag=i0(t.tagName),super.mount(t)}}let aT=function(t){if("undefined"==typeof Proxy)return t;let e=new Map;return new Proxy((...e)=>t(...e),{get:(n,r)=>"create"===r?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}((n3={animation:{Feature:ns},exit:{Feature:nc},inView:{Feature:iS},tap:{Feature:iv},focus:{Feature:is},hover:{Feature:io},pan:{Feature:n2},drag:{Feature:n0,ProjectionNode:ie,MeasureLayout:ro},layout:{ProjectionNode:ie,MeasureLayout:ro}},n4=(t,e)=>i$(t)?new aS(e):new aw(e,{allowProjection:t!==n8.Fragment}),function(t,{forwardMotionProps:e}={forwardMotionProps:!1}){return function(t){var e,n;let{preloadedFeatures:r,createVisualElement:i,useRender:a,useVisualState:o,Component:s}=t;function u(t,e){var n,r,u;let c,p={...(0,n8.useContext)(iN.Q),...t,layoutId:function(t){let{layoutId:e}=t,n=(0,n8.useContext)(n9.L).id;return n&&void 0!==e?n+"-"+e:e}(t)},{isStatic:l}=p,h=function(t){let{initial:e,animate:n}=function(t,e){if(iP(t)){let{initial:e,animate:n}=t;return{initial:!1===e||e7(e)?e:void 0,animate:e7(n)?n:void 0}}return!1!==t.inherit?e:{}}(t,(0,n8.useContext)(iE));return(0,n8.useMemo)(()=>({initial:e,animate:n}),[iM(e),iM(n)])}(t),f=o(t,l);if(!l&&iO.B){r=0,u=0,(0,n8.useContext)(iT).strict;let t=function(t){let{drag:e,layout:n}=iC;if(!e&&!n)return{};let r={...e,...n};return{MeasureLayout:(null==e?void 0:e.isEnabled(t))||(null==n?void 0:n.isEnabled(t))?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(p);c=t.MeasureLayout,h.visualElement=function(t,e,n,r,i){let{visualElement:a}=(0,n8.useContext)(iE),o=(0,n8.useContext)(iT),s=(0,n8.useContext)(iF.t),u=(0,n8.useContext)(iN.Q).reducedMotion,c=(0,n8.useRef)(null);r=r||o.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:a,props:n,presenceContext:s,blockInitialAnimation:!!s&&!1===s.initial,reducedMotionConfig:u}));let p=c.current,l=(0,n8.useContext)(rt);p&&!p.projection&&i&&("html"===p.type||"svg"===p.type)&&function(t,e,n,r){let{layoutId:i,layout:a,drag:o,dragConstraints:s,layoutScroll:u,layoutRoot:c,layoutCrossfade:p}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:function t(e){if(e)return!1!==e.options.allowProjection?e.projection:t(e.parent)}(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||s&&nz(s),visualElement:t,animationType:"string"==typeof a?a:"both",initialPromotionConfig:r,crossfade:p,layoutScroll:u,layoutRoot:c})}(c.current,n,i,l);let h=(0,n8.useRef)(!1);(0,n8.useInsertionEffect)(()=>{p&&h.current&&p.update(n,s)});let f=n[F],d=(0,n8.useRef)(!!f&&!window.MotionHandoffIsComplete?.(f)&&window.MotionHasOptimisedAnimation?.(f));return(0,iI.E)(()=>{p&&(h.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),n6.render(p.render),d.current&&p.animationState&&p.animationState.animateChanges())}),(0,n8.useEffect)(()=>{p&&(!d.current&&p.animationState&&p.animationState.animateChanges(),d.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(f)}),d.current=!1))}),p}(s,f,p,i,t.ProjectionNode)}return(0,n5.jsxs)(iE.Provider,{value:h,children:[c&&h.visualElement?(0,n5.jsx)(c,{visualElement:h.visualElement,...p}):null,a(s,t,(n=h.visualElement,(0,n8.useCallback)(t=>{t&&f.onMount&&f.onMount(t),n&&(t?n.mount(t):n.unmount()),e&&("function"==typeof e?e(t):nz(e)&&(e.current=t))},[n])),f,l,h.visualElement)]})}r&&function(t){for(let e in t)iC[e]={...iC[e],...t[e]}}(r),u.displayName="motion.".concat("string"==typeof s?s:"create(".concat(null!=(n=null!=(e=s.displayName)?e:s.name)?n:"",")"));let c=(0,n8.forwardRef)(u);return c[ik]=s,c}({...i$(t)?i6:i4,preloadedFeatures:n3,useRender:function(t=!1){return(e,n,r,{latestValues:i},a)=>{let o=(i$(e)?function(t,e,n,r){let i=(0,n8.useMemo)(()=>{let n=iJ();return iY(n,e,i0(r),t.transformTemplate,t.style),{...n.attrs,style:{...n.style}}},[e]);if(t.style){let e={};iQ(e,t.style,t),i.style={...e,...i.style}}return i}:function(t,e){let n={},r=function(t,e){let n=t.style||{},r={};return iQ(r,n,t),Object.assign(r,function({transformTemplate:t},e){return(0,n8.useMemo)(()=>{let n=iU();return iW(n,e,t),Object.assign({},n.vars,n.style)},[e])}(t,e)),r}(t,e);return t.drag&&!1!==t.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===t.drag?"none":`pan-${"x"===t.drag?"y":"x"}`),void 0===t.tabIndex&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n})(n,i,a,e),s=function(t,e,n){let r={};for(let i in t)("values"!==i||"object"!=typeof t.values)&&(iZ(i)||!0===n&&iH(i)||!e&&!iH(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}(n,"string"==typeof e,t),u=e!==n8.Fragment?{...s,...o,ref:r}:{},{children:c}=n,p=(0,n8.useMemo)(()=>D(c)?c.get():c,[c]);return(0,n8.createElement)(e,{...u,children:p})}}(e),createVisualElement:n4,Component:t})}))},8972:(t,e,n)=>{"use strict";n.d(e,{B:()=>r});let r="undefined"!=typeof window},9641:t=>{!function(){var e={675:function(t,e){"use strict";e.byteLength=function(t){var e=u(t),n=e[0],r=e[1];return(n+r)*3/4-r},e.toByteArray=function(t){var e,n,a=u(t),o=a[0],s=a[1],c=new i((o+s)*3/4-s),p=0,l=s>0?o-4:o;for(n=0;n<l;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],c[p++]=e>>16&255,c[p++]=e>>8&255,c[p++]=255&e;return 2===s&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,c[p++]=255&e),1===s&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,c[p++]=e>>8&255,c[p++]=255&e),c},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,a=[],o=0,s=r-i;o<s;o+=16383)a.push(function(t,e,r){for(var i,a=[],o=e;o<r;o+=3)i=(t[o]<<16&0xff0000)+(t[o+1]<<8&65280)+(255&t[o+2]),a.push(n[i>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return a.join("")}(t,o,o+16383>s?s:o+16383));return 1===i?a.push(n[(e=t[r-1])>>2]+n[e<<4&63]+"=="):2===i&&a.push(n[(e=(t[r-2]<<8)+t[r-1])>>10]+n[e>>4&63]+n[e<<2&63]+"="),a.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,s=a.length;o<s;++o)n[o]=a[o],r[a.charCodeAt(o)]=o;function u(t){var e=t.length;if(e%4>0)throw Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");-1===n&&(n=e);var r=n===e?0:4-n%4;return[n,r]}r[45]=62,r[95]=63},72:function(t,e,n){"use strict";var r=n(675),i=n(783),a="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function o(t){if(t>0x7fffffff)throw RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,s.prototype),e}function s(t,e,n){if("number"==typeof t){if("string"==typeof e)throw TypeError('The "string" argument must be of type string. Received type number');return p(t)}return u(t,e,n)}function u(t,e,n){if("string"==typeof t){var r=t,i=e;if(("string"!=typeof i||""===i)&&(i="utf8"),!s.isEncoding(i))throw TypeError("Unknown encoding: "+i);var a=0|f(r,i),u=o(a),c=u.write(r,i);return c!==a&&(u=u.slice(0,c)),u}if(ArrayBuffer.isView(t))return l(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(M(t,ArrayBuffer)||t&&M(t.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(M(t,SharedArrayBuffer)||t&&M(t.buffer,SharedArrayBuffer)))return function(t,e,n){var r;if(e<0||t.byteLength<e)throw RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),s.prototype),r}(t,e,n);if("number"==typeof t)throw TypeError('The "value" argument must not be of type number. Received type number');var p=t.valueOf&&t.valueOf();if(null!=p&&p!==t)return s.from(p,e,n);var d=function(t){if(s.isBuffer(t)){var e=0|h(t.length),n=o(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0!==t.length?"number"!=typeof t.length||function(t){return t!=t}(t.length)?o(0):l(t):"Buffer"===t.type&&Array.isArray(t.data)?l(t.data):void 0}(t);if(d)return d;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return s.from(t[Symbol.toPrimitive]("string"),e,n);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function c(t){if("number"!=typeof t)throw TypeError('"size" argument must be of type number');if(t<0)throw RangeError('The value "'+t+'" is invalid for option "size"')}function p(t){return c(t),o(t<0?0:0|h(t))}function l(t){for(var e=t.length<0?0:0|h(t.length),n=o(e),r=0;r<e;r+=1)n[r]=255&t[r];return n}e.Buffer=s,e.SlowBuffer=function(t){return+t!=t&&(t=0),s.alloc(+t)},e.INSPECT_MAX_BYTES=50,e.kMaxLength=0x7fffffff,s.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(t,e,n){return u(t,e,n)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(t,e,n){return(c(t),t<=0)?o(t):void 0!==e?"string"==typeof n?o(t).fill(e,n):o(t).fill(e):o(t)},s.allocUnsafe=function(t){return p(t)},s.allocUnsafeSlow=function(t){return p(t)};function h(t){if(t>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|t}function f(t,e){if(s.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||M(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return N(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return P(t).length;default:if(i)return r?-1:N(t).length;e=(""+e).toLowerCase(),i=!0}}function d(t,e,n){var i,a,o,s=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0||(n>>>=0)<=(e>>>=0)))return"";for(t||(t="utf8");;)switch(t){case"hex":return function(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=e;a<n;++a)i+=O[t[a]];return i}(this,e,n);case"utf8":case"utf-8":return g(this,e,n);case"ascii":return function(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}(this,e,n);case"latin1":case"binary":return function(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}(this,e,n);case"base64":return i=this,a=e,o=n,0===a&&o===i.length?r.fromByteArray(i):r.fromByteArray(i.slice(a,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,n){for(var r=t.slice(e,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}(this,e,n);default:if(s)throw TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),s=!0}}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){var a;if(0===t.length)return -1;if("string"==typeof n?(r=n,n=0):n>0x7fffffff?n=0x7fffffff:n<-0x80000000&&(n=-0x80000000),(a=n*=1)!=a&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length)if(i)return -1;else n=t.length-1;else if(n<0)if(!i)return -1;else n=0;if("string"==typeof e&&(e=s.from(e,r)),s.isBuffer(e))return 0===e.length?-1:v(t,e,n,r,i);if("number"==typeof e){if(e&=255,"function"==typeof Uint8Array.prototype.indexOf)if(i)return Uint8Array.prototype.indexOf.call(t,e,n);else return Uint8Array.prototype.lastIndexOf.call(t,e,n);return v(t,[e],n,r,i)}throw TypeError("val must be string, number or Buffer")}function v(t,e,n,r,i){var a,o=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return -1;o=2,s/=2,u/=2,n/=2}function c(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var p=-1;for(a=n;a<s;a++)if(c(t,a)===c(e,-1===p?0:a-p)){if(-1===p&&(p=a),a-p+1===u)return p*o}else -1!==p&&(a-=a-p),p=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var l=!0,h=0;h<u;h++)if(c(t,a+h)!==c(e,h)){l=!1;break}if(l)return a}return -1}s.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==s.prototype},s.compare=function(t,e){if(M(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),M(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(t)||!s.isBuffer(e))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:+(r<n)},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!Array.isArray(t))throw TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);if(void 0===e)for(n=0,e=0;n<t.length;++n)e+=t[n].length;var n,r=s.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(M(a,Uint8Array)&&(a=s.from(a)),!s.isBuffer(a))throw TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},s.byteLength=f,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},s.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},s.prototype.toString=function(){var t=this.length;return 0===t?"":0==arguments.length?g(this,0,t):d.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(t){if(!s.isBuffer(t))throw TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},a&&(s.prototype[a]=s.prototype.inspect),s.prototype.compare=function(t,e,n,r,i){if(M(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(t))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return -1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var a=i-r,o=n-e,u=Math.min(a,o),c=this.slice(r,i),p=t.slice(e,n),l=0;l<u;++l)if(c[l]!==p[l]){a=c[l],o=p[l];break}return a<o?-1:+(o<a)},s.prototype.includes=function(t,e,n){return -1!==this.indexOf(t,e,n)},s.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},s.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)};function g(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var a,o,s,u,c=t[i],p=null,l=c>239?4:c>223?3:c>191?2:1;if(i+l<=n)switch(l){case 1:c<128&&(p=c);break;case 2:(192&(a=t[i+1]))==128&&(u=(31&c)<<6|63&a)>127&&(p=u);break;case 3:a=t[i+1],o=t[i+2],(192&a)==128&&(192&o)==128&&(u=(15&c)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(p=u);break;case 4:a=t[i+1],o=t[i+2],s=t[i+3],(192&a)==128&&(192&o)==128&&(192&s)==128&&(u=(15&c)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(p=u)}null===p?(p=65533,l=1):p>65535&&(p-=65536,r.push(p>>>10&1023|55296),p=56320|1023&p),r.push(p),i+=l}var h=r,f=h.length;if(f<=4096)return String.fromCharCode.apply(String,h);for(var d="",m=0;m<f;)d+=String.fromCharCode.apply(String,h.slice(m,m+=4096));return d}function b(t,e,n){if(t%1!=0||t<0)throw RangeError("offset is not uint");if(t+e>n)throw RangeError("Trying to access beyond buffer length")}function x(t,e,n,r,i,a){if(!s.isBuffer(t))throw TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw RangeError('"value" argument is out of bounds');if(n+r>t.length)throw RangeError("Index out of range")}function w(t,e,n,r,i,a){if(n+r>t.length||n<0)throw RangeError("Index out of range")}function _(t,e,n,r,a){return e*=1,n>>>=0,a||w(t,e,n,4,34028234663852886e22,-34028234663852886e22),i.write(t,e,n,r,23,4),n+4}function S(t,e,n,r,a){return e*=1,n>>>=0,a||w(t,e,n,8,17976931348623157e292,-17976931348623157e292),i.write(t,e,n,r,52,8),n+8}s.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else if(isFinite(e))e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i,a,o,s,u,c,p,l,h=this.length-e;if((void 0===n||n>h)&&(n=h),t.length>0&&(n<0||e<0)||e>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var f=!1;;)switch(r){case"hex":return function(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=e.length;r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s,u=parseInt(e.substr(2*o,2),16);if((s=u)!=s)break;t[n+o]=u}return o}(this,t,e,n);case"utf8":case"utf-8":return i=e,a=n,A(N(t,this.length-i),this,i,a);case"ascii":return o=e,s=n,A(E(t),this,o,s);case"latin1":case"binary":return function(t,e,n,r){return A(E(e),t,n,r)}(this,t,e,n);case"base64":return u=e,c=n,A(P(t),this,u,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p=e,l=n,A(function(t,e){for(var n,r,i=[],a=0;a<t.length&&!((e-=2)<0);++a)r=(n=t.charCodeAt(a))>>8,i.push(n%256),i.push(r);return i}(t,this.length-p),this,p,l);default:if(f)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),f=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},s.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r=this.subarray(t,e);return Object.setPrototypeOf(r,s.prototype),r},s.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||b(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r},s.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||b(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},s.prototype.readUInt8=function(t,e){return t>>>=0,e||b(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,e){return t>>>=0,e||b(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,e){return t>>>=0,e||b(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,e){return t>>>=0,e||b(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+0x1000000*this[t+3]},s.prototype.readUInt32BE=function(t,e){return t>>>=0,e||b(t,4,this.length),0x1000000*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||b(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},s.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||b(t,e,this.length);for(var r=e,i=1,a=this[t+--r];r>0&&(i*=256);)a+=this[t+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*e)),a},s.prototype.readInt8=function(t,e){return(t>>>=0,e||b(t,1,this.length),128&this[t])?-((255-this[t]+1)*1):this[t]},s.prototype.readInt16LE=function(t,e){t>>>=0,e||b(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?0xffff0000|n:n},s.prototype.readInt16BE=function(t,e){t>>>=0,e||b(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?0xffff0000|n:n},s.prototype.readInt32LE=function(t,e){return t>>>=0,e||b(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return t>>>=0,e||b(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return t>>>=0,e||b(t,4,this.length),i.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return t>>>=0,e||b(t,4,this.length),i.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return t>>>=0,e||b(t,8,this.length),i.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return t>>>=0,e||b(t,8,this.length),i.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,e,n,r){if(t*=1,e>>>=0,n>>>=0,!r){var i=Math.pow(2,8*n)-1;x(this,t,e,n,i,0)}var a=1,o=0;for(this[e]=255&t;++o<n&&(a*=256);)this[e+o]=t/a&255;return e+n},s.prototype.writeUIntBE=function(t,e,n,r){if(t*=1,e>>>=0,n>>>=0,!r){var i=Math.pow(2,8*n)-1;x(this,t,e,n,i,0)}var a=n-1,o=1;for(this[e+a]=255&t;--a>=0&&(o*=256);)this[e+a]=t/o&255;return e+n},s.prototype.writeUInt8=function(t,e,n){return t*=1,e>>>=0,n||x(this,t,e,1,255,0),this[e]=255&t,e+1},s.prototype.writeUInt16LE=function(t,e,n){return t*=1,e>>>=0,n||x(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeUInt16BE=function(t,e,n){return t*=1,e>>>=0,n||x(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeUInt32LE=function(t,e,n){return t*=1,e>>>=0,n||x(this,t,e,4,0xffffffff,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},s.prototype.writeUInt32BE=function(t,e,n){return t*=1,e>>>=0,n||x(this,t,e,4,0xffffffff,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeIntLE=function(t,e,n,r){if(t*=1,e>>>=0,!r){var i=Math.pow(2,8*n-1);x(this,t,e,n,i-1,-i)}var a=0,o=1,s=0;for(this[e]=255&t;++a<n&&(o*=256);)t<0&&0===s&&0!==this[e+a-1]&&(s=1),this[e+a]=(t/o|0)-s&255;return e+n},s.prototype.writeIntBE=function(t,e,n,r){if(t*=1,e>>>=0,!r){var i=Math.pow(2,8*n-1);x(this,t,e,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[e+a]=255&t;--a>=0&&(o*=256);)t<0&&0===s&&0!==this[e+a+1]&&(s=1),this[e+a]=(t/o|0)-s&255;return e+n},s.prototype.writeInt8=function(t,e,n){return t*=1,e>>>=0,n||x(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,n){return t*=1,e>>>=0,n||x(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeInt16BE=function(t,e,n){return t*=1,e>>>=0,n||x(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeInt32LE=function(t,e,n){return t*=1,e>>>=0,n||x(this,t,e,4,0x7fffffff,-0x80000000),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},s.prototype.writeInt32BE=function(t,e,n){return t*=1,e>>>=0,n||x(this,t,e,4,0x7fffffff,-0x80000000),t<0&&(t=0xffffffff+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeFloatLE=function(t,e,n){return _(this,t,e,!0,n)},s.prototype.writeFloatBE=function(t,e,n){return _(this,t,e,!1,n)},s.prototype.writeDoubleLE=function(t,e,n){return S(this,t,e,!0,n)},s.prototype.writeDoubleBE=function(t,e,n){return S(this,t,e,!1,n)},s.prototype.copy=function(t,e,n,r){if(!s.isBuffer(t))throw TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n||0===t.length||0===this.length)return 0;if(e<0)throw RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw RangeError("Index out of range");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i=r-n;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,n,r);else if(this===t&&n<e&&e<r)for(var a=i-1;a>=0;--a)t[a+e]=this[a+n];else Uint8Array.prototype.set.call(t,this.subarray(n,r),e);return i},s.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw TypeError("Unknown encoding: "+r);if(1===t.length){var i,a=t.charCodeAt(0);("utf8"===r&&a<128||"latin1"===r)&&(t=a)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw RangeError("Out of range index");if(n<=e)return this;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{var o=s.isBuffer(t)?t:s.from(t,r),u=o.length;if(0===u)throw TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<n-e;++i)this[i+e]=o[i%u]}return this};var T=/[^+/0-9A-Za-z-_]/g;function N(t,e){e=e||1/0;for(var n,r=t.length,i=null,a=[],o=0;o<r;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319||o+1===r){(e-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&a.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;a.push(n)}else if(n<2048){if((e-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else if(n<1114112){if((e-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}else throw Error("Invalid code point")}return a}function E(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function P(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(T,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function A(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length)&&!(i>=t.length);++i)e[i+n]=t[i];return i}function M(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}var O=function(){for(var t="0123456789abcdef",e=Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)e[r+i]=t[n]+t[i];return e}()},783:function(t,e){e.read=function(t,e,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,c=u>>1,p=-7,l=n?i-1:0,h=n?-1:1,f=t[e+l];for(l+=h,a=f&(1<<-p)-1,f>>=-p,p+=s;p>0;a=256*a+t[e+l],l+=h,p-=8);for(o=a&(1<<-p)-1,a>>=-p,p+=r;p>0;o=256*o+t[e+l],l+=h,p-=8);if(0===a)a=1-c;else{if(a===u)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,r),a-=c}return(f?-1:1)*o*Math.pow(2,a-r)},e.write=function(t,e,n,r,i,a){var o,s,u,c=8*a-i-1,p=(1<<c)-1,l=p>>1,h=5960464477539062e-23*(23===i),f=r?0:a-1,d=r?1:-1,m=+(e<0||0===e&&1/e<0);for(isNaN(e=Math.abs(e))||e===1/0?(s=+!!isNaN(e),o=p):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+l>=1?e+=h/u:e+=h*Math.pow(2,1-l),e*u>=2&&(o++,u/=2),o+l>=p?(s=0,o=p):o+l>=1?(s=(e*u-1)*Math.pow(2,i),o+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,i),o=0));i>=8;t[n+f]=255&s,f+=d,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;t[n+f]=255&o,f+=d,o/=256,c-=8);t[n+f-d]|=128*m}}},n={};function r(t){var i=n[t];if(void 0!==i)return i.exports;var a=n[t]={exports:{}},o=!0;try{e[t](a,a.exports,r),o=!1}finally{o&&delete n[t]}return a.exports}r.ab="//",t.exports=r(72)}()}}]);